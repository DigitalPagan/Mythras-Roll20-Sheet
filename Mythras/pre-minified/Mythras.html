
<div class="sheet-mythras-defaults">
    <!-- Edit Toogle -->
    <input class="sheet-hidden sheet-edit-toggle" type="checkbox" name='attr_edit' value="1" checked>

    <!-- Header -->
    <div class="sheet-sticky-header">
        <div class="sheet-space-between">
            <div class="sheet-flex">
                <!-- Roll Options -->
                <div>
                    <input type='hidden' class='sheet-checkbtn' name='attr_roll_display' value="/w gm"/>
                    <button type="action" class="sheet-inverted-checkbtn" name="act_roll_display" data-i18n="whisper">Whisper</button>
                </div>

                <!-- <div>
                    <input type='hidden' class='sheet-checkbtn' name='attr_name_display' value="1" checked/>
                    <button type="action" class="sheet-checkbtn" name="act_name_display" data-i18n="show-name">Show Name</button>
                </div> -->

                <div class="sheet-rmargin"><label class="sheet-left" data-i18n="difficulty">Difficulty</label></div>
                <div class="sheet-rmargin">
                    <select class="sheet-auto-width sheet-usrinput sheet-text-center" name="attr_difficulty">
                        <option value="0" data-i18n="verbose" selected>verbose</option>
                        <option value="1" data-i18n="very_easy">Very Easy</option>
                        <option value="2" data-i18n="easy">Easy</option>
                        <option value="3" data-i18n="standard">Standard</option>
                        <option value="4" data-i18n="hard">Hard</option>
                        <option value="5" data-i18n="formidable">Formidable</option>
                        <option value="6" data-i18n="herculean">Herculean</option>
                    </select>
                </div>

                <div class="sheet-rmargin"><label class="sheet-left" data-i18n="augmentation">Augmentation</label></div>
                <div class="sheet-rmargin">
                    <select class="sheet-auto-width sheet-usrinput sheet-text-center" name="attr_augmentation">
                        <option value="0" data-i18n="none" selected>None</option>
                        <option value="?{Augmentation|0}" data-i18n="prompt">Prompt</option>
                        <option value="@{skill_augment}" data-i18n="per-skill">Per skill</option>
                        <option value="@{set_augmentation}" data-i18n="set">Set</option>
                    </select>
                </div>
                <input type="hidden" class="sheet-set-toggle" name="attr_augmentation">
                <div class="sheet-rmargin sheet-toggle">
                    <input type="number" class="sheet-number-width-sm sheet-usrinput" name="attr_set_augmentation" value="0">
                </div>

                <div class="sheet-rmargin"><label class="sheet-left" data-i18n="101+_penalty">101+ Penalty</label></div>
                <div class="sheet-rmargin">
                    <select class="sheet-auto-width sheet-usrinput sheet-text-center" name="attr_penalty">
                        <option value="0" data-i18n="none" selected>None</option>
                        <option value="?{101+ Penalty|0}" data-i18n="prompt">Prompt</option>
                        <option value="@{set_penalty}" data-i18n="set">Set</option>
                    </select>
                </div>
                <input type="hidden" class="sheet-set-toggle" name="attr_penalty">
                <div class="sheet-rmargin sheet-toggle">
                    <input type="number" class="sheet-number-width-sm sheet-usrinput" name="attr_set_penalty" value="0">
                </div>


            </div>
            <div>
                <!-- Mode -->
                <input type='hidden' class='sheet-checkbtn' name='attr_edit' value="1"/>
                <button type="action" class="sheet-checkbtn" name="act_edit"><span class="sheet-pictos">p</span> <span data-i18n="edit-mode">Edit Mode</span></button>

                <!-- Configuration Toggle -->
                <input type='checkbox' name='attr_config' value="1"><span class="sheet-checkico">y</span>

                <!-- Help Toggle -->
                <input type="checkbox" name="attr_sheet_help" value="1" checked><span class="sheet-checkico">?</span>
            </div>
        </div>

        <!-- Help Section -->
        <input type='hidden' class='sheet-toggle' name='attr_sheet_help' value="1"/>
        <div class="sheet-toggle sheet-infomsg">
            <div class="sheet-space-between-centered">
                <div>
                    <input type="text" class="sheet-hidden" name="attr_version" value="3.0" readonly>
                    <label class="sheet-left" data-i18n="sheet-version">Sheet Version</label>&nbsp;<span name="attr_version"></span>
                </div>
                <div>
                    <span data-i18n="recalc-notice">If your sheet values are incorrect, try clicking here.</span> <span> -> </span>
                    <button type="action" name="act_recalc" class="sheet-action-btn sheet-text-center" data-i18n="recalculate-sheet">Recalculate Sheet</button>
                </div>
            </div>
            <hr>
            <p data-i18n="help-description">This is the help section covering the options bar and it's settings. It can be hidden or revealed at any time by clicking the question mark symbol in the upper-right.  Other help sections can be toggled with similar symbols found through-out the sheet.</p>
            <label class="sheet-left" data-i18n="edit-mode">Edit Mode</label><br>
            <p data-i18n="help-edit-info">Use edit mode when building and improving your sheet.  Anything labeled Base Mod or Other is provided permanent or semi-permanent modifications.  For example, the effects of ageing on a characteristic, an additional Action Point from a gift or skill improvements from experience and training.  When disabled the sheet is optimized for game play.  In this mode Temp modifiers are provided for temporary adjustments.  Magic buffs and penalties for example.</p>
            <label class="sheet-left" data-i18n="whisper">Whisper</label><br>
            <p data-i18n="help-whisper-info">Send roll results to the GM only.</p>
            <label class="sheet-left" data-i18n="show-name">Show Name</label><br>
            <p data-i18n="help-show-name-info">Show the name in roll results.</p>
            <label class="sheet-left"><span class="sheet-pictos">y</span> <span data-i18n="configuration">Configuration</span></label><br>
            <p data-i18n="help-configuration-info">Show options to change sheet type, enable or disable optional rules, and modify how the sheet works.</p>
            <label class="sheet-left" data-i18n="links">Links</label><br>
            <div class="sheet-space-between">
                <button type="roll" class="sheet-link" name="roll_reportbug" value="Report a bug with the sheet here: https://github.com/DigitalPagan/Mythras-Roll20-Sheet/issues/new" data-i18n="report-a-bug">Report a Bug</button>
                <button type="roll" class="sheet-link" name="roll_roll20forum" value="Visit the Mythras Roll20 forum here: https://www.tapatalk.com/groups/designmechanism/mythras-roll20-f19/" data-i18n="mythras-roll20-forum">Mythras Roll20 Forum</button>
                <button type="roll" class="sheet-link" name="roll_contactsheetauthor" value="Visit the author's profile and send a private message: https://app.roll20.net/users/103705" data-i18n="contact-sheet-author">Contact Sheet Author</button>
            </div>
        </div>

        <!-- Config Section -->
        <input type='hidden' class='sheet-toggle' name='attr_config' value="0"/>
        <div class="sheet-toggle">
            <!-- Sheet Settings -->
            <!-- Sheet Type Selection -->
<label class="sheet-left" data-i18n="sheet-type">Sheet Type</label>&nbsp;
<select data-i18n-list="sheet-type-order" title="@{type}" class="sheet-usrinput" name="attr_type">
    <option  value="battle-unit" data-i18n-list-item="battle_unit" data-i18n="battle-unit">Battle Unit</option>
    <option value="character" data-i18n-list-item="major_character" data-i18n="major_character" data-i18n="major_character" selected>Major Character</option>
    <option value="creature" data-i18n-list-item="major_character_creature" data-i18n="minor_character_creature" data-i18n="minor_character_creature">Minor Character (Creature)</option>
    <option value="spirit" data-i18n-list-item="major_character_spirit" data-i18n="minor_character_spirit" data-i18n="minor_character_spirit">Minor Character (Spirit)</option>
    <option  value="ship" data-i18n-list-item="ship" data-i18n="ship">Ship</option>
    <option  value="star_system" data-i18n-list-item="star_system" data-i18n="star-system">Star System</option>
    <option  value="vehicle" data-i18n-list-item="vehicle"><span data-i18n="vehicle">Vehicle</span>/<span data-i18n="spaceship">Spaceship</span></option>
</select>

<!-- Campaign Settings Warning -->
<div class="sheet-warnmsg">
    <span data-i18n="settings-warning">The below settings are generally set by your GM and should not be adjusted on a sheet by sheet basis.  They are provided here for visibility, experimentation and other rare use cases.  Make sure to check with your GM before making any alterations.</span>
</div>

<!-- Campaign Settings -->
<div class="sheet-section">
    <div class="sheet-flex-centered">
        <div class="sheet-rmargin"><h2 data-i18n="setting">Setting</h2></div>
        <div>
            <select class="sheet-auto-width sheet-usrinput sheet-text-center" name="attr_setting" data-i18n-list="setting-order">
                <option value="custom" data-i18n="custom">Custom</option>
                <option value="default" data-i18n="default" selected>Default</option>
                <option value="after_the_vampire_wars" data-i18n-list-item="after_the_vampire_wars" data-i18n="after_the_vampire_wars">After the Vampire Wars</option>
                <option value="classic_fantasy" data-i18n-list-item="classic_fantasy" data-i18n="classic_fantasy">Classic Fantasy</option>
                <option value="destined" data-i18n-list-item="destined" data-i18n="destined">Destined</option>
                <option value="fioracitta" data-i18n-list-item="fioracitta" data-i18n="fioracitta">Fioracitta</option>
                <option value="luther_arkwright" data-i18n-list-item="luther_arkwright" data-i18n="luther_arkwright">Luther Arkwright</option>
                <option value="lyonesse" data-i18n-list-item="lyonesse" data-i18n="lyonesse">Lyonesse</option>
                <option value="m-space" data-i18n-list-item="m-space" data-i18n="m-space">M-Space</option>
                <option value="monster_island" data-i18n-list-item="monster_island" data-i18n="monster_island">Monster Island</option>
                <option value="mythic_babylon" data-i18n-list-item="mythic_babylon" data-i18n="mythic_babylon">Mythic Babylon</option>
                <option value="mythic_britain" data-i18n-list-item="mythic_britain" data-i18n="mythic_britain">Mythic Britain</option>
                <option value="mythic_constantinople" data-i18n-list-item="mythic_constantinople" data-i18n="mythic_constantinople">Mythic Constantinople</option>
                <option value="mythic_rome" data-i18n-list-item="mythic_rome" data-i18n="mythic_rome">Mythic Rome</option>
                <option value="mythras_imperative" data-i18n-list-item="mythras_imperative" data-i18n="mythras_imperative">Mythras Imperative</option>
                <option value="odd_soot" data-i18n-list-item="add_soot" data-i18n="odd_soot">Odd Soot</option>
                <option value="perceforest" data-i18n-list-item="perceforest" data-i18n="perceforest">Perceforest</option>
                <option value="thennla" data-i18n-list-item="thennla" data-i18n="thennla">Thennla</option>
                <option value="worlds_united" data-i18n-list-item="worlds_united" data-i18n="worlds_united">Worlds United</option>
            </select>
        </div>
    </div>
</div>


<div class='sheet-space-between'>
    <div class="sheet-third-col sheet-rmargin">
        <!-- Systems -->
        <div class="sheet-section">
            <h2 data-i18n="mechanical-systems">Mechanical Systems</h2>

            <!-- Extended Conflict Resolution -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_extended_conflict_resolution_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="extended-conflict-resolution">Extended Conflict Resolution</span>
                </label>
            </div>

            <!-- Rank -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_luck_points_rank' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="rank">Rank</span>
                </label>
            </div>

            <!-- Simplified Combat -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_simplified_combat_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="simplified-combat">Simplified Combat</span>
                </label>
            </div>

            <!-- Social Conflict -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_social_conflict_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="social_conflict">Social Conflict</span>
                </label>
            </div>

            <!-- Limitations -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_limitations_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="limitations">Limitations</span>
                </label>
            </div>
        </div>

        <!-- Skills -->
        <div class="sheet-section sheet-rpad">
            <h2 data-i18n="skills">Skills</h2>

            <!-- Herculean Skill Modifier -->
            <div class="sheet-flex">
                <label class="sheet-left" data-i18n="herculean-modifier">Herculean Modifier</label>
                <select class="sheet-full-width sheet-usrinput" name="attr_herculean_mod">
                    <option value=".1">1/10</option>
                    <option value=".2">1/5</option>
                </select>
            </div>

            <div><label class="sheet-left" data-i18n="standard_skills">Standard Skills</label></div>
            <!-- Boating Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_boating_standard' value="1" checked><span>3</span>
                    <span data-i18n="boating">Boating</span>
                </label>
            </div>
            <!-- Drive Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_drive_standard' value="1" checked><span>3</span>
                    <span data-i18n="drive">Drive</span>
                </label>
            </div>
            <!-- Home Parallel Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_home_parallel_standard' value="1"><span>3</span>
                    <span data-i18n="home_parallel">Home Parallel</span>
                </label>
            </div>
            <!-- Locale Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_locale_standard' value="1" checked><span>3</span>
                    <span data-i18n="locale">Locale</span>
                </label>
            </div>
            <!-- Ride Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_ride_standard' value="1" checked><span>3</span>
                    <span data-i18n="ride">Ride</span>
                </label>
            </div>
            <!-- Status Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_status_standard' value="1"><span>3</span>
                    <span data-i18n="status">Status</span>
                </label>
            </div>
            <!-- Strangeness Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_strangeness_standard' value="1"><span>3</span>
                    <span data-i18n="strangeness">Strangeness</span>
                </label>
            </div>
            <!-- Superstition Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_superstition_standard' value="1"><span>3</span>
                    <span data-i18n="superstition">Superstition</span>
                </label>
            </div>
            <!-- The Soot Standard -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_the_soot_standard' value="1"><span>3</span>
                    <span data-i18n="the_soot">The Soot</span>
                </label>
            </div>
        </div>
    </div>


    <div class="sheet-third-col sheet-rmargin">
        <!-- Weapon Settings -->
        <div class="sheet-section">
            <h2 data-i18n="weapons">Weapons</h2>

            <div><label class="sheet-left" data-i18n="close_combat">Close Combat</label></div>
            <!-- Reach -->
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_reach_enabled' value="1" checked><span>3</span>
                    <span data-i18n="reach">Reach</span>
                </label>
            </div>

            <div><label class="sheet-left" data-i18n="ranged">Ranged</label></div>
            <div class="sheet-lpad">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_fire_rate_enabled' value="1"/><span>3</span>
                    <span data-i18n="fire_rate">Fire Rate</span>
                </label>
            </div>
        </div>

        <div class="sheet-section sheet-rpad">
            <!-- Attributes -->
            <h2 data-i18n="attributes">Attributes</h2>

            <!-- Action Point Calculation -->
            <div class="sheet-flex">
                <label class="sheet-left" data-i18n="action_points">Action Points</label>
                <select class="sheet-full-width sheet-usrinput" name="attr_action_points_calc">
                    <option value="calculate" data-i18n="calculated" selected>Calculated</option>
                    <option value="set_2" data-i18n="set-at-2">Set at 2</option>
                    <option value="set_3" data-i18n="set-at-3">Set at 3</option>
                </select>
            </div>

            <!-- Magic Points -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_magic_points_enabled' value="1" checked/><span>3</span>
                    <span class="sheet-bold" data-i18n="magic_points">Magic Points</span>
                </label>
            </div>

            <!-- Power Points -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_power_points_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="power_points">Power Points</span>
                </label>
            </div>

            <!-- Prana Points -->
            <div>
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_prana_points_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="prana_points">Prana Points</span>
                </label>
            </div>

            <!-- Tenacity -->
            <div class="flex">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_tenacity_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="tenacity">Tenacity</span>
                </label>
            </div>
        </div>

        <div class="sheet-section sheet-rpad" data-i18n-list="sheet-passion-toggle-order">
            <!-- Passions -->
            <h2 data-i18n="passions">Passions</h2>

            <!-- Corruptions -->
            <div data-i18n-list-item="corruptions">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_corruptions_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="corruptions">Corruptions</span>
                </label>
            </div>

            <!-- Dependencies -->
            <div data-i18n-list-item="dependencies">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_dependencies_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="dependencies">Dependencies</span>
                </label>
            </div>

            <!-- Perculiarities -->
            <div data-i18n-list-item="peculiarities">
                <label class="sheet-checkbox">
                    <input type='checkbox' name='attr_peculiarities_enabled' value="1"/><span>3</span>
                    <span class="sheet-bold" data-i18n="peculiarities">Perculiarities</span>
                </label>
            </div>
        </div>
    </div>

    <div class="sheet-third-col">
        <!-- Magic & Abilities -->
        <div class="sheet-section sheet-rpad">
            <h2 data-i18n="magic_&_abilities">Magic & Abilities</h2>

            <!-- Magic Systems -->
            <div class="sheet-flex">
                <label class="sheet-left" data-i18n="magic_systems">Magic Systems</label>
                <select class="sheet-full-width sheet-usrinput sheet-text-right" name="attr_magic_systems" data-i18n-list="setting-order">
                    <option value="none" data-i18n="none">None</option>
                    <option value="all" data-i18n="all">All</option>
                    <option value="default" data-i18n="default" selected>Default</option>
                    <option value="after_the_vampire_wars" data-i18n-list-item="after_the_vampire_wars" data-i18n="after_the_vampire_wars">After the Vampire Wars</option>
                    <option value="classic_fantasy" data-i18n-list-item="classic_fantasy" data-i18n="classic_fantasy">Classic Fantasy</option>
                    <option value="luther_arkwright" data-i18n-list-item="luther_arkwright" data-i18n="luther_arkwright">Luther Arkwright</option>
                    <option value="lyonesse" data-i18n-list-item="lyonesse" data-i18n="lyonesse">Lyonesse</option>
                    <option value="mythic_babylon" data-i18n-list-item="mythic_babylon" data-i18n="mythic_babylon">Mythic Babylon</option>
                    <option value="mythic_britain" data-i18n-list-item="mythic_britain" data-i18n="mythic_britain">Mythic Britain</option>
                    <option value="perceforest" data-i18n-list-item="perceforest" data-i18n="perceforest">Perceforest</option>
                    <option value="thennla" data-i18n-list-item="thennla" data-i18n="thennla">Thennla</option>
                    <option value="worlds_united" data-i18n-list-item="worlds_united" data-i18n="worlds_united">Worlds United</option>
                </select>
            </div>
        </div>
    </div>
</div>
        </div>

        <input type="hidden" class="sheet-typetoggle" name="attr_type" value="character" />
        <div class="sheet-character sheet-tmargin">
            <hr>
            <div class="sheet-space-between">
                <input type='hidden' class='sheet-character-tab' name='attr_character_tab' value='all'/>
                <div class="sheet-character-tabs">
                    <button type="action" class="sheet-checkbtn sheet-character-tab-all" name="act_character_tab_all" data-i18n="all">All</button>
                    <button type="action" class="sheet-checkbtn sheet-character-tab-core" name="act_character_tab_core" data-i18n="core">Core</button>
                    <button type="action" class="sheet-checkbtn sheet-character-tab-abilities" name="act_character_tab_abilities" data-i18n="abilities">Abilities</button>
                    <button type="action" class="sheet-checkbtn sheet-character-tab-equipment sheet-major" name="act_character_tab_equipment" data-i18n="equipment">Equipment</button>
                    <button type="action" class="sheet-checkbtn sheet-character-tab-background sheet-major" name="act_character_tab_background" data-i18n="background">Background</button>
                    <button type="action" class="sheet-checkbtn sheet-character-tab-notes" name="act_character_tab_notes" data-i18n="notes">Notes</button>
                    |
                    <button type="action" class="sheet-checkbtn sheet-character-tab-import sheet-edit" name="act_character_tab_import" data-i18n="import">Import</button>
                </div>
                <div class="sheet-play">
                    <input type='hidden' class='sheet-checkbtn' name='attr_compact' value="0"/>
                    <button type="action" class="sheet-checkbtn" name="act_compact" data-i18n="compact">Compact</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Sheet Types -->
    <input type="hidden" class="sheet-typetoggle" name="attr_type" value="character" />
    <div class="sheet-battle-unit">Battle Unit</div>
    <div class="sheet-character">
    <!-- Compact Toogle -->
    <input class="sheet-hidden sheet-compact" type="checkbox" name='attr_compact' value="1">

    <!-- Character Sheet Tabs -->
    <input type='hidden' class='sheet-character-tab' name='attr_character_tab' value='all'/>

    <!-- TODO: Mooks -->
<!-- TODO: DRY the char1 v char2 code -->
<!-- TODO: Divider pattern -->
<!-- TODO: Custom passion type -->

<!-- Core Tab -->
<div class='sheet-character-tab-core'>
    <!-- Character Header -->
    <div class="sheet-flex sheet-detailed">
        <!-- Info Section -->
        <div class="sheet-section sheet-info">
            <!-- Info 1st Row -->
            <div class="sheet-flex">
                <div class="sheet-info-box sheet-info-name">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{character_name}" name="attr_character_name">
                    <label class="sheet-under" data-i18n="name">Name</label>
                </div>
                <div class="sheet-info-box sheet-info-species">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{species}" name="attr_species">
                    <label class="sheet-under" data-i18n="species">Species</label>
                </div>
                <div class="sheet-info-box sheet-info-culture">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{culture}" name="attr_culture">
                    <label class="sheet-under"><span data-i18n="culture">Culture</span></label>
                </div>
                <div class="sheet-info-box sheet-info-career">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{career}" name="attr_career">
                    <label class="sheet-under" data-i18n="career">Career</label>
                </div>
                <div class="sheet-info-box sheet-info-height sheet-minor sheet-corporal">
                    <input type="number" style="padding-right: 25px" class="sheet-usrinput sheet-full-width" title="@{height}" name="attr_height" value="178">
                    <span class="sheet-input-unit" data-i18n="centimetres-short">cm</span>
                    <label class="sheet-under" data-i18n="height-bugfix-id">Height</label>
                </div>
                <div class="sheet-info-box sheet-info-weight sheet-minor sheet-corporal">
                    <input type="number" style="padding-right: 20px" class="sheet-usrinput sheet-full-width" title="@{weight}" name="attr_weight" value="88">
                    <span class="sheet-input-unit" data-i18n="kilograms-short">kg</span>
                    <label class="sheet-under" data-i18n="weight">Weight</label>
                </div>
                <input type="checkbox" class="sheet-toggle sheet-hidden" name="attr_luck_points_rank" value="1">
                <div class="sheet-info-box sheet-toggle sheet-info-rank sheet-minor">
                    <input type="number" class="sheet-usrinput sheet-full-width" title="@{rank}" name="attr_rank" value="0">
                    <label class="sheet-under" data-i18n="rank">Rank</label>
                </div>
            </div>
            <!-- Info 2nd Row -->
            <div class="sheet-flex sheet-major">
                <div class="sheet-info-box sheet-info-homeland">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{homeland}" name="attr_homeland">
                    <label class="sheet-under" data-i18n="homeland">Homeland</label>
                </div>
                <div class="sheet-info-box sheet-info-social-class">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{social_class}" name="attr_social_class">
                    <label class="sheet-under" data-i18n="social-class">Name</label>
                </div>
                <div class="sheet-info-box sheet-info-age">
                    <input type="number" class="sheet-usrinput sheet-full-width" title="@{age}" name="attr_age" value="0">
                    <label class="sheet-under" data-i18n="age">Age</label>
                </div>
                <div class="sheet-info-box sheet-info-gender">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{gender}" name="attr_gender">
                    <label class="sheet-under" data-i18n="gender">Gender</label>
                </div>
                <div class="sheet-info-box sheet-info-frame">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{frame}" name="attr_frame">
                    <label class="sheet-under" data-i18n="frame">Gender</label>
                </div>
                <div class="sheet-info-box sheet-info-height">
                    <input type="number" style="padding-right: 25px" class="sheet-usrinput sheet-full-width" title="@{height}" name="attr_height" value="178">
                    <span class="sheet-input-unit" data-i18n="centimetres-short">cm</span>
                    <label class="sheet-under" data-i18n="height-bugfix-id">Height</label>
                </div>
                <div class="sheet-info-box sheet-info-weight">
                    <input type="number" style="padding-right: 20px" class="sheet-usrinput sheet-full-width" title="@{weight}" name="attr_weight" value="88">
                    <span class="sheet-input-unit" data-i18n="kilograms-short">kg</span>
                    <label class="sheet-under" data-i18n="weight">Weight</label>
                </div>
                <input type="checkbox" class="sheet-toggle sheet-hidden" name="attr_luck_points_rank" value="1">
                <div class="sheet-info-box sheet-toggle sheet-info-rank">
                    <input type="number" class="sheet-usrinput sheet-full-width" title="@{rank}" name="attr_rank" value="0">
                    <label class="sheet-under" data-i18n="rank">Rank</label>
                </div>
            </div>
        </div>

        <!-- Header 2nd Column -->
        <div class="sheet-logo sheet-major">
            <!-- Logo -->
            <div>
                <img src="https://i.imgur.com/EzQDmms.png" alt="Mythras">
                
                
            </div>
            <!-- Experience Rolls Section -->
            <div class="sheet-space-between">
                <label class="sheet-left" data-i18n="experience-rolls">Exp Rolls</label>
                <input type="number" class="sheet-usrinput sheet-grow" title="@{experience_rolls}" name="attr_experience_rolls" value="0">
            </div>
        </div>
    </div>

    <!-- Top Stats -->
    <div class="sheet-flex">
        <!-- Characteristics -->
        <div class=" sheet-section sheet-rmargin">
            <h2 data-i18n="characteristics">Characteristics</h2>

            <div class="sheet-flex">
                <div class="sheet-th sheet-number-width"></div>
                <div class="sheet-th sheet-edit sheet-number-width" data-i18n="base">Base</div>
                <div class="sheet-th sheet-edit sheet-number-width" data-i18n="other">Other</div>
                <div class="sheet-th sheet-play sheet-number-width" data-i18n="temp">Temp</div>
                <div class="sheet-th sheet-number-width" data-i18n="total">Total</div>
                <div class="sheet-th sheet-edit sheet-checkbox-width sheet-help sheet-pictos" data-i18n-title="advanced_configuration">y</div>
            </div>

            <!-- STR -->
            <div class="sheet-flex sheet-hl sheet-corporal">
                <div class="sheet-td sheet-number-width sheet-char-label"><label class="sheet-left" data-i18n="str-u">STR</label></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{str_base}" name="attr_str_base" value="11"></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{str_other}" name="attr_str_other" value="0"></div>
                <div class="sheet-td sheet-play sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{str_temp}" name="attr_str_temp" value="0"></div>
                <div class="sheet-td sheet-number-width"><input type="number" class="sheet-impvalue sheet-number-width" title="@{str}" name="attr_str" value="11" readonly></div>
                <div class="sheet-td sheet-edit sheet-checkbox-width"></div>
            </div>

            <!-- CON -->
            <div class="sheet-flex sheet-hl sheet-corporal">
                <div class="sheet-td sheet-number-width sheet-char-label"><label class="sheet-left" data-i18n="con-u">CON</label></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{con_base}" name="attr_con_base" value="11"></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{con_other}" name="attr_con_other" value="0"></div>
                <div class="sheet-td sheet-play sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{con_temp}" name="attr_con_temp" value="0"></div>
                <div class="sheet-td sheet-number-width"><input type="number" class="sheet-impvalue sheet-number-width" title="@{con}" name="attr_con" value="11" readonly></div>
                <div class="sheet-td sheet-edit sheet-checkbox-width"></div>
            </div>

            <!-- SIZ -->
            <div class="sheet-flex sheet-hl sheet-corporal">
                <div class="sheet-td sheet-number-width sheet-char-label"><label class="sheet-left" data-i18n="siz-u">SIZ</label></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{siz_base}" name="attr_siz_base" value="13"></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{siz_other}" name="attr_siz_other" value="0"></div>
                <div class="sheet-td sheet-play sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{siz_temp}" name="attr_siz_temp" value="0"></div>
                <div class="sheet-td sheet-number-width"><input type="number" class="sheet-impvalue sheet-number-width" title="@{siz}" name="attr_siz" value="13" readonly></div>
                <div class="sheet-td sheet-edit sheet-checkbox-width"><input type="checkbox" class="sheet-major" title="@{siz_details}" name="attr_siz_details" value="1" checked><span class="sheet-checkico sheet-major">y</span></div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_siz_details" value="1" checked>
            <div class="sheet-toggle sheet-edit sheet-major sheet-corporal">
                <label class="sheet-left" data-18n="avg-species-siz">Average Species SIZ</label>
                <input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{avg_species_siz}" name="attr_avg_species_siz" value="13">
            </div>

            <!-- DEX -->
            <div class="sheet-flex sheet-hl sheet-corporal">
                <div class="sheet-td sheet-number-width sheet-char-label"><label class="sheet-left" data-i18n="dex-u">DEX</label></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{dex_base}" name="attr_dex_base" value="11"></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{dex_other}" name="attr_dex_other" value="0"></div>
                <div class="sheet-td sheet-play sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{dex_temp}" name="attr_dex_temp" value="0"></div>
                <div class="sheet-td sheet-number-width"><input type="number" class="sheet-impvalue sheet-number-width" title="@{dex}" name="attr_dex" value="11" readonly></div>
                <div class="sheet-td sheet-edit sheet-checkbox-width"></div>
            </div>

            <!-- INT -->
            <div class="sheet-flex sheet-hl">
                <div class="sheet-td sheet-number-width sheet-char-label"><label class="sheet-left"><span name="attr_int_type" data-i18n-dynamic>INT</span></label></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{int_base}" name="attr_int_base" value="13"></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{int_other}" name="attr_int_other" value="0"></div>
                <div class="sheet-td sheet-play sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{int_temp}" name="attr_int_temp" value="0"></div>
                <div class="sheet-td sheet-number-width"><input type="number" class="sheet-impvalue sheet-number-width" title="@{int}" name="attr_int" value="13" readonly></div>
                <div class="sheet-td sheet-edit sheet-checkbox-width"><input type="checkbox" title="@{int_details}" name="attr_int_details" value="1"><span class="sheet-checkico">y</span></div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_int_details" value="1">
            <div class="sheet-toggle sheet-edit">
                <label class="sheet-left sheet-lite" data-i18n="intellect">Intellect</label>
                <select class="sheet-auto-width sheet-usrinput" name="attr_int_type">
                    <option value="int-u" data-i18n="int-u" selected>INT</option>
                    <option value="ins-u" data-i18n="ins-u">INS</option>
                </select>
            </div>

            <!-- POW -->
            <div class="sheet-flex sheet-hl">
                <div class="sheet-td sheet-number-width sheet-char-label"><label class="sheet-left" data-i18n="pow-u">POW</label></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{pow_base}" name="attr_pow_base" value="11"></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{pow_other}" name="attr_pow_other" value="0"></div>
                <div class="sheet-td sheet-play sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{pow_temp}" name="attr_pow_temp" value="0"></div>
                <div class="sheet-td sheet-number-width"><input type="number" class="sheet-impvalue sheet-number-width" title="@{pow}" name="attr_pow" value="11" readonly></div>
                <div class="sheet-td sheet-edit sheet-checkbox-width"></div>
            </div>

            <!-- CHA -->
            <div class="sheet-flex sheet-hl">
                <div class="sheet-td sheet-number-width sheet-char-label"><label class="sheet-left" data-i18n="cha-u">CHA</label></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{cha_base}" name="attr_cha_base" value="11"></div>
                <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{cha_other}" name="attr_cha_other" value="0"></div>
                <div class="sheet-td sheet-play sheet-number-width"><input type="number" class="sheet-usrinput sheet-number-width" title="@{cha_temp}" name="attr_cha_temp" value="0"></div>
                <div class="sheet-td sheet-number-width"><input type="number" class="sheet-impvalue sheet-number-width" title="@{cha}" name="attr_cha" value="11" readonly></div>
                <div class="sheet-td sheet-edit sheet-checkbox-width"></div>
            </div>

            <div class="sheet-edit">
                <input type="text" class="sheet-edit sheet-char-die-long sheet-usrinput" title="%{die_roll}" name="attr_die_roll" value="3d6">
                <input type="text" class="sheet-play sheet-char-die-short sheet-usrinput" title="%{die_roll}" name="attr_die_roll" value="3d6">
                <button type="roll" class="sheet-nodie sheet-number-width" title="%{die_roll}" data-i18n="roll" value="@{roll_display}&{template:default} {{character=@{character_name}}} {{name=@{die_roll}}} {{^{roll}=[[@{die_roll}]]}}">Roll</button>
            </div>
        </div>

        <!-- Attributes -->
        <div class="sheet-section sheet-rmargin sheet-bmargin">
            <h2 data-i18n="attributes">Attributes</h2>

            <div class="sheet-flex">
                <div class="sheet-th sheet-grow" data-i18n="attribute">Attribute</div>
                <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                <div class="sheet-th sheet-play"><div class="sheet-number-width" data-i18n="temp">Temp</div></div>
                <div class="sheet-th sheet-play"><div class="sheet-number-width sheet-help" data-i18n-title="current" data-i18n="current-abrv4">Curr</div></div>
                <div class="sheet-th sheet-play"><div class="sheet-invisible">/</div></div>
                <div class="sheet-th"><div class="sheet-number-width" data-i18n="max">Max</div></div>
                <div class="sheet-th sheet-edit"><div class="sheet-checkbox-width sheet-help sheet-pictos" data-i18n-title="advanced_configuration">y</div></div>
            </div>
            <div data-i18n-list="attribute-order">
                <!-- Action Points -->
                <div class="sheet-flex sheet-hl sheet-corporal" data-i18n-list-item="action_points">
                    <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="action_points">Action Points</label></div>
                    <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{action_points_base}" name="attr_action_points_base" value="2" readonly></div>
                    <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{action_points_other}" name="attr_action_points_other" value="0"></div>
                    <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{action_points_temp}" name="attr_action_points_temp" value="0"></div>
                    <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{action_points}" name="attr_action_points" value="2"></div>
                    <div class="sheet-td sheet-play">/</div>
                    <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{action_points|max}" name="attr_action_points_max" value="2" readonly></div>
                    <div class="sheet-td sheet-edit"><div class="sheet-checkbox-width"></div></div>
                </div>
                <!-- Damage Modifier -->
                <div class="sheet-hl sheet-corporal" data-i18n-list-item="damage_mod">
                    <div class="sheet-flex">
                        <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="damage_mod">Damage Mod</label></div>
                        <div class="sheet-td sheet-edit"><input type="text" class=" sheet-number-width" title="@{damage_mod_base}" name="attr_damage_mod_base" value="0" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{damage_mod_other}" name="attr_damage_mod_other" value="0"></div>
                        <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" data-i18n-title="damage-mod-title" data-i18n-vars="@{damage_mod_temp},&#13;" title="0steps on the damage table" name="attr_damage_mod_temp" value="0"></div>
                        <div class="sheet-td sheet-play"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><span class="sheet-invisible">/</span></div>
                        <div class="sheet-td sheet-text-right"><input type="text" class="sheet-impvalue sheet-number-width" title="@{damage_mod}" name="attr_damage_mod" value="0" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="checkbox" title="@{damage_mod_details}" name="attr_damage_mod_details" value="1"><span class="sheet-checkico">y</span></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_damage_mod_details" value="1">
                    <div class="sheet-edit sheet-toggle">
                        &emsp;<label class="sheet-left sheet-lite" data-i18n="calculate_with">Calculate with</label>
                        <select class="sheet-usrinput sheet-attr-calc-width" name="attr_damage_mod_calc">
                            <option data-i18n="str-siz" value="0" selected>STR+SIZ</option>
                            <option data-i18n="str-siz-pow" value="1">STR+SIZ+POW</option>
                            <option data-i18n="str-siz-con" value="2">STR+SIZ+CON</option>
                        </select>
                    </div>
                </div>
                <!-- Experience Modifier -->
                <div class="sheet-hl sheet-major" data-i18n-list-item="exp_mod">
                    <div class="sheet-flex">
                        <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="experience_modifier">Exp Modifier</label></div>
                        <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{experience_mod_base}" name="attr_experience_mod_base" value="0" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{experience_mod_other}" name="attr_experience_mod_other" value="0"></div>
                        <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{experience_mod_temp}" name="attr_experience_mod_temp" value="0"></div>
                        <div class="sheet-td sheet-play"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><span class="sheet-invisible">/</span></div>
                        <div class="sheet-td sheet-text-right"><input type="number" class="sheet-impvalue sheet-number-width" title="@{experience_mod}" name="attr_experience_mod" value="0" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="checkbox" title="@{damage_mod_details}" name="attr_experience_mod_details" value="1"><span class="sheet-checkico">y</span></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_experience_mod_details" value="1">
                    <div class="sheet-edit sheet-toggle">
                        &emsp;<label class="sheet-left sheet-lite" data-i18n="calculate_with">Calculate with</label>
                        <select class="sheet-usrinput sheet-attr-calc-width" name="attr_experience_mod_calc">
                            <option data-i18n="cha-u" value="0" selected>CHA</option>
                            <option data-i18n="int-u" value="1">INT</option>
                        </select>
                    </div>
                </div>
                <!-- Healing Rate -->
                <div class="sheet-hl sheet-corporal" data-i18n-list-item="healing_rate">
                    <div class="sheet-flex">
                        <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="healing_rate">Healing Rate</label></div>
                        <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{healing_rate_base}" name="attr_healing_rate_base" value="2" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{healing_rate_other}" name="attr_healing_rate_other" value="0"></div>
                        <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{healing_rate_temp}" name="attr_healing_rate_temp" value="0"></div>
                        <div class="sheet-td sheet-play"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><span class="sheet-invisible">/</span></div>
                        <div class="sheet-td sheet-text-right"><input type="number" class="sheet-impvalue sheet-number-width" title="@{healing_rate}" name="attr_healing_rate" value="2" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="checkbox" title="@{healing_rate_details}" name="attr_healing_rate_details" value="1"><span class="sheet-checkico">y</span></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_healing_rate_details" value="1">
                    <div class="sheet-edit sheet-toggle">
                        &emsp;<label class="sheet-checkbox">
                            <input type='checkbox' name='attr_healing_rate_double' value="1"/><span>3</span>
                            <span data-i18n="double_base_healing_rate">Double Base Healing Rate</span>
                        </label>
                        <br>
                        &emsp;<label class="sheet-left sheet-lite" data-i18n="calculate_with">Calculate with</label>
                        <select class="sheet-usrinput sheet-attr-calc-width" name="attr_healing_rate_calc">
                            <option data-i18n="con-u" value="0" selected>CON</option>
                            <option data-i18n="con_+_1/2_pow-u" value="1">CON + 1/2 POW</option>
                        </select>
                    </div>
                </div>
                <!-- Initiative -->
                <div class="sheet-hl sheet-corporal" data-i18n-list-item="initiative">
                    <div class="sheet-flex">
                        <div class="sheet-td sheet-grow sheet-text-left"><button type="roll" class="sheet-link sheet-link-label sheet-link-label-left" title="%{initiative}" name="roll_initiative" value="@{roll_display}&{template:default} {{yellow=1}} {{character=@{character_name}}} {{name=^{initiative}}} {{^{roll}=[[@{init_dice} + @{initiative_bonus} &{tracker}]]}}" data-i18n="initiative">Initiative</button></div>
                        <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{initiative_bonus_base}" name="attr_initiative_bonus_base" value="12" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{initiative_bonus_other}" name="attr_initiative_bonus_other" value="0"></div>
                        <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{initiative_bonus_temp}" name="attr_initiative_bonus_temp" value="0"></div>
                        <div class="sheet-td sheet-play"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><span class="sheet-invisible">/</span></div>
                        <div class="sheet-td sheet-text-right"><input type="number" class="sheet-impvalue sheet-number-width" title="@{initiative_bonus}" name="attr_initiative_bonus" value="12" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="checkbox" title="@{initiative_bonus_details}" name="attr_initiative_bonus_details" value="1"><span class="sheet-checkico">y</span></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_initiative_bonus_details" value="1">
                    <div class="sheet-edit sheet-toggle">
                        &emsp;<label class="sheet-checkbox">
                            <input type='checkbox' title="@{initiative_add_one_tenth_athletics}" name='attr_initiative_add_one_tenth_athletics' value="1"/><span>3</span>
                            <span data-i18n="add_1/10_athletics">Add 1/10 Athletics</span>
                        </label>
                        <br>
                        &emsp;<label class="sheet-left sheet-lite" data-i18n="initiative_roll">Initiative Roll</label>
                        <input type="text" class=" sheet-attr-calc-width sheet-usrinput" title="@{init_dice}" name="attr_init_dice" value="1d10">
                    </div>
                </div>
                <!-- Spirit Intensity -->
                <div class="sheet-hl sheet-spirit" data-i18n-list-item="intensity">
                    <div class="sheet-flex">
                        <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="intensity">Intensity</label></div>
                        <div class="sheet-td sheet-edit"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-edit"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><span class="sheet-invisible">/</span></div>
                        <div class="sheet-td sheet-text-right"><input type="number" class="sheet-impvalue sheet-number-width" title="@{spirit_intensity}" name="attr_spirit_intensity" value="2" readonly></div>
                        <div class="sheet-td sheet-edit"><div class="sheet-checkbox-width"></div></div>
                    </div>
                </div>
                <!-- Luck Points -->
                <div class="sheet-hl sheet-major" data-i18n-list-item="luck_points">
                    <div class="sheet-flex">
                        <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="luck_points">Luck Points</label></div>
                        <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{luck_points_base}" name="attr_luck_points_base" value="2" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{luck_points_other}" name="attr_luck_points_other" value="0"></div>
                        <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{luck_points_temp}" name="attr_luck_points_temp" value="0"></div>
                        <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{luck_points}" name="attr_luck_points" value="2"></div>
                        <div class="sheet-td sheet-play">/</div>
                        <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{luck_points|max}" name="attr_luck_points_max" value="2" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="checkbox" title="@{luck_points_details}" name="attr_luck_points_details" value="1"><span class="sheet-checkico">y</span></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_luck_points_details" value="1">
                    <div class="sheet-edit sheet-toggle">
                        &emsp;<label class="sheet-left sheet-lite" data-i18n="calculate_with">Calculate with</label>
                        <select class="sheet-usrinput sheet-attr-calc-width" name="attr_luck_points_calc">
                            <option data-i18n="pow-u" value="0" selected>POW</option>
                            <option data-i18n="cha_+_1/2_pow-u" value="1">CHA + 1/2 POW</option>
                        </select>
                    </div>
                </div>
                <!-- Magic Points -->
                <div data-i18n-list-item="magic_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_magic_points_enabled' value="1" checked/>
                    <div class="sheet-toggle sheet-hl">
                        <div class="sheet-flex">
                            <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="magic_points">Magic Points</label></div>
                            <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{magic_points_base}" name="attr_magic_points_base" value="11" readonly></div>
                            <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points_other}" name="attr_magic_points_other" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points_temp}" name="attr_magic_points_temp" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points}" name="attr_magic_points" value="11"></div>
                            <div class="sheet-td sheet-play">/</div>
                            <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                            <div class="sheet-td sheet-edit"><div class="sheet-checkbox-width"></div></div>
                        </div>
                    </div>
                </div>
                <!-- Movement Rate -->
                <div class="sheet-hl sheet-corporal" data-i18n-list-item="move_rate">
                    <input type="hidden" class="sheet-movement-calc" name="attr_movement_rate_calc" value="standard">
                    <div class="sheet-flex sheet-standard-movement">
                        <div class="sheet-td sheet-grow sheet-text-left"><button type="roll" class="sheet-link sheet-link-label sheet-link-label-left" title="%{movement}" name="roll_movement" value="@{roll_display}&{template:movement} {{character=@{character_name}}} {{name=^{movement}}} {{walk=@{movement_rate}^{meters-abrv}}} {{run=[[ceil((@{movement_rate}*3)+(floor(@{athletics_total}/25)/2)+@{armor_penalty})]]^{meters-abrv}}} {{sprint=[[(@{movement_rate}*5)+floor(@{athletics_total}/25)+@{armor_penalty}]]^{meters-abrv}}} {{climb_rough=[[ceil(@{movement_rate}+ceil(@{armor_penalty}/2))]]^{meters-abrv}}} {{climb_steep=[[@{movement_rate}+@{armor_penalty}]]^{meters-abrv}}} {{climb_sheer=[[@{movement_rate}+(@{armor_penalty}*2)]]^{meters-abrv}}} {{running_jump_horizontal=[[ceil(((@{height}/100)*2)+(floor(@{athletics_total}/20))+(@{armor_penalty}/2))]]^{meters-abrv}}} {{running_jump_vertical=[[ceil((((@{height}/100)/2)+(floor(@{athletics_total}/20)*.2)+(@{armor_penalty}/2))*100)]]^{centimetres-short}}} {{standing_jump_horizontal=[[ceil((@{height}/100)+(floor(@{athletics_total}/20))+(@{armor_penalty}/2))]]^{meters-abrv}}} {{standing_jump_vertical=[[ceil((((@{height}/100)/4)+(floor(@{athletics_total}/20)*.2)+(@{armor_penalty}/2))*100)]]^{centimetres-short}}} {{swim=[[@{movement_rate}+(floor(@{swim_total}/20))]]^{meters-abrv}}} {{sink=[[ceil((@{movement_rate}+(floor(@{swim_total}/20)))/2)+@{armor_penalty}]]}}" data-i18n="movement">Movement</button></div>
                        <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{movement_rate_species}" name="attr_movement_rate_species" value="6"></div>
                        <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{movement_rate_other}" name="attr_movement_rate_other" value="0"></div>
                        <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{movement_rate_temp}" name="attr_movement_rate_temp" value="0"></div>
                        <div class="sheet-td sheet-play"><div class="sheet-number-width"></div></div>
                        <div class="sheet-td sheet-play"><span class="sheet-invisible">/</span></div>
                        <div class="sheet-td sheet-text-right"><input type="number" class="sheet-impvalue sheet-number-width" title="@{movement_rate}" name="attr_movement_rate" value="6" readonly></div>
                        <div class="sheet-td sheet-edit"><input type="checkbox" title="@{movement_rate_details}" name="attr_movement_rate_details" value="1"><span class="sheet-checkico">y</span></div>
                    </div>
                    <div class="sheet-flex sheet-custom-movement">
                        <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="movement">Movement</label></div>
                        <div class="sheet-td sheet-custom-movement-width sheet-text-left"><input type="text" class="sheet-full-width sheet-text-right sheet-usrinput" title="@{custom_movement}" name="attr_custom_movement"></div>
                        <div class="sheet-td sheet-edit"><input type="checkbox" title="@{movement_rate_details}" name="attr_movement_rate_details" value="1"><span class="sheet-checkico">y</span></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_movement_rate_details" value="1">
                    <div class="sheet-edit sheet-toggle">
                        <select class="sheet-usrinput sheet-full-width" name="attr_movement_rate_calc">
                            <option data-i18n="standard_with_calculations" value="standard" selected>Standard with calculations</option>
                            <option data-i18n="custom" value="custom">Custom</option>
                        </select>
                    </div>
                </div>
                <!-- Power Points -->
                <div data-i18n-list-item="power_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_power_points_enabled' value="1"/>
                    <div class="sheet-toggle sheet-hl" >
                        <div class="sheet-flex">
                            <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="power_points">Power Points</label></div>
                            <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{magic_points_base}" name="attr_magic_points_base" value="11" readonly></div>
                            <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points_other}" name="attr_magic_points_other" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points_temp}" name="attr_magic_points_temp" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points}" name="attr_magic_points" value="11"></div>
                            <div class="sheet-td sheet-play">/</div>
                            <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                            <div class="sheet-td sheet-edit"><div class="sheet-checkbox-width"></div></div>
                        </div>
                    </div>
                </div>
                <!-- Prana Points -->
                <div data-i18n-list-item="prana_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_prana_points_enabled' value="1"/>
                    <div class="sheet-toggle sheet-hl">
                        <div class="sheet-flex">
                            <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="prana_points">Prana Points</label></div>
                            <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{magic_points_base}" name="attr_magic_points_base" value="11" readonly></div>
                            <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points_other}" name="attr_magic_points_other" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points_temp}" name="attr_magic_points_temp" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{magic_points}" name="attr_magic_points" value="11"></div>
                            <div class="sheet-td sheet-play">/</div>
                            <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                            <div class="sheet-td sheet-edit"><div class="sheet-checkbox-width"></div></div>
                        </div>
                    </div>
                </div>
                <!-- Tenacity -->
                <div data-i18n-list-item="tenacity">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_tenacity_enabled' value="1"/>
                    <div class="sheet-toggle sheet-hl">
                        <div class="sheet-flex">
                            <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="tenacity">Tenacity</label></div>
                            <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{tenacity_base}" name="attr_tenacity_base" value="11" readonly></div>
                            <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{tenacity_other}" name="attr_tenacity_other" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{tenacity_temp}" name="attr_tenacity_temp" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{tenacity}" name="attr_tenacity" value="11"></div>
                            <div class="sheet-td sheet-play">/</div>
                            <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{tenacity|max}" name="attr_tenacity_max" value="11" readonly></div>
                            <div class="sheet-td sheet-checkbox-width sheet-edit"><input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_dependencies_enabled' value="1"/><div class="sheet-toggle"><input type="checkbox" title="@{tenacity_details}" name="attr_tenacity_details" value="1"><span class="sheet-checkico">y</span></div></div>
                        </div>
                        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_tenacity_details" value="1">
                        <div class="sheet-edit sheet-toggle">
                            &emsp;<label class="sheet-checkbox">
                                <input type='checkbox' title="@{apply_dependencies_penalty}" name='attr_apply_dependencies_penalty' value="1" checked/><span>3</span>
                                <span data-i18n="apply_dependencies_penalty">Apply Dependencies Penalty</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sheet-flex-column sheet-grow">
            <!-- Fatigue -->
            <div class="sheet-section sheet-corporal">
                <details>
                    <summary>
                        <div class="sheet-flex-centered">
                            <h2 data-i18n="fatigue">Fatigue</h2>
                            <div class="sheet-grow sheet-text-right">
                                <select class="sheet-auto-width sheet-usrinput sheet-text-center" title="@{fatigue}" name="attr_fatigue">
                                    <option value="9" data-i18n="fresh" selected>Fresh</option>
                                    <option value="8" data-i18n="winded">Winded</option>
                                    <option value="7" data-i18n="tired">Tired</option>
                                    <option value="6" data-i18n="wearied">Wearied</option>
                                    <option value="5" data-i18n="exhausted">Exhausted</option>
                                    <option value="4" data-i18n="debilitated">Debilitated</option>
                                    <option value="3" data-i18n="incapacitated">Incapacitated</option>
                                    <option value="2" data-i18n="semi-conscious">Semi-Conscious</option>
                                    <option value="1" data-i18n="comatose">Comatose</option>
                                    <option value="0" data-i18n="dead">Dead</option>
                                </select>
                                <span name="attr_fatigue_recovery"></span> <span name="attr_fatigue_recovery_unit" data-i18n-dynamic>mins</span><input type="hidden" name="attr_fatigue_recovery_unit" value="minutes-abrv-l">
                            </div>
                        </div>
                    </summary>

                    <div class="sheet-table">
                        <div class="sheet-tr">
                            <div class="sheet-th" data-i18n="skills">Skills</div>
                            <div class="sheet-th" data-i18n="ap">AP</div>
                            <div class="sheet-th" data-i18n="init">Init</div>
                            <div class="sheet-th" data-i18n="move">Move</div>
                        </div>
                        <div class="sheet-tr">
                            <div class="sheet-td">
                                <select class="sheet-full-width sheet-disabled sheet-text-center" title="@{fatigue_skills}" name="attr_fatigue_skills">
                                    <option value="0" data-i18n="standard" selected>Standard</option>
                                    <option value="1" data-i18n="hard">Hard</option>
                                    <option value="2" data-i18n="formidable">Formidable</option>
                                    <option value="3" data-i18n="herculean">Herculean</option>
                                    <option value="4" data-i18n="hopeless">Hopeless</option>
                                    <option value="5" data-i18n="na">N/A</option>
                                </select>
                            </div>
                            <div class="sheet-td">
                                <select class="sheet-full-width sheet-disabled sheet-text-center" title="@{action_points_fatigue}" name="attr_action_points_fatigue">
                                    <option value="0">0</option>
                                    <option value="-1">-1</option>
                                    <option value="-2">-2</option>
                                    <option value="-3">-3</option>
                                    <option value="-99">N/A</option>
                                </select>
                            </div>
                            <div class="sheet-td">
                                <select class="sheet-full-width sheet-disabled sheet-text-center" title="@{initiative_bonus_fatigue}" name="attr_initiative_bonus_fatigue">
                                    <option value="0">0</option>
                                    <option value="-2">-2</option>
                                    <option value="-4">-4</option>
                                    <option value="-6">-6</option>
                                    <option value="-8">-8</option>
                                    <option value="-99">N/A</option>
                                </select>
                            </div>
                            <div class="sheet-td">
                                <select class="sheet-full-width sheet-disabled sheet-text-center" title="@{movement_rate_fatigue}" name="attr_movement_rate_fatigue">
                                    <option value="+0">0</option>
                                    <option value="-1">-1</option>
                                    <option value="-2">-2</option>
                                    <option value="*.5" data-i18n="half">1/2</option>
                                    <option value="*0" data-i18n="na">N/A</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <input type="hidden" name="attr_fatigue_max" value="9">
                </details>
            </div>
            <!-- ENC summary -->
            <div class="sheet-section sheet-major">
                <div class="sheet-flex-centered">
                    <h2 data-i18n="encumbrance">Encumbrance</h2>
                    <div class="sheet-grow sheet-text-right">
                        <label class="sheet-checkbox sheet-rmargin">
                            <input type='checkbox' title="@{pack_equipped}" name='attr_pack_equipped' value="1" checked/><span>3</span>
                            <span class="sheet-bold" data-i18n="equip-pack">Equip Pack</span>
                        </label>
                        <select class="sheet-auto-width sheet-disabled sheet-text-center" title="@{encumbrance_load}" name="attr_encumbrance_load">
                            <option value="0" data-i18n="normal" selected>Normal</option>
                            <option value="1" data-i18n="medium">Medium</option>
                            <option value="2" data-i18n="strenuous">Strenuous</option>
                            <option value="3" data-i18n="impossible">Impossible</option>
                        </select>
                    </div>
                </div>
            </div>
            <!-- Conditions -->
            <div class="sheet-section sheet-grow sheet-flex-column">
                <h2><span data-i18n="conditions">Conditions</span>/<span data-i18n="wounds">Wounds</span>/<span data-i18n="active_effects">Active Effects</span></h2>
                <textarea class="sheet-full-width sheet-grow" title="@{conditions}" name="attr_conditions"></textarea>
            </div>
        </div>
    </div>

    <!-- Conflict TODO: move spirit configs and health configs into generic conflict configs-->
    <div class="sheet-section">
        <div class="sheet-flex-centered">
            <h2><span data-i18n="conflict">Conflict</span>:&nbsp;</h2>
            <input type="checkbox" class="sheet-extended-conflict-toggle sheet-hidden" name="attr_extended_conflict_resolution_enabled" value="1">
            <input type='hidden' class='sheet-conflict-mode' name='attr_conflict_mode' value='combat'>
            <div class="sheet-conflict-mode sheet-bmargin">
                <button type="action" class="sheet-checkbtn sheet-conflict-mode-none" name="act_conflict_mode_none" data-i18n="none">None</button>
                <button type="action" class="sheet-checkbtn sheet-conflict-mode-combat sheet-corporal" name="act_conflict_mode_combat" data-i18n="combat">Combat</button>
                <button type="action" class="sheet-checkbtn sheet-extended-conflict sheet-conflict-mode-extended-conflict" name="act_conflict_mode_extended_conflict" data-i18n="extended_conflict">Extended Conflict</button>
                <button type="action" class="sheet-checkbtn sheet-conflict-mode-spirit-combat" name="act_conflict_mode_spirit_combat" data-i18n="spirit_combat">Spirit Combat</button>
                <button type="action" class="sheet-checkbtn sheet-conflict-mode-social-conflict" name="act_conflict_mode_social_conflict" data-i18n="social_conflict">Social Conflict</button>
            </div>
            <input type='hidden' class='sheet-conflict-mode' name='attr_conflict_mode' value='combat'>
            <div class="sheet-grow sheet-conflict-mode-combat sheet-text-right">
                <div class="sheet-edit">
                    <input type="checkbox" title="@{health_config}" name="attr_health_config" value="1" checked><span class="sheet-checkico">y</span>
                </div>
                <div class="sheet-play">
                    <label class="sheet-left" data-18n="temp-ap-all">Temp AP (All)</label><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{all_armor_temp}" name="attr_all_armor_temp" value="0">
                    <label class="sheet-left" data-18n="temp-armor-all">Temp HP (All)</label><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{all_hp_temp}" name="attr_all_hp_temp" value="0">
                </div>
            </div>
        </div>

        <!-- Special Effects Roll -->
        <div class="sheet-hidden">
            <button type="roll" name="roll_special_effects" value="@{roll_display}&{template:default} {{name=^{special_effects}}} {{character=@{character_name}}} {{notes=?{Special Effects}}}"></button>
        </div>

        <div data-i18n-list="combat_mode_order">
            <input type='hidden' class='sheet-conflict-mode' name='attr_conflict_mode' value='combat'>

            <!-- Combat -->
            <div class='sheet-conflict-mode-combat' data-i18n-list-item="combat">
                <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_health_config" value="1" checked>
                <div class="sheet-toggle sheet-edit sheet-flex sheet-corporal">
                    <input type='checkbox' class="sheet-hidden sheet-simplified-combat-toggle" name='attr_simplified_combat_enabled' value="1"/>
                    <div class="sheet-text-right sheet-complex-combat sheet-rmargin">
                        <label class="sheet-left" data-18n="form">Form</label>
                        <select class="sheet-usrinput sheet-auto-width" title="@{hit_locations}" name="attr_hit_locations" data-i18n-list="hit-location-order">
                            <option value="custom1" data-i18n="custom_1_location" data-i18n-list-item="custom_1_location">Custom(1 Location)</option>
                            <option value="custom7" data-i18n="custom_7_locations" data-i18n-list-item="custom_7_locations" selected >Custom(7 Locations)</option>
                            <option value="custom8" data-i18n="custom_8_locations" data-i18n-list-item="custom_8_locations">Custom(8 Locations)</option>
                            <option value="custom9" data-i18n="custom_9_locations" data-i18n-list-item="custom_9_locations">Custom(9 Locations)</option>
                            <option value="custom10" data-i18n="custom_10_locations" data-i18n-list-item="custom_10_locations">Custom(10 Locations)</option>
                            <option value="custom11" data-i18n="custom_11_locations" data-i18n-list-item="custom_11_locations">Custom(11 Locations)</option>
                            <option value="custom" data-i18n="custom_12_locations" data-i18n-list-item="custom_12_locations">Custom(12 Locations)</option>
                            <option value="rabble" data-i18n="rabble-underling" data-i18n-list-item="rabble">Rabble/Underling</option>
                            <option class="sheet-hidden" value="simplified" data-i18n="simplified-combat">Simplified Combat</option>
                            <option data-i18n-list-item="spacer" disabled>──────────</option>
                            <option value="arachnid" data-i18n="arachnid" data-i18n-list-item="arachnid">Arachnid</option>
                            <option value="humanoid" data-i18n="biped" data-i18n-list-item="biped">Biped</option>
                            <option value="centaurid" data-i18n="centaurid" data-i18n-list-item="centaurid">Centaurid</option>
                            <option value="decapoda" data-i18n="decapoda" data-i18n-list-item="decapoda">Decapoda</option>
                            <option value="decapodiform" data-i18n="decapodiform" data-i18n-list-item="decapodiform">Decapodiform</option>
                            <option value="dorsal_finned_aquatic" data-i18n="dorsal-finned-aquatic" data-i18n-list-item="dorsal_finned_aquatic">Dorsal Finned Aquatic</option>
                            <option value="draconic" data-i18n="draconic" data-i18n-list-item="draconic">Draconic</option>
                            <option value="insect" data-i18n="insect" data-i18n-list-item="insect">Insect</option>
                            <option value="octopodiform" data-i18n="octopodiform" data-i18n-list-item="octopodiform">Octopodiform</option>
                            <option value="pachyderm" data-i18n="pachyderm" data-i18n-list-item="pachyderm">Pachyderm</option>
                            <option value="quadruped" data-i18n="quadruped" data-i18n-list-item="quadruped">Quadruped</option>
                            <option value="serpentine" data-i18n="serpentine" data-i18n-list-item="serpentine">Serpentine</option>
                            <option value="tailed_arachnid" data-i18n="tailed_arachnid" data-i18n-list-item="tailed_arachnid">Tailed Arachnid</option>
                            <option value="tailed_biped" data-i18n="tailed_biped" data-i18n-list-item="tailed_biped">Tailed Biped</option>
                            <option value="tailed_quadruped" data-i18n="tailed_quadruped" data-i18n-list-item="tailed_quadruped">Tailed Quadruped</option>
                            <option value="winged_biped" data-i18n="winged_biped" data-i18n-list-item="winged_biped">Winged Biped</option>
                            <option value="winged_insect" data-i18n="winged_insect" data-i18n-list-item="winged_insect">Winged Insect</option>
                            <option value="winged_quadruped" data-i18n="winged_quadruped" data-i18n-list-item="winged_quadruped">Winged Quadruped</option>
                        </select>
                    </div>
                    <div>
                        <label class="sheet-left" data-18n="hit_point_calculation">Hit Point Calculation</label>
                        <select class="sheet-usrinput sheet-auto-width" name="attr_hp_calc">
                            <option data-i18n="con-siz" value="0" selected>CON+SIZ</option>
                            <option data-i18n="con-siz-pow" value="1">CON+SIZ+POW</option>
                            <option data-i18n="con-siz-str" value="2">CON+SIZ+STR</option>
                        </select>
                    </div>
                </div>

                <div class="sheet-flex sheet-corporal">
                    <!-- Hit Locations -->
                    <div class="sheet-rmargin">
                        <div class="sheet-table">
                            <div class="sheet-tr">
                                <div class="sheet-th"><button type="roll" class="sheet-link sheet-link-label" title="%{hit_location}, %{hit_location_low}, %{hit_location_high}" name="roll_hit_location" value="@{roll_display}&{template:hit-location} {{name=^{hit_location}(d20)}} {{character=@{character_name}}} {{roll=[[1d20]]}} {{loc1_name=@{location1_name}}} {{loc1_start=[[@{location1_table_start}]]}} {{loc1_end=[[@{location1_table_end}]]}} {{loc1_block=@{location1_block}}} {{loc1_ap=@{location1_ap}}} {{loc1_hp=@{location1_hp}}} {{loc1_hp_max=@{location1_hp|max}}} {{loc2_name=@{location2_name}}} {{loc2_start=[[@{location2_table_start}]]}} {{loc2_end=[[@{location2_table_end}]]}} {{loc2_block=@{location2_block}}} {{loc2_ap=@{location2_ap}}} {{loc2_hp=@{location2_hp}}} {{loc2_hp_max=@{location2_hp|max}}} {{loc3_name=@{location3_name}}} {{loc3_start=[[@{location3_table_start}]]}} {{loc3_end=[[@{location3_table_end}]]}} {{loc3_block=@{location3_block}}} {{loc3_ap=@{location3_ap}}} {{loc3_hp=@{location3_hp}}} {{loc3_hp_max=@{location3_hp|max}}} {{loc4_name=@{location4_name}}} {{loc4_start=[[@{location4_table_start}]]}} {{loc4_end=[[@{location4_table_end}]]}} {{loc4_block=@{location4_block}}} {{loc4_ap=@{location4_ap}}} {{loc4_hp=@{location4_hp}}} {{loc4_hp_max=@{location4_hp|max}}} {{loc5_name=@{location5_name}}} {{loc5_start=[[@{location5_table_start}]]}} {{loc5_end=[[@{location5_table_end}]]}} {{loc5_block=@{location5_block}}} {{loc5_ap=@{location5_ap}}} {{loc5_hp=@{location5_hp}}} {{loc5_hp_max=@{location5_hp|max}}} {{loc6_name=@{location6_name}}} {{loc6_start=[[@{location6_table_start}]]}} {{loc6_end=[[@{location6_table_end}]]}} {{loc6_block=@{location6_block}}} {{loc6_ap=@{location6_ap}}} {{loc6_hp=@{location6_hp}}} {{loc6_hp_max=@{location6_hp|max}}} {{loc7_name=@{location7_name}}} {{loc7_start=[[@{location7_table_start}]]}} {{loc7_end=[[@{location7_table_end}]]}} {{loc7_block=@{location7_block}}} {{loc7_ap=@{location7_ap}}} {{loc7_hp=@{location7_hp}}} {{loc7_hp_max=@{location7_hp|max}}} {{loc8_name=@{location8_name}}} {{loc8_start=[[@{location8_table_start}]]}} {{loc8_end=[[@{location8_table_end}]]}} {{loc8_block=@{location8_block}}} {{loc8_ap=@{location8_ap}}} {{loc8_hp=@{location8_hp}}} {{loc8_hp_max=@{location8_hp|max}}} {{loc9_name=@{location9_name}}} {{loc9_start=[[@{location9_table_start}]]}} {{loc9_end=[[@{location9_table_end}]]}} {{loc9_block=@{location9_block}}} {{loc9_ap=@{location9_ap}}} {{loc9_hp=@{location9_hp}}} {{loc9_hp_max=@{location9_hp|max}}} {{loc10_name=@{location10_name}}} {{loc10_start=[[@{location10_table_start}]]}} {{loc10_end=[[@{location10_table_end}]]}} {{loc10_block=@{location10_block}}} {{loc10_ap=@{location10_ap}}} {{loc10_hp=@{location10_hp}}} {{loc10_hp_max=@{location10_hp|max}}} {{loc11_name=@{location11_name}}} {{loc11_start=[[@{location11_table_start}]]}} {{loc11_end=[[@{location11_table_end}]]}} {{loc11_block=@{location11_block}}} {{loc11_ap=@{location11_ap}}} {{loc11_hp=@{location11_hp}}} {{loc11_hp_max=@{location11_hp|max}}} {{loc12_name=@{location12_name}}} {{loc12_start=[[@{location12_table_start}]]}} {{loc12_end=[[@{location12_table_end}]]}} {{loc12_block=@{location12_block}}} {{loc12_ap=@{location12_ap}}} {{loc12_hp=@{location12_hp}}} {{loc12_hp_max=@{location12_hp|max}}}">d20</button></div>
                                <div class="sheet-hidden">
                                    <button type="roll" name="roll_hit_location_low" value="@{roll_display}&{template:hit-location} {{name=^{hit_location}(d10)}} {{character=@{character_name}}} {{roll=[[1d10]]}} {{loc1_name=@{location1_name}}} {{loc1_start=[[@{location1_table_start}]]}} {{loc1_end=[[@{location1_table_end}]]}} {{loc1_block=@{location1_block}}} {{loc1_ap=@{location1_ap}}} {{loc1_hp=@{location1_hp}}} {{loc1_hp_max=@{location1_hp|max}}} {{loc2_name=@{location2_name}}} {{loc2_start=[[@{location2_table_start}]]}} {{loc2_end=[[@{location2_table_end}]]}} {{loc2_block=@{location2_block}}} {{loc2_ap=@{location2_ap}}} {{loc2_hp=@{location2_hp}}} {{loc2_hp_max=@{location2_hp|max}}} {{loc3_name=@{location3_name}}} {{loc3_start=[[@{location3_table_start}]]}} {{loc3_end=[[@{location3_table_end}]]}} {{loc3_block=@{location3_block}}} {{loc3_ap=@{location3_ap}}} {{loc3_hp=@{location3_hp}}} {{loc3_hp_max=@{location3_hp|max}}} {{loc4_name=@{location4_name}}} {{loc4_start=[[@{location4_table_start}]]}} {{loc4_end=[[@{location4_table_end}]]}} {{loc4_block=@{location4_block}}} {{loc4_ap=@{location4_ap}}} {{loc4_hp=@{location4_hp}}} {{loc4_hp_max=@{location4_hp|max}}} {{loc5_name=@{location5_name}}} {{loc5_start=[[@{location5_table_start}]]}} {{loc5_end=[[@{location5_table_end}]]}} {{loc5_block=@{location5_block}}} {{loc5_ap=@{location5_ap}}} {{loc5_hp=@{location5_hp}}} {{loc5_hp_max=@{location5_hp|max}}} {{loc6_name=@{location6_name}}} {{loc6_start=[[@{location6_table_start}]]}} {{loc6_end=[[@{location6_table_end}]]}} {{loc6_block=@{location6_block}}} {{loc6_ap=@{location6_ap}}} {{loc6_hp=@{location6_hp}}} {{loc6_hp_max=@{location6_hp|max}}} {{loc7_name=@{location7_name}}} {{loc7_start=[[@{location7_table_start}]]}} {{loc7_end=[[@{location7_table_end}]]}} {{loc7_block=@{location7_block}}} {{loc7_ap=@{location7_ap}}} {{loc7_hp=@{location7_hp}}} {{loc7_hp_max=@{location7_hp|max}}} {{loc8_name=@{location8_name}}} {{loc8_start=[[@{location8_table_start}]]}} {{loc8_end=[[@{location8_table_end}]]}} {{loc8_block=@{location8_block}}} {{loc8_ap=@{location8_ap}}} {{loc8_hp=@{location8_hp}}} {{loc8_hp_max=@{location8_hp|max}}} {{loc9_name=@{location9_name}}} {{loc9_start=[[@{location9_table_start}]]}} {{loc9_end=[[@{location9_table_end}]]}} {{loc9_block=@{location9_block}}} {{loc9_ap=@{location9_ap}}} {{loc9_hp=@{location9_hp}}} {{loc9_hp_max=@{location9_hp|max}}} {{loc10_name=@{location10_name}}} {{loc10_start=[[@{location10_table_start}]]}} {{loc10_end=[[@{location10_table_end}]]}} {{loc10_block=@{location10_block}}} {{loc10_ap=@{location10_ap}}} {{loc10_hp=@{location10_hp}}} {{loc10_hp_max=@{location10_hp|max}}} {{loc11_name=@{location11_name}}} {{loc11_start=[[@{location11_table_start}]]}} {{loc11_end=[[@{location11_table_end}]]}} {{loc11_block=@{location11_block}}} {{loc11_ap=@{location11_ap}}} {{loc11_hp=@{location11_hp}}} {{loc11_hp_max=@{location11_hp|max}}} {{loc12_name=@{location12_name}}} {{loc12_start=[[@{location12_table_start}]]}} {{loc12_end=[[@{location12_table_end}]]}} {{loc12_block=@{location12_block}}} {{loc12_ap=@{location12_ap}}} {{loc12_hp=@{location12_hp}}} {{loc12_hp_max=@{location12_hp|max}}}"></button>
                                    <button type="roll" name="roll_hit_location_high" value="@{roll_display}&{template:hit-location} {{name=^{hit_location}(d10+10)}} {{character=@{character_name}}} {{roll=[[1d10+10]]}} {{loc1_name=@{location1_name}}} {{loc1_start=[[@{location1_table_start}]]}} {{loc1_end=[[@{location1_table_end}]]}} {{loc1_block=@{location1_block}}} {{loc1_ap=@{location1_ap}}} {{loc1_hp=@{location1_hp}}} {{loc1_hp_max=@{location1_hp|max}}} {{loc2_name=@{location2_name}}} {{loc2_start=[[@{location2_table_start}]]}} {{loc2_end=[[@{location2_table_end}]]}} {{loc2_block=@{location2_block}}} {{loc2_ap=@{location2_ap}}} {{loc2_hp=@{location2_hp}}} {{loc2_hp_max=@{location2_hp|max}}} {{loc3_name=@{location3_name}}} {{loc3_start=[[@{location3_table_start}]]}} {{loc3_end=[[@{location3_table_end}]]}} {{loc3_block=@{location3_block}}} {{loc3_ap=@{location3_ap}}} {{loc3_hp=@{location3_hp}}} {{loc3_hp_max=@{location3_hp|max}}} {{loc4_name=@{location4_name}}} {{loc4_start=[[@{location4_table_start}]]}} {{loc4_end=[[@{location4_table_end}]]}} {{loc4_block=@{location4_block}}} {{loc4_ap=@{location4_ap}}} {{loc4_hp=@{location4_hp}}} {{loc4_hp_max=@{location4_hp|max}}} {{loc5_name=@{location5_name}}} {{loc5_start=[[@{location5_table_start}]]}} {{loc5_end=[[@{location5_table_end}]]}} {{loc5_block=@{location5_block}}} {{loc5_ap=@{location5_ap}}} {{loc5_hp=@{location5_hp}}} {{loc5_hp_max=@{location5_hp|max}}} {{loc6_name=@{location6_name}}} {{loc6_start=[[@{location6_table_start}]]}} {{loc6_end=[[@{location6_table_end}]]}} {{loc6_block=@{location6_block}}} {{loc6_ap=@{location6_ap}}} {{loc6_hp=@{location6_hp}}} {{loc6_hp_max=@{location6_hp|max}}} {{loc7_name=@{location7_name}}} {{loc7_start=[[@{location7_table_start}]]}} {{loc7_end=[[@{location7_table_end}]]}} {{loc7_block=@{location7_block}}} {{loc7_ap=@{location7_ap}}} {{loc7_hp=@{location7_hp}}} {{loc7_hp_max=@{location7_hp|max}}} {{loc8_name=@{location8_name}}} {{loc8_start=[[@{location8_table_start}]]}} {{loc8_end=[[@{location8_table_end}]]}} {{loc8_block=@{location8_block}}} {{loc8_ap=@{location8_ap}}} {{loc8_hp=@{location8_hp}}} {{loc8_hp_max=@{location8_hp|max}}} {{loc9_name=@{location9_name}}} {{loc9_start=[[@{location9_table_start}]]}} {{loc9_end=[[@{location9_table_end}]]}} {{loc9_block=@{location9_block}}} {{loc9_ap=@{location9_ap}}} {{loc9_hp=@{location9_hp}}} {{loc9_hp_max=@{location9_hp|max}}} {{loc10_name=@{location10_name}}} {{loc10_start=[[@{location10_table_start}]]}} {{loc10_end=[[@{location10_table_end}]]}} {{loc10_block=@{location10_block}}} {{loc10_ap=@{location10_ap}}} {{loc10_hp=@{location10_hp}}} {{loc10_hp_max=@{location10_hp|max}}} {{loc11_name=@{location11_name}}} {{loc11_start=[[@{location11_table_start}]]}} {{loc11_end=[[@{location11_table_end}]]}} {{loc11_block=@{location11_block}}} {{loc11_ap=@{location11_ap}}} {{loc11_hp=@{location11_hp}}} {{loc11_hp_max=@{location11_hp|max}}} {{loc12_name=@{location12_name}}} {{loc12_start=[[@{location12_table_start}]]}} {{loc12_end=[[@{location12_table_end}]]}} {{loc12_block=@{location12_block}}} {{loc12_ap=@{location12_ap}}} {{loc12_hp=@{location12_hp}}} {{loc12_hp_max=@{location12_hp|max}}}"></button>
                                </div>
                                <div class="sheet-th sheet-full-width" data-i18n="hit_location">Hit Location</div>
                                <div class="sheet-th sheet-play sheet-help sheet-pictos-three" data-i18n-title="passive_block_size">b</div>
                                <div class="sheet-th sheet-edit sheet-help sheet-major" data-i18n-title="other_armor_points" data-i18n="other_armor_points-abrv">O.AP</div>
                                <div class="sheet-th sheet-help sheet-minor" data-i18n-title="armor_points" data-i18n="ap">AP</div>
                                <div class="sheet-th sheet-edit sheet-minor" data-i18n="enc">ENC</div>
                                <div class="sheet-th sheet-edit sheet-help" data-i18n-title="base_hit_points" data-i18n="base_hit_points-abrv">B.HP</div>
                                <div class="sheet-th sheet-edit sheet-help" data-i18n-title="other_hit_points" data-i18n="other_hit_points-abrv">O.HP</div>
                                <div class="sheet-th sheet-play sheet-major sheet-help" data-i18n-title="armor_points" data-i18n="ap">AP</div>
                                <div class="sheet-th sheet-help" data-i18n-title="hit_points" data-i18n="hp">HP</div>
                            </div>
                            <div class="sheet-tr sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location1_table_start" name="attr_location1_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location1_table_end" name="attr_location1_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location1_name}" name="attr_location1_name" value=""></div>
                                <div class="sheet-td sheet-play sheet-checkbox-width sheet-text-center">
                                    <input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location1_block}" name="attr_location1_block" value="">
                                </div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location1_other_ap}" name="attr_location1_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location1_ap}" name="attr_location1_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location1_armor_enc}" name="attr_location1_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location1_hp_max_base_mod}" name="attr_location1_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location1_hp_max_other}" name="attr_location1_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location1_ap}" name="attr_location1_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location1_hp}" name="attr_location1_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location1_hp|max}" name="attr_location1_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_location2to7_display" value="1" checked>
                            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location2_table_start" name="attr_location2_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location2_table_end" name="attr_location2_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location2_name}" name="attr_location2_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location2_block}" name="attr_location2_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location2_other_ap}" name="attr_location2_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location2_ap}" name="attr_location2_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location2_armor_enc}" name="attr_location2_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location2_hp_max_base_mod}" name="attr_location2_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location2_hp_max_other}" name="attr_location2_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location2_ap}" name="attr_location2_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location2_hp}" name="attr_location2_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location2_hp|max}" name="attr_location2_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_location2to7_display" value="1" checked>
                            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location3_table_start" name="attr_location3_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location3_table_end" name="attr_location3_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location3_name}" name="attr_location3_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location3_block}" name="attr_location3_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location3_other_ap}" name="attr_location3_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location3_ap}" name="attr_location3_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location3_armor_enc}" name="attr_location3_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location3_hp_max_base_mod}" name="attr_location3_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location3_hp_max_other}" name="attr_location3_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location3_ap}" name="attr_location3_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location3_hp}" name="attr_location3_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location3_hp|max}" name="attr_location3_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_location2to7_display" value="1" checked>
                            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location4_table_start" name="attr_location4_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location4_table_end" name="attr_location4_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location4_name}" name="attr_location4_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location4_block}" name="attr_location4_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location4_other_ap}" name="attr_location4_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location4_ap}" name="attr_location4_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location4_armor_enc}" name="attr_location4_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location4_hp_max_base_mod}" name="attr_location4_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location4_hp_max_other}" name="attr_location4_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location4_ap}" name="attr_location4_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location4_hp}" name="attr_location4_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location4_hp|max}" name="attr_location4_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_location2to7_display" value="1" checked>
                            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location5_table_start" name="attr_location5_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location5_table_end" name="attr_location5_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location5_name}" name="attr_location5_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location5_block}" name="attr_location5_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location5_other_ap}" name="attr_location5_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location5_ap}" name="attr_location5_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location5_armor_enc}" name="attr_location5_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location5_hp_max_base_mod}" name="attr_location5_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location5_hp_max_other}" name="attr_location5_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location5_ap}" name="attr_location5_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location5_hp}" name="attr_location5_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location5_hp|max}" name="attr_location5_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_location2to7_display" value="1" checked>
                            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location6_table_start" name="attr_location6_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location6_table_end" name="attr_location6_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location6_name}" name="attr_location6_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location6_block}" name="attr_location6_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location6_other_ap}" name="attr_location6_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location6_ap}" name="attr_location6_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location6_armor_enc}" name="attr_location6_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location6_hp_max_base_mod}" name="attr_location6_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location6_hp_max_other}" name="attr_location6_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location6_ap}" name="attr_location6_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location6_hp}" name="attr_location6_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location6_hp|max}" name="attr_location6_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_location2to7_display" value="1" checked>
                            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location7_table_start" name="attr_location7_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location7_table_end" name="attr_location7_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location7_name}" name="attr_location7_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location7_block}" name="attr_location7_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location7_other_ap}" name="attr_location7_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location7_ap}" name="attr_location7_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location7_armor_enc}" name="attr_location7_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location7_hp_max_base_mod}" name="attr_location7_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location7_hp_max_other}" name="attr_location7_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location7_ap}" name="attr_location7_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location7_hp}" name="attr_location7_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location7_hp|max}" name="attr_location7_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location8_display" value="1">
                            <div class="sheet-tr sheet-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location8_table_start" name="attr_location8_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location8_table_end" name="attr_location8_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location8_name}" name="attr_location8_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location8_block}" name="attr_location8_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location8_other_ap}" name="attr_location8_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location8_ap}" name="attr_location8_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location8_armor_enc}" name="attr_location8_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location8_hp_max_base_mod}" name="attr_location8_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location8_hp_max_other}" name="attr_location8_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location8_ap}" name="attr_location8_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location8_hp}" name="attr_location8_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location8_hp|max}" name="attr_location8_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location9_display" value="1">
                            <div class="sheet-tr sheet-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location9_table_start" name="attr_location9_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location9_table_end" name="attr_location9_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location9_name}" name="attr_location9_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location9_block}" name="attr_location9_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location9_other_ap}" name="attr_location9_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location9_ap}" name="attr_location9_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location9_armor_enc}" name="attr_location9_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location9_hp_max_base_mod}" name="attr_location9_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location9_hp_max_other}" name="attr_location9_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location9_ap}" name="attr_location9_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location9_hp}" name="attr_location9_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location9_hp|max}" name="attr_location9_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location10_display" value="1">
                            <div class="sheet-tr sheet-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location10_table_start" name="attr_location10_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location10_table_end" name="attr_location10_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location10_name}" name="attr_location10_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location10_block}" name="attr_location10_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location10_other_ap}" name="attr_location10_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location10_ap}" name="attr_location10_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location10_armor_enc}" name="attr_location10_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location10_hp_max_base_mod}" name="attr_location10_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location10_hp_max_other}" name="attr_location10_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location10_ap}" name="attr_location10_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location10_hp}" name="attr_location10_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location10_hp|max}" name="attr_location10_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location11_display" value="1">
                            <div class="sheet-tr sheet-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location11_table_start" name="attr_location11_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location11_table_end" name="attr_location11_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location11_name}" name="attr_location11_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location11_block}" name="attr_location11_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location11_other_ap}" name="attr_location11_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location11_ap}" name="attr_location11_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location11_armor_enc}" name="attr_location11_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location11_hp_max_base_mod}" name="attr_location11_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location11_hp_max_other}" name="attr_location11_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location11_ap}" name="attr_location11_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location11_hp}" name="attr_location11_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location11_hp|max}" name="attr_location11_hp_max" value="0" readonly></div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location12_display" value="1">
                            <div class="sheet-tr sheet-toggle sheet-hl">
                                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location12_table_start" name="attr_location12_table_start" value="0"/>-<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location12_table_end" name="attr_location12_table_end" value="0"/></div>
                                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-text-center sheet-usrinput" title="@{location12_name}" name="attr_location12_name" value=""></div>
                                <div class="sheet-td sheet-play"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{location12_block}" name="attr_location12_block" value=""></div>
                                <div class="sheet-td sheet-edit sheet-major"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location12_other_ap}" name="attr_location12_other_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location12_ap}" name="attr_location12_ap" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit sheet-minor"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location12_armor_enc}" name="attr_location12_armor_enc" step="1" min="0" value="0"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width-sm" title="@{hp_max_base}" name="attr_hp_max_base" value="5" readonly>+<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location12_hp_max_base_mod}" name="attr_location12_hp_max_base_mod" value="-5"></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location12_hp_max_other}" name="attr_location12_hp_max_other" value="0"></div>
                                <div class="sheet-td sheet-play sheet-major"><input type="number" class="sheet-number-width sheet-impvalue" title="@{location12_ap}" name="attr_location12_ap" value="0" readonly></div>
                                <div class="sheet-td"><span class="sheet-play"><input type="number" class="sheet-number-width sheet-usrinput" title="@{location12_hp}" name="attr_location12_hp" value="0">/</span><input type="number" class="sheet-number-width sheet-impvalue" title="@{location12_hp|max}" name="attr_location12_hp_max" value="0" readonly></div>
                            </div>
                        </div>
                    </div>

                    <!-- Weapons Summary -->
                    <div>
                        <!-- Melee Weapon Summary -->
                        <div class="sheet-bmargin">
                            <input type='checkbox' class="sheet-hidden sheet-deep-toggle" name='attr_reach_enabled' value="1" checked/>
                            <div class="sheet-flex">
                                <div class="sheet-checkbox-width sheet-th"><span style="padding-bottom: -2px" class="sheet-pictos sheet-help" data-i18n-title="include_in_combat_rolls">S</span></div>
                                <div class="sheet-th sheet-grow sheet-weapon-name" data-i18n="melee_weapon">Melee Weapon</div>
                                <div class="sheet-th sheet-play sheet-button-width"></div>
                                <div class="sheet-th sheet-weapon-damage" data-i18n="damage">Damage</div>
                                <div class="sheet-th sheet-checkbox-width sheet-pictos sheet-help" data-i18n-title="damage_modifier">+</div>
                                <div class="sheet-th sheet-weapon-size"><span data-i18n="size">Size</span></div>
                                <div class="sheet-th sheet-deep-toggle sheet-weapon-reach"><span data-i18n="reach">Reach</span></div>
                                <div class="sheet-th sheet-pictos sheet-checkbox-width sheet-help" data-i18n-title="show_details">E</div>
                            </div>
                            <fieldset class="repeating_meleeweapon">
                                <div class="sheet-flex">
                                    <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_favored}" name="attr_favored" value="1"><span class="sheet-checkico">S</span></div>
                                    <div class="sheet-td sheet-grow sheet-weapon-name sheet-hover-btn">
                                        <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                                        <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                                        <input type="hidden" name="attr_id" value="unset, please change any value in this weapon" readonly>
                                    </div>
                                    <div class="sheet-td sheet-play sheet-button-width sheet-text-center"><button type="roll" class="sheet-d100" title="%{$ID_damage}" name="roll_damage" value="@{roll_display}&{template:default} {{red=1}} {{name=@{name}}} {{character=@{character_name}}} {{^{damage}=[[@{damage}+@{damage_mod_toggle}]]}} {{^{size}=@{size}}} {{notes=@{notes}}}"></button></div>
                                    <div class="sheet-td sheet-weapon-damage"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_damage}" name="attr_damage"></div>
                                    <div class="sheet-td sheet-checkbox-width sheet-text-center"><input type="checkbox" name="attr_damage_mod_toggle" title="@{$ID_damage_mod_toggle}" value="@{damage_mod}" checked><span class="sheet-checkico">+</span></div>
                                    <div class="sheet-td sheet-weapon-size"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_size}" name="attr_size"></div>
                                    <div class="sheet-td sheet-deep-toggle sheet-weapon-reach"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_reach}" name="attr_reach"></div>
                                    <div class="sheet-td sheet-checkbox-width sheet-text-center"><input type="checkbox" name="attr_details" title="@{$ID_details}" value="1" checked><span class="sheet-checkico">E</span></div>
                                </div>
                                <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1" checked>
                                <div class="sheet-toggle">
                                    <div class="sheet-flex">
                                        &emsp;
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left sheet-help" data-i18n-title="armor_points" data-i18n="ap">AP</label><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_ap}" name="attr_ap">
                                        </div>
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left sheet-help" data-i18n-title="hit_points" data-i18n="hp">HP</label><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp}" name="attr_hp" step="1" min="0" value="0">/<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp|max}" name="attr_hp_max" step="1" min="0" value="0">
                                        </div>
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left" data-i18n="enc">ENC</label><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_enc}" name="attr_enc" value="0">
                                        </div>
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left sheet-help" data-i18n-title="quantity">#</label><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_quantity}" name="attr_quantity" value="1">
                                        </div>
                                        <div class="sheet">
                                            <label class="sheet-left sheet-help" data-i18n-title="location" data-i18n="location-abrv">Loc</label>
                                            <select class="sheet-usrinput sheet-text-center sheet-auto-width" title="@{$ID_location}" name="attr_location">
                                                <option value="loadout" data-i18n="worn" selected>Worn</option>
                                                <option value="pack" data-i18n="pack">Pack</option>
                                                <option value="mount" data-i18n="transport">Transport</option>
                                                <option value="camp" data-i18n="camp">Camp</option>
                                                <option value="stash" data-i18n="stash">Stash</option>
                                                <option value="homebase" data-i18n="homebase">Homebase</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="sheet-flex">
                                        &emsp;
                                        <div>
                                            <label class="sheet-left" data-i18n="notes">Notes</label>
                                        </div>
                                        <div class="sheet-grow">
                                            <input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_notes}" name="attr_notes">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>

                        <!-- Ranged Weapon Summary -->
                        <div class="sheet-bmargin">
                            <div class="sheet-flex">
                                <div class="sheet-checkbox-width sheet-th"><span class="sheet-pictos sheet-help" data-i18n-title="include_in_combat_rolls">S</span></div>
                                <div class="sheet-th sheet-grow sheet-weapon-name" data-i18n="ranged_weapon">Ranged Weapon</div>
                                <div class="sheet-th sheet-play sheet-button-width"></div>
                                <div class="sheet-th sheet-weapon-damage" data-i18n="damage">Damage</div>
                                <div class="sheet-th sheet-checkbox-width sheet-pictos sheet-help" data-i18n-title="damage_modifier">+</div>
                                <div class="sheet-th sheet-weapon-size"><span data-i18n="force">Force</span></div>
                                <div class="sheet-th sheet-weapon-reach"><span data-i18n="range">Range</span></div>
                                <div class="sheet-th sheet-pictos sheet-checkbox-width sheet-help" data-i18n-title="show_details">E</div>
                            </div>
                            <input type='checkbox' class="sheet-hidden sheet-deep-toggle" name='attr_fire_rate_enabled' value="1"/>
                            <fieldset class="repeating_rangedweapon">
                                <div class="sheet-flex">
                                    <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_favored}" name="attr_favored" value="1"><span class="sheet-checkico">S</span></div>
                                    <div class="sheet-td sheet-full-width sheet-hover-btn">
                                        <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                                        <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                                        <input type="hidden" name="attr_id" value="unset, please change any value in this weapon" readonly>
                                    </div>
                                    <div class="sheet-td sheet-play sheet-button-width sheet-text-center"><button type="roll" class="sheet-d100" title="%{$ID_damage}" name="roll_damage" value="@{roll_display}&{template:default} {{red=1}} {{name=@{name}}} {{character=@{character_name}}} {{^{damage}=[[@{damage}+@{damage_mod_toggle}]]}} {{^{force}=@{force}}} {{^{impale_size}=@{impale_size}}} {{notes=@{notes}}}"></button></div>
                                    <div class="sheet-td sheet-weapon-damage"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_damage}" name="attr_damage"></div>
                                    <div class="sheet-td sheet-checkbox-width sheet-text-center"><input type="checkbox" name="attr_damage_mod_toggle" title="@{$ID_damage_mod_toggle}" value="@{damage_mod}" checked><span class="sheet-checkico">+</span></div>
                                    <div class="sheet-td sheet-weapon-size"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_force}" name="attr_force"></div>
                                    <div class="sheet-td sheet-weapon-reach"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_range}" name="attr_range"></div>
                                    <div class="sheet-td sheet-checkbox-width sheet-text-center"><input type="checkbox" name="attr_details" title="@{$ID_details}" value="1" checked><span class="sheet-checkico">E</span></div>
                                </div>
                                <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1" checked>
                                <div class="sheet-toggle">
                                    <div class="sheet-flex">
                                        &emsp;
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left" data-i18n="load">Load</label><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_load}" name="attr_load" value="1">
                                        </div>
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left sheet-help" data-i18n-title="impale_size" data-i18n="impale_size-abrv">IS</label><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_impale_size}" name="attr_impale_size" value="">
                                        </div>
                                        <div class="sheet-rmargin sheet-deep-toggle">
                                            <label class="sheet-left sheet-help" data-i18n-title="fire_rate" title="Fire Rate" data-i18n="fire_rate-abrv">FR</label><input type="text" class="sheet-weapon-reach sheet-usrinput" title="@{$ID_fire_rate}" name="attr_fire_rate" value="">
                                        </div>
                                        <div>
                                            <label class="sheet-left sheet-help" data-i18n-title="ammunition" title="Ammunition" data-i18n="ammunition-abrv4">Ammo</label><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_ammo}" name="attr_ammo" value="0">/<input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_ammo|max}" name="attr_ammo_max" value="0">
                                        </div>
                                    </div>
                                    <div class="sheet-flex">
                                        &emsp;
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left sheet-help" data-i18n-title="armor_points" data-i18n="ap">AP</label><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_ap}" name="attr_ap">
                                        </div>
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left sheet-help" data-i18n-title="hit_points" data-i18n="hp">HP</label><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp}" name="attr_hp" step="1" min="0" value="0">/<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp|max}" name="attr_hp_max" step="1" min="0" value="0">
                                        </div>
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left" data-i18n="enc">ENC</label><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_enc}" name="attr_enc" value="0">
                                        </div>
                                        <div class="sheet-rmargin">
                                            <label class="sheet-left sheet-help" data-i18n-title="quantity">#</label><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_quantity}" name="attr_quantity" value="1">
                                        </div>
                                        <div class="sheet">
                                            <label class="sheet-left sheet-help" data-i18n-title="location" data-i18n="location-abrv">Loc</label>
                                            <select class="sheet-usrinput sheet-text-center sheet-auto-width" title="@{$ID_location}" name="attr_location">
                                                <option value="loadout" data-i18n="worn" selected>Worn</option>
                                                <option value="pack" data-i18n="pack">Pack</option>
                                                <option value="mount" data-i18n="transport">Transport</option>
                                                <option value="camp" data-i18n="camp">Camp</option>
                                                <option value="stash" data-i18n="stash">Stash</option>
                                                <option value="homebase" data-i18n="homebase">Homebase</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="sheet-flex">
                                        &emsp;
                                        <div>
                                            <label class="sheet-left" data-i18n="notes">Notes</label>
                                        </div>
                                        <div class="sheet-grow">
                                            <input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_notes}" name="attr_notes">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Extended Conflict -->
            <div class='sheet-conflict-mode-extended-conflict' data-i18n-list-item="extended_conflict">
                <div class="sheet-table">
                    <div class="sheet-tr">
                        <div class="sheet-th sheet-corporal"><span data-i18n="str-u">STR</span></div>
                        <div class="sheet-th sheet-corporal"><span data-i18n="con-u">CON</span></div>
                        <div class="sheet-th sheet-corporal"><span data-i18n="siz-u">SIZ</span></div>
                        <div class="sheet-th sheet-corporal"><span data-i18n="dex-u">DEX</span></div>
                        <div class="sheet-th"><span data-i18n="int-u">INT</span></div>
                        <div class="sheet-th"><span data-i18n="pow-u">POW</span></div>
                        <div class="sheet-th"><span data-i18n="cha-u">CHA</span></div>
                        <div class="sheet-th"><span data-i18n="composite">Composite</span></div>
                        <div class="sheet-th"><span data-i18n="damage">Damage</span></div>
                    </div>
                    <div class="sheet-tr">
                        <div class="sheet-td sheet-corporal"><input type="number" class="sheet-usrinput sheet-number-width" title="@{str_pool}" name="attr_str_pool" value="11">/<input type="number" class="sheet-impvalue sheet-number-width" title="@{str}" name="attr_str" value="11" readonly></div>
                        <div class="sheet-td sheet-corporal"><input type="number" class="sheet-usrinput sheet-number-width" title="@{con_pool}" name="attr_con_pool" value="11">/<input type="number" class="sheet-impvalue sheet-number-width" title="@{con}" name="attr_con" value="11" readonly></div>
                        <div class="sheet-td sheet-corporal"><input type="number" class="sheet-usrinput sheet-number-width" title="@{siz_pool}" name="attr_siz_pool" value="13">/<input type="number" class="sheet-impvalue sheet-number-width" title="@{siz}" name="attr_siz" value="13" readonly></div>
                        <div class="sheet-td sheet-corporal"><input type="number" class="sheet-usrinput sheet-number-width" title="@{dex_pool}" name="attr_dex_pool" value="11">/<input type="number" class="sheet-impvalue sheet-number-width" title="@{dex}" name="attr_dex" value="11" readonly></div>
                        <div class="sheet-td"><input type="number" class="sheet-usrinput sheet-number-width" title="@{int_pool}" name="attr_int_pool" value="13">/<input type="number" class="sheet-impvalue sheet-number-width" title="@{int}" name="attr_int" value="13" readonly></div>
                        <div class="sheet-td"><input type="number" class="sheet-usrinput sheet-number-width" title="@{pow_pool}" name="attr_pow_pool" value="11">/<input type="number" class="sheet-impvalue sheet-number-width" title="@{pow}" name="attr_pow" value="11" readonly></div>
                        <div class="sheet-td"><input type="number" class="sheet-usrinput sheet-number-width" title="@{cha_pool}" name="attr_cha_pool" value="11">/<input type="number" class="sheet-impvalue sheet-number-width" title="@{cha}" name="attr_cha" value="11" readonly></div>
                        <div class="sheet-td"><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{conflict_pool}" name="attr_conflict_pool" value="11">/<input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{conflict_pool|max}" name="attr_conflict_pool_max" value="11"></div>
                        <div class="sheet-td"><button type="roll" class="sheet-d6 sheet-button-width" title="%{extended_conflict_damage}" name="roll_extended_conlict_damage" value="@{roll_display}&{template:default} {{red=1}} {{name=^{extended_conflict_damage}}} {{character=@{character_name}}} {{^{damage}=[[1d6]]}}"></button></div>
                    </div>
                </div>
            </div>

            <!-- Social Conflict -->
            <div class="sheet-conflict-mode-social-conflict"  data-i18n-list-item="social_conflict">
                <div class="sheet-flex">
                    <!-- Social Skills -->
                    <div class="sheet-grow sheet-rmargin">
                        <!-- Social Attack Skill -->
                        <div class="sheet-flex">
                            <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="social_attack">Social Attack</div></div>
                            <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                            <div class="sheet-th"><div class="sheet-button-width"></div></div>
                        </div>
                        <div class="sheet-flex">
                            <input type="hidden" name="attr_social_attack_encumbered" value="1" readonly>
                            <input type="hidden" name="attr_social_attack_notes" value="" readonly>
                            <div class="sheet-td sheet-grow"><input type="text" class="sheet-usrinput sheet-full-width" title="@{social_attack_name}" name="attr_social_attack_name" value="Influence" readonly></div>
                            <div class="sheet-td"><input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{social_attack_total}" name="attr_social_attack_total" value="22" readonly></div>
                            <div class="sheet-td"><button type="roll" class="sheet-d100 sheet-button-width" title="%{social_attack_roll}" name="roll_social_attack_roll" value="@{roll_display}&{template:skill} {{socialoffense=1}} {{character=@{character_name}}} {{name=@{social_attack_name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{social_attack_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{social_attack_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{social_attack_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{social_attack_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{social_attack_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{social_attack_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{social_attack_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{social_attack_total}*1.5)+@{penalty})]]}} {{standard=[[@{social_attack_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{social_attack_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{social_attack_total}+@{penalty})]]}} {{hard=[[ceil((@{social_attack_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{social_attack_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{social_attack_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{social_attack_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{social_attack_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{social_attack_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{social_attack_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{social_attack_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{social_attack_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{social_attack_notes}}}"></button></div>
                        </div>
                        <!-- Social Defense Skill -->
                        <div class="sheet-flex">
                            <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="social_defense">Social Defense</div></div>
                            <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                            <div class="sheet-th"><div class="sheet-button-width"></div></div>
                        </div>
                        <div class="sheet-flex">
                            <input type="hidden" name="attr_social_defense_encumbered" value="0" readonly>
                            <input type="hidden" name="attr_social_defense_encumbered" value="0" readonly>
                            <input type="hidden" name="attr_social_defense_encumbered" value="0" readonly>
                            <input type="hidden" name="attr_social_defense_notes" value="" readonly>
                            <input type="hidden" name="attr_social_defense_name_value" value="Deceit" readonly>
                            <div class="sheet-td sheet-grow"><input type="text" class="sheet-usrinput sheet-full-width" title="@{social_defense_name}" name="attr_social_defense_name" value="Deceit" readonly></div>
                            <div class="sheet-td"><input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{social_defense_total}" name="attr_social_defense_total" value="24" readonly></div>
                            <div class="sheet-td"><button type="roll" class="sheet-d100 sheet-button-width" title="%{social_defense_roll}" name="roll_social_defense_roll" value="@{roll_display}&{template:skill} {{socialdefense=1}} {{character=@{character_name}}} {{name=@{social_defense_name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{social_defense_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{social_defense_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{social_defense_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{social_defense_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{social_defense_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{social_defense_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{social_defense_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{social_defense_total}*1.5)+@{penalty})]]}} {{standard=[[@{social_defense_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{social_defense_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{social_defense_total}+@{penalty})]]}} {{hard=[[ceil((@{social_defense_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{social_defense_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{social_defense_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{social_defense_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{social_defense_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{social_defense_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{social_defense_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{social_defense_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{social_defense_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{social_defense_notes}}}"></button></div>
                        </div>
                    </div>

                    <!-- Social Attributes -->
                    <div class="sheet-rmargin">
                        <div class="sheet-flex">
                            <div class="sheet-th sheet-grow" data-i18n="attribute">Attribute</div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                            <div class="sheet-th sheet-play"><div class="sheet-number-width" data-i18n="temp">Temp</div></div>
                            <div class="sheet-th"><div class="sheet-number-width" data-i18n="max">Max</div></div>
                        </div>
                        <!-- Confidence -->
                        <div class="sheet-hl" data-i18n-list-item="confidence">
                            <div class="sheet-flex">
                                <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="confidence">Confidence</label></div>
                                <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{confidence_base}" name="attr_confidence_base" value="1" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{confidence_other}" name="attr_confidence_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{confidence_temp}" name="attr_confidence_temp" value="0"></div>
                                <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{confidence}" name="attr_confidence" value="1" readonly></div>
                            </div>
                        </div>
                        <!-- Social Damage -->
                        <div class="sheet-hl" data-i18n-list-item="damage">
                            <div class="sheet-flex">
                                <div class="sheet-td sheet-grow sheet-text-left"><button type="roll" class="sheet-link sheet-link-label sheet-link-label-left" title="%{social_damage}" name="roll_social_damage" value="@{roll_display}&{template:default} {{red=1}} {{name=^{social_damage}}} {{character=@{character_name}}} {{^{damage}=[[@{social_damage}]]}}" data-i18n="damage">Damage</button></div>
                                <div class="sheet-td sheet-edit"><input type="text" class="sheet-number-width" title="@{social_damage_base}" name="attr_social_damage_base" value="1d4" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{social_damage_other}" name="attr_social_damage_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{social_damage_temp}" name="attr_social_damage_temp" value="0"></div>
                                <div class="sheet-td sheet-text-right"><input type="text" class="sheet-impvalue sheet-number-width" title="@{social_damage}" name="attr_social_damage" value="1d4" readonly></div>
                            </div>
                        </div>
                        <!-- Social Initiative -->
                        <div class="sheet-hl" data-i18n-list-item="initiative">
                            <div class="sheet-flex">
                                <div class="sheet-td sheet-grow sheet-text-left"><button type="roll" class="sheet-link sheet-link-label sheet-link-label-left" title="%{social_initiative}" name="roll_social_initiative" value="@{roll_display}&{template:default} {{yellow=1}} {{character=@{character_name}}} {{name=^{social_initiative}}} {{^{roll}=[[@{init_dice} + @{social_initiative} &{tracker}]]}}" data-i18n="initiative">Initiative</button></div>
                                <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{social_initiative_base}" name="attr_social_initiative" value="12" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{social_initiative_other}" name="attr_social_initiative_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{social_initiative_temp}" name="attr_social_initiative_temp" value="0"></div>
                                <div class="sheet-td sheet-text-right"><input type="number" class="sheet-impvalue sheet-number-width" title="@{social_initiative}" name="attr_social_initiative" value="12" readonly></div>
                            </div>
                        </div>
                    </div>

                    <!-- Resolution Pools -->
                    <div>
                        <div class="sheet-table">
                            <div class="sheet-tr">
                                <div class="sheet-th"><button type="roll" class="sheet-link sheet-link-label" title="%{resolution_pool}" name="roll_resolution_pool" value="@{roll_display}&{template:resolution_pool} {{name=^{resolution_pool}}} {{character=@{character_name}}} {{roll=[[1d12]]}} {{confidence=@{confidence}}} {{composure=@{composure}}} {{composure_max=@{composure|max}}} {{integrity=@{integrity}}} {{integrity_max=@{integrity|max}}} {{resolve=@{resolve}}} {{resolve_max=@{resolve|max}}}"><span data-i18n="roll">Roll</span></button></div>
                                <div class="sheet-th" data-i18n="resolution_pool">Resolution Pool</div>
                                <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                                <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                                <div class="sheet-th sheet-play"><div class="sheet-number-width" data-i18n="temp">Temp</div></div>
                                <div class="sheet-th sheet-play"><div class="sheet-number-width sheet-help" data-i18n-title="current" data-i18n="current-abrv4">Curr</div></div>
                                <div class="sheet-th sheet-play"><div class="sheet-invisible">/</div></div>
                                <div class="sheet-th"><div class="sheet-number-width" data-i18n="max">Max</div></div>
                            </div>
                            <div class="sheet-hl sheet-tr">
                                <div class="sheet-td"><label class="sheet-underlined sheet-number-width-sm">1</label>-<label class="sheet-underlined sheet-number-width-sm">4</label></div>
                                <div class="sheet-td"><label class="sheet-underlined" data-i18n="composure">Composure</label></div>
                                <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{composure_base}" name="attr_composure_base" value="4" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{composure_other}" name="attr_composure_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{composure_temp}" name="attr_composure_temp" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{composure}" name="attr_composure" value="4"></div>
                                <div class="sheet-td sheet-play">/</div>
                                <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{composure|max}" name="attr_composure_max" value="4" readonly></div>
                            </div>
                            <div class="sheet-hl sheet-tr">
                                <div class="sheet-td"><label class="sheet-underlined sheet-number-width-sm">5</label>-<label class="sheet-underlined sheet-number-width-sm">8</label></div>
                                <div class="sheet-td"><label class="sheet-underlined" data-i18n="integrity">Integrity</label></div>
                                <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{integrity_base}" name="attr_integrity_base" value="4" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{integrity_other}" name="attr_integrity_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{integrity_temp}" name="attr_integrity_temp" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{integrity}" name="attr_integrity" value="4"></div>
                                <div class="sheet-td sheet-play">/</div>
                                <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{integrity|max}" name="attr_integrity_max" value="4" readonly></div>
                            </div>
                            <div class="sheet-hl sheet-tr">
                                <div class="sheet-td"><label class="sheet-underlined sheet-number-width-sm">9</label>-<label class="sheet-underlined sheet-number-width-sm">12</label></div>
                                <div class="sheet-td"><label class="sheet-underlined" data-i18n="resolve">Resolve</label></div>
                                <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{resolve_base}" name="attr_resolve_base" value="5" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{resolve_other}" name="attr_resolve_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{resolve_temp}" name="attr_resolve_temp" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{resolve}" name="attr_resolve" value="5"></div>
                                <div class="sheet-td sheet-play">/</div>
                                <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{resolve|max}" name="attr_resolve_max" value="5" readonly></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Spirit Combat Conflict Mode -->
            <div class="sheet-conflict-mode-spirit-combat" data-i18n-list-item="spirit_combat">
                <div class="sheet-flex">
                    <!-- Spirit Combat Skill -->
                    <div class="sheet-grow sheet-rmargin">
                        <div class="sheet-flex">
                            <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="spirit_combat_skill">Spirit Combat Skill</div></div>
                            <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                            <div class="sheet-th"><div class="sheet-button-width"></div></div>
                        </div>
                        <div class="sheet-flex">
                            <input type="hidden" name="attr_spirit_combat_skill_encumbered" value="0" readonly>
                            <input type="hidden" name="attr_spirit_combat_skill_notes" value="" readonly>
                            <div class="sheet-td sheet-grow"><input type="text" class="sheet-usrinput sheet-full-width" title="@{spirit_combat_skill_name}" name="attr_spirit_combat_skill_name" value="Willpower" readonly></div>
                            <div class="sheet-td"><input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{spirit_combat_skill_total}" name="attr_spirit_combat_skill_total" value="22" readonly></div>
                            <div class="sheet-td"><button type="roll" class="sheet-d100 sheet-button-width" title="%{spirit_combat_skill_roll}" name="roll_spirit_combat_skill_roll" value="@{roll_display}&{template:skill} {{spiritcombat=1}} {{character=@{character_name}}} {{name=@{spirit_combat_skill_name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{spirit_combat_skill_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{spirit_combat_skill_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{spirit_combat_skill_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{spirit_combat_skill_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{spirit_combat_skill_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{spirit_combat_skill_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{spirit_combat_skill_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{spirit_combat_skill_total}*1.5)+@{penalty})]]}} {{standard=[[@{spirit_combat_skill_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{spirit_combat_skill_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{spirit_combat_skill_total}+@{penalty})]]}} {{hard=[[ceil((@{spirit_combat_skill_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{spirit_combat_skill_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{spirit_combat_skill_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{spirit_combat_skill_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{spirit_combat_skill_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{spirit_combat_skill_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{spirit_combat_skill_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{spirit_combat_skill_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{spirit_combat_skill_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{spirit_combat_skill_notes}}}"></button></div>
                        </div>
                        <div class="sheet-edit sheet-flex">
                            <div><label class="sheet-left sheet-lite" data-i18n="id">ID</label></div>
                            <div class="sheet-grow"><input type="text" class="sheet-usrinput sheet-full-width" title="@{spirit_combat_skill_id}" name="attr_spirit_combat_skill_id" value="willpower"></div>
                        </div>
                    </div>
                    <!-- Spirit Action Points -->
                    <div class="sheet-rmargin">
                        <div class="sheet-flex">
                            <div class="sheet-th sheet-grow" data-i18n="attribute">Attribute</div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                            <div class="sheet-th sheet-play"><div class="sheet-number-width" data-i18n="temp">Temp</div></div>
                            <div class="sheet-th sheet-play"><div class="sheet-number-width sheet-help" data-i18n-title="current" data-i18n="current-abrv4">Curr</div></div>
                            <div class="sheet-th sheet-play"><div class="sheet-invisible">/</div></div>
                            <div class="sheet-th"><div class="sheet-number-width" data-i18n="max">Max</div></div>
                        </div>
                        <div class="sheet-flex" data-i18n-list-item="spirit_ap">
                            <div class="sheet-td sheet-grow sheet-text-left"><label class="sheet-left" data-i18n="action_points">Action Points</label></div>
                            <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{spirit_ap_base}" name="attr_spirit_ap_base" value="2" readonly></div>
                            <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{spirit_ap_other}" name="attr_spirit_ap_other" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{spirit_ap_temp}" name="attr_spirit_ap_temp" value="0"></div>
                            <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{spirit_ap}" name="attr_spirit_ap" value="2"></div>
                            <div class="sheet-td sheet-play">/</div>
                            <div class="sheet-td"><input type="number" class="sheet-impvalue sheet-number-width" title="@{spirit_ap|max}" name="attr_spirit_ap_max" value="2" readonly></div>
                        </div>
                    </div>
                    <!-- Spirit Damage -->
                    <div class="sheet-rmargin">
                        <div class="sheet-flex">
                            <div class="sheet-th sheet-grow" data-i18n="attribute">Attribute</div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                            <div class="sheet-th sheet-play"><div class="sheet-number-width" data-i18n="temp">Temp</div></div>
                            <div class="sheet-th"><div class="sheet-number-width" data-i18n="max">Max</div></div>
                        </div>
                        <div data-i18n-list-item="spirit_damage">
                            <div class="sheet-flex">
                                <div class="sheet-td sheet-grow sheet-text-left"><button type="roll" class="sheet-link sheet-link-label sheet-link-label-left" title="%{spirit_damage}" name="roll_spirit_damage" value="@{roll_display}&{template:default} {{red=1}} {{name=^{spirit_damage}}} {{character=@{character_name}}} {{^{damage}=[[@{spirit_damage}]]}}" data-i18n="damage">Damage</button></div>
                                <div class="sheet-td sheet-edit"><input type="text" class="sheet-number-width" title="@{spirit_damage_base}" name="attr_spirit_damage_base" value="1d2" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{spirit_damage_other}" name="attr_spirit_damage_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{spirit_damage_temp}" name="attr_spirit_damage_temp" value="0"></div>
                                <div class="sheet-td sheet-text-right"><input type="text" class="sheet-impvalue sheet-number-width" title="@{spirit_damage}" name="attr_spirit_damage" value="1d2" readonly></div>
                            </div>
                            <div class="sheet-edit sheet-flex">
                                <div><label class="sheet-left sheet-lite" data-i18n="calculate_with">Calculate with</label></div>
                                <div class="sheet-grow">
                                    <select class="sheet-usrinput sheet-full-width" title="@{spirit_damage_calc}" name="attr_spirit_damage_calc">
                                        <option data-i18n="half_skill" value=".5" selected>Half Skill</option>
                                        <option data-i18n="full_skill" value="1">full_skill</option>
                                    </select>
                                </div>
                            </div>
                            <!--<input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_spirit_damage_details" value="1">
                            <div class="sheet-edit sheet-toggle">
                                &emsp;<label class="sheet-left sheet-lite" data-i18n="calculate_with">Calculate with</label>
                                <select class="sheet-usrinput sheet-attr-calc-width" title="@{spirit_damage_calc}" name="attr_spirit_damage_calc">
                                    <option data-i18n="willpower" value="willpower" selected>Willpower</option>
                                    <option data-i18n="binding" value="binding">Binding</option>
                                </select>
                                <input type="hidden" class="sheet-binding-toggle" name="attr_spirit_damage_calc" value="willpower">
                                <div class="sheet-toggle">
                                    &emsp;<label class="sheet-left sheet-lite" data-i18n="binding_id">Binding ID</label><br>
                                    &emsp;<input type="text" class="sheet-usrinput" title="@{binding_id}" name="attr_binding_id">
                                </div>
                            </div>-->
                        </div>
                    </div>
                    <!-- Spirit Initiative -->
                    <div>
                        <div class="sheet-flex">
                            <div class="sheet-th sheet-grow" data-i18n="attribute">Attribute</div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                            <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                            <div class="sheet-th sheet-play"><div class="sheet-number-width" data-i18n="temp">Temp</div></div>
                            <div class="sheet-th"><div class="sheet-number-width" data-i18n="max">Max</div></div>
                        </div>
                        <div data-i18n-list-item="spirit_init">
                            <div class="sheet-flex">
                                <div class="sheet-td sheet-grow sheet-text-left"><button type="roll" class="sheet-link sheet-link-label sheet-link-label-left" title="%{spirit_initiative}" name="roll_spirit_initiative" value="@{roll_display}&{template:default} {{yellow=1}} {{character=@{character_name}}} {{name=^{spirit_initiative}}} {{^{roll}=[[@{init_dice} + @{spirit_ib} &{tracker}]]}}" data-i18n="initiative">Initiative</button></div>
                                <div class="sheet-td sheet-edit"><input type="number" class=" sheet-number-width" title="@{spirit_ib_base}" name="attr_spirit_ib" value="12" readonly></div>
                                <div class="sheet-td sheet-edit"><input type="number" class="sheet-usrinput sheet-number-width" title="@{spirit_ib_other}" name="attr_spirit_ib_other" value="0"></div>
                                <div class="sheet-td sheet-play"><input type="number" class="sheet-usrinput sheet-number-width" title="@{spirit_ib_temp}" name="attr_spirit_ib_temp" value="0"></div>
                                <div class="sheet-td sheet-text-right"><input type="number" class="sheet-impvalue sheet-number-width" title="@{spirit_ib}" name="attr_spirit_ib" value="12" readonly></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Skills and Passions -->
    <div class="sheet-section">
        <h2><span data-i18n="skills">Skills</span>/<span data-i18n="passions">Passions</span></h2>

        <div class="sheet-hidden">
            <input type="radio" name="attr_skill_augment" value="@{skill_augment_value}"><span></span>
            <input type="text" name="attr_skill_augment_value" value="" readonly>
            <input type="radio" name="attr_social_attack_id" value="@{social_attack_id_value}"><span></span>
            <input type="text" name="attr_social_attack_id_value" value="influence" readonly>
            <input type="radio" name="attr_social_defense_id" value="@{social_defense_id_value}"><span></span>
            <input type="text" name="attr_social_defense_id_value" value="deceit" readonly>
        </div>

        <input type="hidden" class="sheet-augment-toggle" name="attr_augmentation">
        <div class="sheet-flex">
            <input type="hidden" class="sheet-conflict-mode" name="attr_conflict_mode" value="none">
            <!-- Skills Left Column -->
            <div class="sheet-rmargin sheet-half-col">
                <!-- Resistance Skills -->
                <div class="sheet-bmargin">
                    <div class="sheet-flex sheet-detailed">
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_attack">w</div></div>
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_defense">q</div></div>
                        <div class="sheet-th sheet-pictos sheet-augment-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_augmentation">&</div></div>
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="resistance_skill">Resistance Skill</div></div>
                        <div class="sheet-th sheet-edit sheet-major"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-play"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-play sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="affected_by_encumbrance">a</div></div>
                        <div class="sheet-th sheet-pictos sheet-major"><div class="sheet-help sheet-checkbox-width" data-i18n-title="fumbled">!</div></div>
                        <div class="sheet-th sheet-pictos sheet-major"><div class="sheet-help sheet-checkbox-width" data-i18n-title="trained">3</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                        <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                        <div class="sheet-th sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="show_details">E</div></div>
                    </div>
                    <div class="sheet-flex sheet-compact">
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="resistance_skills">Resistance Skills</div></div>
                    </div>
                    <div data-i18n-list="resistance-skills-order sheet-compactable">
                        <!-- Brawn -->
                        <div class="sheet-hl sheet-compactable sheet-corporal" data-i18n-list-item="brawn">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="brawn"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="brawn"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{brawn_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="brawn">Brawn</label>
                                    <button type="roll" class="sheet-id" title="%{brawn_id}" name="roll_brawn_id" value="/w gm &{template:default} {{name=@{brawn_name}}} {{^{id}=brawn}}">i</button>
                                    <input type="hidden" name="attr_brawn_name" value="^{brawn}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{brawn_roll}" name="roll_brawn_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{brawn}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{brawn_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{brawn_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{brawn_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{brawn_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{brawn_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{brawn_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{brawn_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{brawn_total}*1.5)+@{penalty})]]}} {{standard=[[@{brawn_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{brawn_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{brawn_total}+@{penalty})]]}} {{hard=[[ceil((@{brawn_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{brawn_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{brawn_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{brawn_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{brawn_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{brawn_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{brawn_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{brawn_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{brawn_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{brawn_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit sheet-major">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{brawn_improve}" name="roll_brawn_improve" value="@{roll_display}&{template:improvement} {{name=^{brawn}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{brawn_fumbled}]]}} {{skill=[[@{brawn_total}]]}} {{fumbled=[[@{brawn_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{brawn_encumbered}" name="attr_brawn_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{brawn_fumbled}" name="attr_brawn_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{brawn_trained}" name="attr_brawn_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="str-u">STR</div>
                                    <input type="hidden" name="attr_brawn_char1" value="@{str}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="siz-u">SIZ</div>
                                    <input type="hidden" name="attr_brawn_char2" value="@{siz}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{brawn_other}" name="attr_brawn_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{brawn_total}" name="attr_brawn_total" value="24">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{brawn_details}" name="attr_brawn_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_brawn_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{brawn_notes}" name="attr_brawn_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_brawn_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-rmargin sheet-corporal">
                                <button type="roll" class="sheet-nodie" title="%{brawn_roll}" name="roll_brawn_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{brawn}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{brawn_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{brawn_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{brawn_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{brawn_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{brawn_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{brawn_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{brawn_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{brawn_total}*1.5)+@{penalty})]]}} {{standard=[[@{brawn_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{brawn_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{brawn_total}+@{penalty})]]}} {{hard=[[ceil((@{brawn_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{brawn_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{brawn_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{brawn_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{brawn_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{brawn_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{brawn_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{brawn_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{brawn_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{brawn_notes}}}"><span class="sheet-bold" data-i18n="brawn"></span> <span name="attr_brawn_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Endurance -->
                        <div class="sheet-hl sheet-compactable sheet-corporal" data-i18n-list-item="endurance">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="endurance"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="endurance"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{endurance_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="endurance">Endurance</label>
                                    <button type="roll" class="sheet-id" title="%{endurance_id}" name="roll_endurance_id" value="/w gm &{template:default} {{name=@{endurance_name}}} {{^{id}=endurance}}">i</button>
                                    <input type="hidden" name="attr_endurance_name" value="^{endurance}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{endurance_roll}" name="roll_endurance_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{endurance}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{endurance_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{endurance_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{endurance_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{endurance_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{endurance_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{endurance_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{endurance_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{endurance_total}*1.5)+@{penalty})]]}} {{standard=[[@{endurance_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{endurance_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{endurance_total}+@{penalty})]]}} {{hard=[[ceil((@{endurance_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{endurance_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{endurance_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{endurance_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{endurance_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{endurance_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{endurance_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{endurance_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{endurance_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{endurance_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit sheet-major">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{endurance_improve}" name="roll_endurance_improve" value="@{roll_display}&{template:improvement} {{name=^{endurance}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{endurance_fumbled}]]}} {{skill=[[@{endurance_total}]]}} {{fumbled=[[@{endurance_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{endurance_encumbered}" name="attr_endurance_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{endurance_fumbled}" name="attr_endurance_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{endurance_trained}" name="attr_endurance_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="con-u">CON</div>
                                    <input type="hidden" name="attr_endurance_char1" value="@{con}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="con-u">CON</div>
                                    <input type="hidden" name="attr_endurance_char2" value="@{con}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{endurance_other}" name="attr_endurance_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{endurance_total}" name="attr_endurance_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{endurance_details}" name="attr_endurance_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_endurance_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{endurance_notes}" name="attr_endurance_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_endurance_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-rmargin sheet-corporal">
                                <button type="roll" class="sheet-nodie" title="%{endurance_roll}" name="roll_endurance_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{endurance}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{endurance_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{endurance_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{endurance_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{endurance_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{endurance_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{endurance_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{endurance_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{endurance_total}*1.5)+@{penalty})]]}} {{standard=[[@{endurance_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{endurance_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{endurance_total}+@{penalty})]]}} {{hard=[[ceil((@{endurance_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{endurance_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{endurance_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{endurance_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{endurance_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{endurance_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{endurance_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{endurance_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{endurance_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{endurance_notes}}}"><span class="sheet-bold" data-i18n="endurance"></span> <span name="attr_endurance_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Evade -->
                        <div class="sheet-hl sheet-compactable sheet-corporal" data-i18n-list-item="evade">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="evade"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="evade"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{evade_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="evade">Evade</label>
                                    <button type="roll" class="sheet-id" title="%{evade_id}" name="roll_evade_id" value="/w gm &{template:default} {{name=@{evade_name}}} {{^{id}=evade}}">i</button>
                                    <input type="hidden" name="attr_evade_name" value="^{evade}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{evade_roll}" name="roll_evade_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{evade}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{evade_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{evade_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{evade_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{evade_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{evade_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{evade_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{evade_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{evade_total}*1.5)+@{penalty})]]}} {{standard=[[@{evade_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{evade_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{evade_total}+@{penalty})]]}} {{hard=[[ceil((@{evade_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{evade_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{evade_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{evade_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{evade_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{evade_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{evade_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{evade_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{evade_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{evade_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit sheet-major">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{evade_improve}" name="roll_evade_improve" value="@{roll_display}&{template:improvement} {{name=^{evade}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{evade_fumbled}]]}} {{skill=[[@{evade_total}]]}} {{fumbled=[[@{evade_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{evade_encumbered}" name="attr_evade_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{evade_fumbled}" name="attr_evade_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{evade_trained}" name="attr_evade_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_evade_char1" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_evade_char2" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{evade_other}" name="attr_evade_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{evade_total}" name="attr_evade_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{evade_details}" name="attr_evade_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_evade_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{evade_notes}" name="attr_evade_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_evade_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-rmargin sheet-corporal">
                                <button type="roll" class="sheet-nodie" title="%{evade_roll}" name="roll_evade_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{evade}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{evade_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{evade_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{evade_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{evade_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{evade_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{evade_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{evade_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{evade_total}*1.5)+@{penalty})]]}} {{standard=[[@{evade_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{evade_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{evade_total}+@{penalty})]]}} {{hard=[[ceil((@{evade_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{evade_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{evade_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{evade_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{evade_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{evade_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{evade_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{evade_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{evade_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{evade_notes}}}"><span class="sheet-bold" data-i18n="evade"></span> <span name="attr_evade_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Willpower -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="willpower">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="willpower"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="willpower"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{willpower_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="willpower">Willpower</label>
                                    <button type="roll" class="sheet-id" title="%{willpower_id}" name="roll_willpower_id" value="/w gm &{template:default} {{name=@{willpower_name}}} {{^{id}=willpower}}">i</button>
                                    <input type="hidden" name="attr_willpower_name" value="^{willpower}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{willpower_roll}" name="roll_willpower_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{willpower}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{willpower_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{willpower_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{willpower_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{willpower_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{willpower_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{willpower_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{willpower_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{willpower_total}*1.5)+@{penalty})]]}} {{standard=[[@{willpower_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{willpower_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{willpower_total}+@{penalty})]]}} {{hard=[[ceil((@{willpower_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{willpower_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{willpower_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{willpower_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{willpower_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{willpower_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{willpower_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{willpower_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{willpower_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{willpower_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit sheet-major">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{willpower_improve}" name="roll_willpower_improve" value="@{roll_display}&{template:improvement} {{name=^{willpower}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{willpower_fumbled}]]}} {{skill=[[@{willpower_total}]]}} {{fumbled=[[@{willpower_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{willpower_encumbered}" name="attr_willpower_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{willpower_fumbled}" name="attr_willpower_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td sheet-major">
                                    <input type="checkbox" title="@{willpower_trained}" name="attr_willpower_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_willpower_char1" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_willpower_char2" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{willpower_other}" name="attr_willpower_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{willpower_total}" name="attr_willpower_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{willpower_details}" name="attr_willpower_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_willpower_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{willpower_notes}" name="attr_willpower_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_willpower_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{willpower_roll}" name="roll_willpower_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{willpower}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{willpower_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{willpower_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{willpower_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{willpower_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{willpower_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{willpower_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{willpower_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{willpower_total}*1.5)+@{penalty})]]}} {{standard=[[@{willpower_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{willpower_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{willpower_total}+@{penalty})]]}} {{hard=[[ceil((@{willpower_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{willpower_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{willpower_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{willpower_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{willpower_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{willpower_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{willpower_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{willpower_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{willpower_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{willpower_notes}}}"><span class="sheet-bold" data-i18n="willpower"></span> <span name="attr_willpower_total"></span>%</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Standard Skills -->
                <div class="sheet-bmargin sheet-major">
                    <div class="sheet-flex sheet-detailed">
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_attack">w</div></div>
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_defense">q</div></div>
                        <div class="sheet-th sheet-pictos sheet-augment-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_augmentation">&</div></div>
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="standard_skill">Standard Skill</div></div>
                        <div class="sheet-th"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-play sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="affected_by_encumbrance">a</div></div>
                        <div class="sheet-th sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="fumbled">!</div></div>
                        <div class="sheet-th sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="trained">3</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                        <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                        <div class="sheet-th sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="show_details">E</div></div>
                    </div>
                    <div class="sheet-flex sheet-compact">
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="standard_skills">Standard Skills</div></div>
                    </div>

                    <div class="sheet-compactable" data-i18n-list="standard_skills-order">
                        <!-- Athletics -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="athletics">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="athletics"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="athletics"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{athletics_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="athletics">Athletics</label>
                                    <button type="roll" class="sheet-id" title="%{athletics_id}" name="roll_athletics_id" value="/w gm &{template:default} {{name=@{athletics_name}}} {{^{id}=athletics}}">i</button>
                                    <input type="hidden" name="attr_athletics_name" value="^{athletics}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{athletics_roll}" name="roll_athletics_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{athletics}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{athletics_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{athletics_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{athletics_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{athletics_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{athletics_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{athletics_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{athletics_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{athletics_total}*1.5)+@{penalty})]]}} {{standard=[[@{athletics_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{athletics_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{athletics_total}+@{penalty})]]}} {{hard=[[ceil((@{athletics_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{athletics_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{athletics_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{athletics_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{athletics_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{athletics_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{athletics_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{athletics_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{athletics_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{athletics_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{athletics_improve}" name="roll_athletics_improve" value="@{roll_display}&{template:improvement} {{name=^{athletics}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{athletics_fumbled}]]}} {{skill=[[@{athletics_total}]]}} {{fumbled=[[@{athletics_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{athletics_encumbered}" name="attr_athletics_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{athletics_fumbled}" name="attr_athletics_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{athletics_trained}" name="attr_athletics_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="str-u">STR</div>
                                    <input type="hidden" name="attr_athletics_char1" value="@{str}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_athletics_char2" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{athletics_other}" name="attr_athletics_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{athletics_total}" name="attr_athletics_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{athletics_details}" name="attr_athletics_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_athletics_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{athletics_notes}" name="attr_athletics_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_athletics_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{athletics_roll}" name="roll_athletics_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{athletics}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{athletics_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{athletics_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{athletics_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{athletics_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{athletics_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{athletics_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{athletics_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{athletics_total}*1.5)+@{penalty})]]}} {{standard=[[@{athletics_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{athletics_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{athletics_total}+@{penalty})]]}} {{hard=[[ceil((@{athletics_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{athletics_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{athletics_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{athletics_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{athletics_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{athletics_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{athletics_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{athletics_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{athletics_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{athletics_notes}}}"><span class="sheet-bold" data-i18n="athletics"></span> <span name="attr_athletics_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Boating -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="boating">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_boating_standard" value="1" checked>
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="boating"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="boating"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{boating_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="boating">Boating</label>
                                    <button type="roll" class="sheet-id" title="%{boating_id}" name="roll_boating_id" value="/w gm &{template:default} {{name=@{boating_name}}} {{^{id}=boating}}">i</button>
                                    <input type="hidden" name="attr_boating_name" value="^{boating}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{boating_roll}" name="roll_boating_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{boating}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{boating_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{boating_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{boating_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{boating_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{boating_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{boating_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{boating_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{boating_total}*1.5)+@{penalty})]]}} {{standard=[[@{boating_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{boating_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{boating_total}+@{penalty})]]}} {{hard=[[ceil((@{boating_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{boating_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{boating_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{boating_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{boating_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{boating_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{boating_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{boating_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{boating_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{boating_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{boating_improve}" name="roll_boating_improve" value="@{roll_display}&{template:improvement} {{name=^{boating}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{boating_fumbled}]]}} {{skill=[[@{boating_total}]]}} {{fumbled=[[@{boating_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{boating_encumbered}" name="attr_boating_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{boating_fumbled}" name="attr_boating_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{boating_trained}" name="attr_boating_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="str-u">STR</div>
                                    <input type="hidden" name="attr_boating_char1" value="@{str}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="con-u">CON</div>
                                    <input type="hidden" name="attr_boating_char2" value="@{con}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{boating_other}" name="attr_boating_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{boating_total}" name="attr_boating_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{boating_details}" name="attr_boating_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_boating_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{boating_notes}" name="attr_boating_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_boating_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{boating_roll}" name="roll_boating_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{boating}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{boating_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{boating_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{boating_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{boating_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{boating_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{boating_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{boating_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{boating_total}*1.5)+@{penalty})]]}} {{standard=[[@{boating_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{boating_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{boating_total}+@{penalty})]]}} {{hard=[[ceil((@{boating_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{boating_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{boating_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{boating_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{boating_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{boating_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{boating_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{boating_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{boating_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{boating_notes}}}"><span class="sheet-bold" data-i18n="boating"></span> <span name="attr_boating_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Conceal -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="conceal">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="conceal"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="conceal"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{conceal_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="conceal">Conceal</label>
                                    <button type="roll" class="sheet-id" title="%{conceal_id}" name="roll_conceal_id" value="/w gm &{template:default} {{name=@{conceal_name}}} {{^{id}=conceal}}">i</button>
                                    <input type="hidden" name="attr_conceal_name" value="^{conceal}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{conceal_roll}" name="roll_conceal_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{conceal}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{conceal_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{conceal_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{conceal_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{conceal_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{conceal_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{conceal_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{conceal_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{conceal_total}*1.5)+@{penalty})]]}} {{standard=[[@{conceal_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{conceal_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{conceal_total}+@{penalty})]]}} {{hard=[[ceil((@{conceal_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{conceal_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{conceal_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{conceal_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{conceal_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{conceal_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{conceal_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{conceal_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{conceal_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{conceal_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{conceal_improve}" name="roll_conceal_improve" value="@{roll_display}&{template:improvement} {{name=^{conceal}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{conceal_fumbled}]]}} {{skill=[[@{conceal_total}]]}} {{fumbled=[[@{conceal_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{conceal_encumbered}" name="attr_conceal_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{conceal_fumbled}" name="attr_conceal_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{conceal_trained}" name="attr_conceal_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_conceal_char1" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_conceal_char2" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{conceal_other}" name="attr_conceal_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{conceal_total}" name="attr_conceal_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{conceal_details}" name="attr_conceal_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_conceal_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{conceal_notes}" name="attr_conceal_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_conceal_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{conceal_roll}" name="roll_conceal_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{conceal}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{conceal_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{conceal_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{conceal_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{conceal_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{conceal_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{conceal_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{conceal_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{conceal_total}*1.5)+@{penalty})]]}} {{standard=[[@{conceal_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{conceal_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{conceal_total}+@{penalty})]]}} {{hard=[[ceil((@{conceal_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{conceal_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{conceal_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{conceal_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{conceal_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{conceal_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{conceal_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{conceal_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{conceal_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{conceal_notes}}}"><span class="sheet-bold" data-i18n="conceal"></span> <span name="attr_conceal_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Customs -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="customs">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="customs"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="customs"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{customs_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="customs">Customs</label>
                                    <button type="roll" class="sheet-id" title="%{customs_id}" name="roll_customs_id" value="/w gm &{template:default} {{name=@{customs_name}}} {{^{id}=customs}}">i</button>
                                    <input type="hidden" name="attr_customs_name" value="^{customs}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{customs_roll}" name="roll_customs_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{customs}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{customs_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{customs_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{customs_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{customs_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{customs_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{customs_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{customs_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{customs_total}*1.5)+@{penalty})]]}} {{standard=[[@{customs_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{customs_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{customs_total}+@{penalty})]]}} {{hard=[[ceil((@{customs_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{customs_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{customs_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{customs_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{customs_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{customs_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{customs_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{customs_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{customs_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{customs_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{customs_improve}" name="roll_customs_improve" value="@{roll_display}&{template:improvement} {{name=^{customs}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{customs_fumbled}]]}} {{skill=[[@{customs_total}]]}} {{fumbled=[[@{customs_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{customs_encumbered}" name="attr_customs_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{customs_fumbled}" name="attr_customs_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{customs_trained}" name="attr_customs_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_customs_char1" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_customs_char2" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{customs_other}" name="attr_customs_other" value="40">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{customs_total}" name="attr_customs_total" value="66">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{customs_details}" name="attr_customs_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_customs_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{customs_notes}" name="attr_customs_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_customs_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{customs_roll}" name="roll_customs_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{customs}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{customs_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{customs_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{customs_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{customs_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{customs_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{customs_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{customs_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{customs_total}*1.5)+@{penalty})]]}} {{standard=[[@{customs_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{customs_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{customs_total}+@{penalty})]]}} {{hard=[[ceil((@{customs_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{customs_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{customs_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{customs_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{customs_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{customs_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{customs_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{customs_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{customs_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{customs_notes}}}"><span class="sheet-bold" data-i18n="customs"></span> <span name="attr_customs_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Dance -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="dance">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="dance"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="dance"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{dance_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="dance">Dance</label>
                                    <button type="roll" class="sheet-id" title="%{dance_id}" name="roll_dance_id" value="/w gm &{template:default} {{name=@{dance_name}}} {{^{id}=dance}}">i</button>
                                    <input type="hidden" name="attr_dance_name" value="^{dance}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{dance_roll}" name="roll_dance_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{dance}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{dance_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{dance_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{dance_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{dance_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{dance_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{dance_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{dance_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{dance_total}*1.5)+@{penalty})]]}} {{standard=[[@{dance_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{dance_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{dance_total}+@{penalty})]]}} {{hard=[[ceil((@{dance_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{dance_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{dance_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{dance_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{dance_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{dance_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{dance_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{dance_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{dance_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{dance_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{dance_improve}" name="roll_dance_improve" value="@{roll_display}&{template:improvement} {{name=^{dance}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{dance_fumbled}]]}} {{skill=[[@{dance_total}]]}} {{fumbled=[[@{dance_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{dance_encumbered}" name="attr_dance_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{dance_fumbled}" name="attr_dance_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{dance_trained}" name="attr_dance_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_dance_char1" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="cha-u">CHA</div>
                                    <input type="hidden" name="attr_dance_char2" value="@{cha}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{dance_other}" name="attr_dance_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{dance_total}" name="attr_dance_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{dance_details}" name="attr_dance_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_dance_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{dance_notes}" name="attr_dance_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_dance_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{dance_roll}" name="roll_dance_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{dance}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{dance_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{dance_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{dance_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{dance_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{dance_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{dance_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{dance_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{dance_total}*1.5)+@{penalty})]]}} {{standard=[[@{dance_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{dance_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{dance_total}+@{penalty})]]}} {{hard=[[ceil((@{dance_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{dance_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{dance_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{dance_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{dance_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{dance_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{dance_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{dance_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{dance_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{dance_notes}}}"><span class="sheet-bold" data-i18n="dance"></span> <span name="attr_dance_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Deceit -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="deceit">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="deceit"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="deceit" checked><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{deceit_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="deceit">Deceit</label>
                                    <button type="roll" class="sheet-id" title="%{deceit_id}" name="roll_deceit_id" value="/w gm &{template:default} {{name=@{deceit_name}}} {{^{id}=deceit}}">i</button>
                                    <input type="hidden" name="attr_deceit_name" value="^{deceit}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{deceit_roll}" name="roll_deceit_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{deceit}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{deceit_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{deceit_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{deceit_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{deceit_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{deceit_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{deceit_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{deceit_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{deceit_total}*1.5)+@{penalty})]]}} {{standard=[[@{deceit_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{deceit_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{deceit_total}+@{penalty})]]}} {{hard=[[ceil((@{deceit_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{deceit_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{deceit_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{deceit_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{deceit_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{deceit_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{deceit_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{deceit_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{deceit_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{deceit_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{deceit_improve}" name="roll_deceit_improve" value="@{roll_display}&{template:improvement} {{name=^{deceit}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{deceit_fumbled}]]}} {{skill=[[@{deceit_total}]]}} {{fumbled=[[@{deceit_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{deceit_encumbered}" name="attr_deceit_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{deceit_fumbled}" name="attr_deceit_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{deceit_trained}" name="attr_deceit_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_deceit_char1" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="cha-u">CHA</div>
                                    <input type="hidden" name="attr_deceit_char2" value="@{cha}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{deceit_other}" name="attr_deceit_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{deceit_total}" name="attr_deceit_total" value="24">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{deceit_details}" name="attr_deceit_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_deceit_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{deceit_notes}" name="attr_deceit_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_deceit_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{deceit_roll}" name="roll_deceit_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{deceit}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{deceit_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{deceit_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{deceit_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{deceit_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{deceit_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{deceit_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{deceit_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{deceit_total}*1.5)+@{penalty})]]}} {{standard=[[@{deceit_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{deceit_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{deceit_total}+@{penalty})]]}} {{hard=[[ceil((@{deceit_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{deceit_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{deceit_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{deceit_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{deceit_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{deceit_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{deceit_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{deceit_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{deceit_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{deceit_notes}}}"><span class="sheet-bold" data-i18n="deceit"></span> <span name="attr_deceit_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Drive -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="drive">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_drive_standard" value="1" checked>
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="drive"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="drive"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{drive_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="drive">Drive</label>
                                    <button type="roll" class="sheet-id" title="%{drive_id}" name="roll_drive_id" value="/w gm &{template:default} {{name=@{drive_name}}} {{^{id}=drive}}">i</button>
                                    <input type="hidden" name="attr_drive_name" value="^{drive}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{drive_roll}" name="roll_drive_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{drive}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{drive_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{drive_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{drive_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{drive_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{drive_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{drive_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{drive_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{drive_total}*1.5)+@{penalty})]]}} {{standard=[[@{drive_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{drive_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{drive_total}+@{penalty})]]}} {{hard=[[ceil((@{drive_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{drive_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{drive_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{drive_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{drive_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{drive_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{drive_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{drive_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{drive_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{drive_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{drive_improve}" name="roll_drive_improve" value="@{roll_display}&{template:improvement} {{name=^{drive}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{drive_fumbled}]]}} {{skill=[[@{drive_total}]]}} {{fumbled=[[@{drive_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{drive_encumbered}" name="attr_drive_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{drive_fumbled}" name="attr_drive_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{drive_trained}" name="attr_drive_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_drive_char1" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_drive_char2" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{drive_other}" name="attr_drive_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{drive_total}" name="attr_drive_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{drive_details}" name="attr_drive_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_drive_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{drive_notes}" name="attr_drive_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_drive_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{drive_roll}" name="roll_drive_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{drive}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{drive_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{drive_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{drive_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{drive_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{drive_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{drive_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{drive_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{drive_total}*1.5)+@{penalty})]]}} {{standard=[[@{drive_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{drive_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{drive_total}+@{penalty})]]}} {{hard=[[ceil((@{drive_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{drive_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{drive_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{drive_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{drive_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{drive_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{drive_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{drive_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{drive_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{drive_notes}}}"><span class="sheet-bold" data-i18n="drive"></span> <span name="attr_drive_total"></span>%</button>
                            </div>
                        </div>

                        <!-- First Aid -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="first_aid">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="first_aid"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="first_aid"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{first_aid_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="first_aid">First Aid</label>
                                    <button type="roll" class="sheet-id" title="%{first_aid_id}" name="roll_first_aid_id" value="/w gm &{template:default} {{name=@{first_aid_name}}} {{^{id}=first_aid}}">i</button>
                                    <input type="hidden" name="attr_first_aid_name" value="^{first_aid}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{first_aid_roll}" name="roll_first_aid_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{first_aid}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{first_aid_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{first_aid_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{first_aid_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{first_aid_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{first_aid_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{first_aid_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{first_aid_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{first_aid_total}*1.5)+@{penalty})]]}} {{standard=[[@{first_aid_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{first_aid_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{first_aid_total}+@{penalty})]]}} {{hard=[[ceil((@{first_aid_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{first_aid_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{first_aid_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{first_aid_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{first_aid_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{first_aid_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{first_aid_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{first_aid_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{first_aid_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{first_aid_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{first_aid_improve}" name="roll_first_aid_improve" value="@{roll_display}&{template:improvement} {{name=^{first_aid}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{first_aid_fumbled}]]}} {{skill=[[@{first_aid_total}]]}} {{fumbled=[[@{first_aid_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{first_aid_encumbered}" name="attr_first_aid_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{first_aid_fumbled}" name="attr_first_aid_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{first_aid_trained}" name="attr_first_aid_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_first_aid_char1" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_first_aid_char2" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{first_aid_other}" name="attr_first_aid_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{first_aid_total}" name="attr_first_aid_total" value="24">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{first_aid_details}" name="attr_first_aid_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_first_aid_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{first_aid_notes}" name="attr_first_aid_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_first_aid_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{first_aid_roll}" name="roll_first_aid_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{first_aid}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{first_aid_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{first_aid_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{first_aid_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{first_aid_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{first_aid_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{first_aid_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{first_aid_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{first_aid_total}*1.5)+@{penalty})]]}} {{standard=[[@{first_aid_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{first_aid_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{first_aid_total}+@{penalty})]]}} {{hard=[[ceil((@{first_aid_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{first_aid_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{first_aid_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{first_aid_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{first_aid_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{first_aid_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{first_aid_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{first_aid_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{first_aid_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{first_aid_notes}}}"><span class="sheet-bold" data-i18n="first_aid"></span> <span name="attr_frist_aid_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Home Parallel -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="home_parallel">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_home_parallel_standard" value="1">
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="home_parallel"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="home_parallel"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{home_parallel_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="home_parallel">Home Parallel</label>
                                    <button type="roll" class="sheet-id" title="%{home_parallel_id}" name="roll_home_parallel_id" value="/w gm &{template:default} {{name=@{home_parallel_name}}} {{^{id}=home_parallel}}">i</button>
                                    <input type="hidden" name="attr_home_parallel_name" value="^{home_parallel}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{home_parallel_roll}" name="roll_home_parallel_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{home_parallel}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{home_parallel_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{home_parallel_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{home_parallel_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{home_parallel_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{home_parallel_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{home_parallel_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{home_parallel_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{home_parallel_total}*1.5)+@{penalty})]]}} {{standard=[[@{home_parallel_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{home_parallel_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{home_parallel_total}+@{penalty})]]}} {{hard=[[ceil((@{home_parallel_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{home_parallel_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{home_parallel_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{home_parallel_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{home_parallel_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{home_parallel_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{home_parallel_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{home_parallel_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{home_parallel_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{home_parallel_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{home_parallel_improve}" name="roll_home_parallel_improve" value="@{roll_display}&{template:improvement} {{name=^{home_parallel}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{home_parallel_fumbled}]]}} {{skill=[[@{home_parallel_total}]]}} {{fumbled=[[@{home_parallel_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{home_parallel_encumbered}" name="attr_home_parallel_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{home_parallel_fumbled}" name="attr_home_parallel_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{home_parallel_trained}" name="attr_home_parallel_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_home_parallel_char1" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_home_parallel_char2" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{home_parallel_other}" name="attr_home_parallel_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{home_parallel_total}" name="attr_home_parallel_total" value="26">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{home_parallel_details}" name="attr_home_parallel_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_home_parallel_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{home_parallel_notes}" name="attr_home_parallel_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_home_parallel_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{home_parallel_roll}" name="roll_home_parallel_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{home_parallel}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{home_parallel_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{home_parallel_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{home_parallel_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{home_parallel_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{home_parallel_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{home_parallel_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{home_parallel_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{home_parallel_total}*1.5)+@{penalty})]]}} {{standard=[[@{home_parallel_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{home_parallel_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{home_parallel_total}+@{penalty})]]}} {{hard=[[ceil((@{home_parallel_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{home_parallel_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{home_parallel_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{home_parallel_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{home_parallel_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{home_parallel_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{home_parallel_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{home_parallel_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{home_parallel_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{home_parallel_notes}}}"><span class="sheet-bold" data-i18n="home_parallel"></span> <span name="attr_home_parallel_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Influence -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="influence">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="influence" checked><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="influence"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{influence_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="influence">Influence</label>
                                    <button type="roll" class="sheet-id" title="%{influence_id}" name="roll_influence_id" value="/w gm &{template:default} {{name=@{influence_name}}} {{^{id}=influence}}">i</button>
                                    <input type="hidden" name="attr_influence_name" value="^{influence}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{influence_roll}" name="roll_influence_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{influence}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{influence_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{influence_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{influence_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{influence_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{influence_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{influence_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{influence_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{influence_total}*1.5)+@{penalty})]]}} {{standard=[[@{influence_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{influence_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{influence_total}+@{penalty})]]}} {{hard=[[ceil((@{influence_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{influence_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{influence_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{influence_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{influence_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{influence_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{influence_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{influence_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{influence_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{influence_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{influence_improve}" name="roll_influence_improve" value="@{roll_display}&{template:improvement} {{name=^{influence}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{influence_fumbled}]]}} {{skill=[[@{influence_total}]]}} {{fumbled=[[@{influence_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{influence_encumbered}" name="attr_influence_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{influence_fumbled}" name="attr_influence_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{influence_trained}" name="attr_influence_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="cha-u">CHA</div>
                                    <input type="hidden" name="attr_influence_char1" value="@{cha}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="cha-u">CHA</div>
                                    <input type="hidden" name="attr_influence_char2" value="@{cha}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{influence_other}" name="attr_influence_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{influence_total}" name="attr_influence_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{influence_details}" name="attr_influence_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_influence_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{influence_notes}" name="attr_influence_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_influence_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{influence_roll}" name="roll_influence_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{influence}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{influence_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{influence_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{influence_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{influence_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{influence_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{influence_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{influence_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{influence_total}*1.5)+@{penalty})]]}} {{standard=[[@{influence_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{influence_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{influence_total}+@{penalty})]]}} {{hard=[[ceil((@{influence_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{influence_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{influence_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{influence_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{influence_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{influence_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{influence_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{influence_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{influence_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{influence_notes}}}"><span class="sheet-bold" data-i18n="influence"></span> <span name="attr_influence_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Insight -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="insight">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="insight"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="insight"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{insight_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="insight">Insight</label>
                                    <button type="roll" class="sheet-id" title="%{insight_id}" name="roll_insight_id" value="/w gm &{template:default} {{name=@{insight_name}}} {{^{id}=insight}}">i</button>
                                    <input type="hidden" name="attr_insight_name" value="^{insight}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{insight_roll}" name="roll_insight_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{insight}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{insight_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{insight_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{insight_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{insight_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{insight_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{insight_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{insight_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{insight_total}*1.5)+@{penalty})]]}} {{standard=[[@{insight_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{insight_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{insight_total}+@{penalty})]]}} {{hard=[[ceil((@{insight_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{insight_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{insight_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{insight_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{insight_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{insight_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{insight_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{insight_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{insight_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{insight_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{insight_improve}" name="roll_insight_improve" value="@{roll_display}&{template:improvement} {{name=^{insight}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{insight_fumbled}]]}} {{skill=[[@{insight_total}]]}} {{fumbled=[[@{insight_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{insight_encumbered}" name="attr_insight_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{insight_fumbled}" name="attr_insight_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{insight_trained}" name="attr_insight_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_insight_char1" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_insight_char2" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{insight_other}" name="attr_insight_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{insight_total}" name="attr_insight_total" value="24">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{insight_details}" name="attr_insight_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_insight_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{insight_notes}" name="attr_insight_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_insight_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{insight_roll}" name="roll_insight_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{insight}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{insight_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{insight_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{insight_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{insight_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{insight_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{insight_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{insight_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{insight_total}*1.5)+@{penalty})]]}} {{standard=[[@{insight_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{insight_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{insight_total}+@{penalty})]]}} {{hard=[[ceil((@{insight_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{insight_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{insight_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{insight_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{insight_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{insight_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{insight_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{insight_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{insight_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{insight_notes}}}"><span class="sheet-bold" data-i18n="insight"></span> <span name="attr_insight_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Locale -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="locale">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_locale_standard" value="1" checked>
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="locale"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="locale"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{locale_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="locale">Locale</label>
                                    <button type="roll" class="sheet-id" title="%{locale_id}" name="roll_locale_id" value="/w gm &{template:default} {{name=@{locale_name}}} {{^{id}=locale}}">i</button>
                                    <input type="hidden" name="attr_locale_name" value="^{locale}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{locale_roll}" name="roll_locale_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{locale}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{locale_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{locale_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{locale_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{locale_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{locale_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{locale_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{locale_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{locale_total}*1.5)+@{penalty})]]}} {{standard=[[@{locale_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{locale_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{locale_total}+@{penalty})]]}} {{hard=[[ceil((@{locale_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{locale_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{locale_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{locale_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{locale_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{locale_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{locale_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{locale_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{locale_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{locale_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{locale_improve}" name="roll_locale_improve" value="@{roll_display}&{template:improvement} {{name=^{locale}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{locale_fumbled}]]}} {{skill=[[@{locale_total}]]}} {{fumbled=[[@{locale_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{locale_encumbered}" name="attr_locale_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{locale_fumbled}" name="attr_locale_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{locale_trained}" name="attr_locale_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_locale_char1" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_locale_char2" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{locale_other}" name="attr_locale_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{locale_total}" name="attr_locale_total" value="26">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{locale_details}" name="attr_locale_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_locale_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{locale_notes}" name="attr_locale_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_locale_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{locale_roll}" name="roll_locale_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{locale}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{locale_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{locale_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{locale_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{locale_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{locale_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{locale_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{locale_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{locale_total}*1.5)+@{penalty})]]}} {{standard=[[@{locale_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{locale_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{locale_total}+@{penalty})]]}} {{hard=[[ceil((@{locale_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{locale_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{locale_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{locale_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{locale_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{locale_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{locale_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{locale_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{locale_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{locale_notes}}}"><span class="sheet-bold" data-i18n="locale"></span> <span name="attr_locale_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Native Tongue -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="native_tongue">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="native_tongue"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="native_tongue"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{native_tongue_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="native_tongue">Native Tongue</label>
                                    <button type="roll" class="sheet-id" title="%{native_tongue_id}" name="roll_native_tongue_id" value="/w gm &{template:default} {{name=@{native_tongue_name}}} {{^{id}=native_tongue}}">i</button>
                                    <input type="hidden" name="attr_native_tongue_name" value="^{native_tongue}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{native_tongue_roll}" name="roll_native_tongue_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{native_tongue}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{native_tongue_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{native_tongue_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{native_tongue_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{native_tongue_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{native_tongue_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{native_tongue_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{native_tongue_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{native_tongue_total}*1.5)+@{penalty})]]}} {{standard=[[@{native_tongue_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{native_tongue_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{native_tongue_total}+@{penalty})]]}} {{hard=[[ceil((@{native_tongue_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{native_tongue_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{native_tongue_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{native_tongue_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{native_tongue_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{native_tongue_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{native_tongue_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{native_tongue_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{native_tongue_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{native_tongue_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{native_tongue_improve}" name="roll_native_tongue_improve" value="@{roll_display}&{template:improvement} {{name=^{native_tongue}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{native_tongue_fumbled}]]}} {{skill=[[@{native_tongue_total}]]}} {{fumbled=[[@{native_tongue_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{native_tongue_encumbered}" name="attr_native_tongue_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{native_tongue_fumbled}" name="attr_native_tongue_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{native_tongue_trained}" name="attr_native_tongue_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_native_tongue_char1" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="cha-u">CHA</div>
                                    <input type="hidden" name="attr_native_tongue_char2" value="@{cha}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{native_tongue_other}" name="attr_native_tongue_other" value="40">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{native_tongue_total}" name="attr_native_tongue_total" value="64">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{native_tongue_details}" name="attr_native_tongue_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_native_tongue_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{native_tongue_notes}" name="attr_native_tongue_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_native_tongue_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{native_tongue_roll}" name="roll_native_tongue_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{native_tongue}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{native_tongue_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{native_tongue_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{native_tongue_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{native_tongue_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{native_tongue_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{native_tongue_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{native_tongue_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{native_tongue_total}*1.5)+@{penalty})]]}} {{standard=[[@{native_tongue_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{native_tongue_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{native_tongue_total}+@{penalty})]]}} {{hard=[[ceil((@{native_tongue_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{native_tongue_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{native_tongue_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{native_tongue_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{native_tongue_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{native_tongue_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{native_tongue_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{native_tongue_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{native_tongue_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{native_tongue_notes}}}"><span class="sheet-bold" data-i18n="native_tongue"></span> <span name="attr_native_tongue_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Perception -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="perception">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="perception"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="perception"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{perception_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="perception">Perception</label>
                                    <button type="roll" class="sheet-id" title="%{perception_id}" name="roll_perception_id" value="/w gm &{template:default} {{name=@{perception_name}}} {{^{id}=perception}}">i</button>
                                    <input type="hidden" name="attr_perception_name" value="^{perception}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{perception_roll}" name="roll_perception_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{perception}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{perception_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{perception_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{perception_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{perception_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{perception_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{perception_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{perception_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{perception_total}*1.5)+@{penalty})]]}} {{standard=[[@{perception_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{perception_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{perception_total}+@{penalty})]]}} {{hard=[[ceil((@{perception_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{perception_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{perception_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{perception_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{perception_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{perception_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{perception_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{perception_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{perception_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{perception_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{perception_improve}" name="roll_perception_improve" value="@{roll_display}&{template:improvement} {{name=^{perception}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{perception_fumbled}]]}} {{skill=[[@{perception_total}]]}} {{fumbled=[[@{perception_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{perception_encumbered}" name="attr_perception_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{perception_fumbled}" name="attr_perception_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{perception_trained}" name="attr_perception_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_perception_char1" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_perception_char2" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{perception_other}" name="attr_perception_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{perception_total}" name="attr_perception_total" value="24">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{perception_details}" name="attr_perception_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_perception_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{perception_notes}" name="attr_perception_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_perception_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{perception_roll}" name="roll_perception_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{perception}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{perception_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{perception_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{perception_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{perception_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{perception_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{perception_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{perception_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{perception_total}*1.5)+@{penalty})]]}} {{standard=[[@{perception_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{perception_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{perception_total}+@{penalty})]]}} {{hard=[[ceil((@{perception_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{perception_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{perception_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{perception_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{perception_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{perception_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{perception_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{perception_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{perception_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{perception_notes}}}"><span class="sheet-bold" data-i18n="perception"></span> <span name="attr_perception_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Ride -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="ride">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_ride_standard" value="1" checked>
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="ride"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="ride"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{ride_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="ride">Ride</label>
                                    <button type="roll" class="sheet-id" title="%{ride_id}" name="roll_ride_id" value="/w gm &{template:default} {{name=@{ride_name}}} {{^{id}=ride}}">i</button>
                                    <input type="hidden" name="attr_ride_name" value="^{ride}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{ride_roll}" name="roll_ride_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{ride}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{ride_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{ride_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{ride_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{ride_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{ride_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{ride_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{ride_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{ride_total}*1.5)+@{penalty})]]}} {{standard=[[@{ride_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{ride_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{ride_total}+@{penalty})]]}} {{hard=[[ceil((@{ride_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{ride_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{ride_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{ride_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{ride_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{ride_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{ride_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{ride_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{ride_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{ride_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{ride_improve}" name="roll_ride_improve" value="@{roll_display}&{template:improvement} {{name=^{ride}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{ride_fumbled}]]}} {{skill=[[@{ride_total}]]}} {{fumbled=[[@{ride_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{ride_encumbered}" name="attr_ride_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{ride_fumbled}" name="attr_ride_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{ride_trained}" name="attr_ride_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_ride_char1" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_ride_char2" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{ride_other}" name="attr_ride_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{ride_total}" name="attr_ride_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{ride_details}" name="attr_ride_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_ride_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{ride_notes}" name="attr_ride_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_ride_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{ride_roll}" name="roll_ride_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{ride}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{ride_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{ride_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{ride_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{ride_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{ride_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{ride_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{ride_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{ride_total}*1.5)+@{penalty})]]}} {{standard=[[@{ride_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{ride_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{ride_total}+@{penalty})]]}} {{hard=[[ceil((@{ride_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{ride_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{ride_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{ride_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{ride_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{ride_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{ride_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{ride_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{ride_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{ride_notes}}}"><span class="sheet-bold" data-i18n="ride"></span> <span name="attr_ride_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Sing -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="sing">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="sing"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="sing"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{sing_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="sing">Sing</label>
                                    <button type="roll" class="sheet-id" title="%{sing_id}" name="roll_sing_id" value="/w gm &{template:default} {{name=@{sing_name}}} {{^{id}=sing}}">i</button>
                                    <input type="hidden" name="attr_sing_name" value="^{sing}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{sing_roll}" name="roll_sing_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{sing}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{sing_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{sing_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{sing_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{sing_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{sing_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{sing_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{sing_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{sing_total}*1.5)+@{penalty})]]}} {{standard=[[@{sing_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{sing_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{sing_total}+@{penalty})]]}} {{hard=[[ceil((@{sing_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{sing_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{sing_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{sing_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{sing_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{sing_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{sing_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{sing_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{sing_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{sing_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{sing_improve}" name="roll_sing_improve" value="@{roll_display}&{template:improvement} {{name=^{sing}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{sing_fumbled}]]}} {{skill=[[@{sing_total}]]}} {{fumbled=[[@{sing_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{sing_encumbered}" name="attr_sing_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{sing_fumbled}" name="attr_sing_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{sing_trained}" name="attr_sing_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_sing_char1" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="cha-u">CHA</div>
                                    <input type="hidden" name="attr_sing_char2" value="@{cha}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{sing_other}" name="attr_sing_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{sing_total}" name="attr_sing_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{sing_details}" name="attr_sing_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_sing_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{sing_notes}" name="attr_sing_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_sing_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{sing_roll}" name="roll_sing_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{sing}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{sing_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{sing_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{sing_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{sing_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{sing_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{sing_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{sing_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{sing_total}*1.5)+@{penalty})]]}} {{standard=[[@{sing_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{sing_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{sing_total}+@{penalty})]]}} {{hard=[[ceil((@{sing_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{sing_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{sing_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{sing_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{sing_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{sing_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{sing_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{sing_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{sing_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{sing_notes}}}"><span class="sheet-bold" data-i18n="sing"></span> <span name="attr_sing_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Status -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="status">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_status_standard" value="1">
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="status"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="status"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{status_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="status">Status</label>
                                    <button type="roll" class="sheet-id" title="%{status_id}" name="roll_status_id" value="/w gm &{template:default} {{name=@{status_name}}} {{^{id}=status}}">i</button>
                                    <input type="hidden" name="attr_status_name" value="^{status}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{status_roll}" name="roll_status_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{status}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{status_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{status_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{status_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{status_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{status_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{status_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{status_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{status_total}*1.5)+@{penalty})]]}} {{standard=[[@{status_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{status_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{status_total}+@{penalty})]]}} {{hard=[[ceil((@{status_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{status_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{status_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{status_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{status_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{status_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{status_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{status_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{status_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{status_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{status_improve}" name="roll_status_improve" value="@{roll_display}&{template:improvement} {{name=^{status}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{status_fumbled}]]}} {{skill=[[@{status_total}]]}} {{fumbled=[[@{status_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{status_encumbered}" name="attr_status_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{status_fumbled}" name="attr_status_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{status_trained}" name="attr_status_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width">-</div>
                                    <input type="hidden" name="attr_status_char1" value="0" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width">-</div>
                                    <input type="hidden" name="attr_status_char2" value="0" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{status_other}" name="attr_status_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{status_total}" name="attr_status_total" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{status_details}" name="attr_status_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_status_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{status_notes}" name="attr_status_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_status_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{status_roll}" name="roll_status_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{status}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{status_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{status_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{status_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{status_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{status_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{status_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{status_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{status_total}*1.5)+@{penalty})]]}} {{standard=[[@{status_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{status_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{status_total}+@{penalty})]]}} {{hard=[[ceil((@{status_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{status_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{status_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{status_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{status_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{status_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{status_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{status_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{status_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{status_notes}}}"><span class="sheet-bold" data-i18n="status"></span> <span name="attr_status_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Stealth -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="stealth">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="stealth"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="stealth"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{stealth_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="stealth">Stealth</label>
                                    <button type="roll" class="sheet-id" title="%{stealth_id}" name="roll_stealth_id" value="/w gm &{template:default} {{name=@{stealth_name}}} {{^{id}=stealth}}">i</button>
                                    <input type="hidden" name="attr_stealth_name" value="^{stealth}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{stealth_roll}" name="roll_stealth_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{stealth}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{stealth_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{stealth_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{stealth_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{stealth_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{stealth_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{stealth_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{stealth_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{stealth_total}*1.5)+@{penalty})]]}} {{standard=[[@{stealth_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{stealth_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{stealth_total}+@{penalty})]]}} {{hard=[[ceil((@{stealth_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{stealth_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{stealth_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{stealth_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{stealth_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{stealth_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{stealth_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{stealth_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{stealth_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{stealth_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{stealth_improve}" name="roll_stealth_improve" value="@{roll_display}&{template:improvement} {{name=^{stealth}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{stealth_fumbled}]]}} {{skill=[[@{stealth_total}]]}} {{fumbled=[[@{stealth_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{stealth_encumbered}" name="attr_stealth_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{stealth_fumbled}" name="attr_stealth_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{stealth_trained}" name="attr_stealth_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                    <input type="hidden" name="attr_stealth_char1" value="@{dex}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="int-u">INT</div>
                                    <input type="hidden" name="attr_stealth_char2" value="@{int}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{stealth_other}" name="attr_stealth_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{stealth_total}" name="attr_stealth_total" value="24">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{stealth_details}" name="attr_stealth_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_stealth_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{stealth_notes}" name="attr_stealth_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_stealth_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{stealth_roll}" name="roll_stealth_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{stealth}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{stealth_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{stealth_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{stealth_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{stealth_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{stealth_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{stealth_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{stealth_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{stealth_total}*1.5)+@{penalty})]]}} {{standard=[[@{stealth_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{stealth_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{stealth_total}+@{penalty})]]}} {{hard=[[ceil((@{stealth_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{stealth_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{stealth_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{stealth_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{stealth_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{stealth_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{stealth_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{stealth_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{stealth_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{stealth_notes}}}"><span class="sheet-bold" data-i18n="stealth"></span> <span name="attr_stealth_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Strangeness -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="strangeness">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_strangeness_standard" value="1">
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="strangeness"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="strangeness"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{strangeness_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="strangeness">Strangeness</label>
                                    <button type="roll" class="sheet-id" title="%{strangeness_id}" name="roll_strangeness_id" value="/w gm &{template:default} {{name=@{strangeness_name}}} {{^{id}=strangeness}}">i</button>
                                    <input type="hidden" name="attr_strangeness_name" value="^{strangeness}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{strangeness_roll}" name="roll_strangeness_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{strangeness}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{strangeness_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{strangeness_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{strangeness_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{strangeness_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{strangeness_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{strangeness_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{strangeness_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{strangeness_total}*1.5)+@{penalty})]]}} {{standard=[[@{strangeness_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{strangeness_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{strangeness_total}+@{penalty})]]}} {{hard=[[ceil((@{strangeness_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{strangeness_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{strangeness_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{strangeness_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{strangeness_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{strangeness_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{strangeness_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{strangeness_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{strangeness_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{strangeness_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{strangeness_improve}" name="roll_strangeness_improve" value="@{roll_display}&{template:improvement} {{name=^{strangeness}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{strangeness_fumbled}]]}} {{skill=[[@{strangeness_total}]]}} {{fumbled=[[@{strangeness_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{strangeness_encumbered}" name="attr_strangeness_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{strangeness_fumbled}" name="attr_strangeness_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{strangeness_trained}" name="attr_strangeness_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width">-</div>
                                    <input type="hidden" name="attr_strangeness_char1" value="0" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width">-</div>
                                    <input type="hidden" name="attr_strangeness_char2" value="0" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{strangeness_other}" name="attr_strangeness_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{strangeness_total}" name="attr_strangeness_total" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{strangeness_details}" name="attr_strangeness_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_strangeness_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{strangeness_notes}" name="attr_strangeness_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_strangeness_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{strangeness_roll}" name="roll_strangeness_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{strangeness}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{strangeness_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{strangeness_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{strangeness_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{strangeness_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{strangeness_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{strangeness_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{strangeness_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{strangeness_total}*1.5)+@{penalty})]]}} {{standard=[[@{strangeness_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{strangeness_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{strangeness_total}+@{penalty})]]}} {{hard=[[ceil((@{strangeness_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{strangeness_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{strangeness_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{strangeness_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{strangeness_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{strangeness_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{strangeness_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{strangeness_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{strangeness_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{strangeness_notes}}}"><span class="sheet-bold" data-i18n="strangeness"></span> <span name="attr_strangeness_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Superstition -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="superstition">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_superstition_standard" value="1">
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="superstition"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="superstition"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{superstition_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="superstition">Superstition</label>
                                    <button type="roll" class="sheet-id" title="%{superstition_id}" name="roll_superstition_id" value="/w gm &{template:default} {{name=@{superstition_name}}} {{^{id}=superstition}}">i</button>
                                    <input type="hidden" name="attr_superstition_name" value="^{superstition}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{superstition_roll}" name="roll_superstition_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{superstition}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{superstition_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{superstition_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{superstition_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{superstition_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{superstition_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{superstition_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{superstition_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{superstition_total}*1.5)+@{penalty})]]}} {{standard=[[@{superstition_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{superstition_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{superstition_total}+@{penalty})]]}} {{hard=[[ceil((@{superstition_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{superstition_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{superstition_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{superstition_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{superstition_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{superstition_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{superstition_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{superstition_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{superstition_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{superstition_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{superstition_improve}" name="roll_superstition_improve" value="@{roll_display}&{template:improvement} {{name=^{superstition}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{superstition_fumbled}]]}} {{skill=[[@{superstition_total}]]}} {{fumbled=[[@{superstition_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{superstition_encumbered}" name="attr_superstition_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{superstition_fumbled}" name="attr_superstition_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{superstition_trained}" name="attr_superstition_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="21-int-u">21-INT</div>
                                    <input type="hidden" name="attr_superstition_char1" value="(21-@{int})" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                    <input type="hidden" name="attr_superstition_char2" value="@{pow}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{superstition_other}" name="attr_superstition_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{superstition_total}" name="attr_superstition_total" value="19">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{superstition_details}" name="attr_superstition_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_superstition_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{superstition_notes}" name="attr_superstition_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_superstition_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{superstition_roll}" name="roll_superstition_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{superstition}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{superstition_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{superstition_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{superstition_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{superstition_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{superstition_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{superstition_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{superstition_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{superstition_total}*1.5)+@{penalty})]]}} {{standard=[[@{superstition_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{superstition_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{superstition_total}+@{penalty})]]}} {{hard=[[ceil((@{superstition_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{superstition_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{superstition_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{superstition_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{superstition_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{superstition_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{superstition_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{superstition_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{superstition_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{superstition_notes}}}"><span class="sheet-bold" data-i18n="superstition"></span> <span name="attr_superstition_total"></span>%</button>
                            </div>
                        </div>

                        <!-- Swim -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="swim">
                            <div class="sheet-flex sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="swim"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="swim"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{swim_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="swim">Swim</label>
                                    <button type="roll" class="sheet-id" title="%{swim_id}" name="roll_swim_id" value="/w gm &{template:default} {{name=@{swim_name}}} {{^{id}=swim}}">i</button>
                                    <input type="hidden" name="attr_swim_name" value="^{swim}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{swim_roll}" name="roll_swim_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{swim}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{swim_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{swim_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{swim_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{swim_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{swim_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{swim_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{swim_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{swim_total}*1.5)+@{penalty})]]}} {{standard=[[@{swim_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{swim_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{swim_total}+@{penalty})]]}} {{hard=[[ceil((@{swim_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{swim_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{swim_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{swim_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{swim_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{swim_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{swim_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{swim_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{swim_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{swim_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{swim_improve}" name="roll_swim_improve" value="@{roll_display}&{template:improvement} {{name=^{swim}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{swim_fumbled}]]}} {{skill=[[@{swim_total}]]}} {{fumbled=[[@{swim_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{swim_encumbered}" name="attr_swim_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{swim_fumbled}" name="attr_swim_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{swim_trained}" name="attr_swim_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="str-u">STR</div>
                                    <input type="hidden" name="attr_swim_char1" value="@{str}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width" data-i18n="con-u">CON</div>
                                    <input type="hidden" name="attr_swim_char2" value="@{con}" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{swim_other}" name="attr_swim_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{swim_total}" name="attr_swim_total" value="22">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{swim_details}" name="attr_swim_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_swim_details" value="1">
                            <div class="sheet-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{swim_notes}" name="attr_swim_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_swim_notes"></span></div>
                            </div>
                            <div class="sheet-compact">
                                <button type="roll" class="sheet-nodie" title="%{swim_roll}" name="roll_swim_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{swim}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{swim_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{swim_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{swim_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{swim_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{swim_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{swim_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{swim_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{swim_total}*1.5)+@{penalty})]]}} {{standard=[[@{swim_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{swim_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{swim_total}+@{penalty})]]}} {{hard=[[ceil((@{swim_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{swim_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{swim_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{swim_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{swim_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{swim_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{swim_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{swim_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{swim_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{swim_notes}}}"><span class="sheet-bold" data-i18n="swim"></span> <span name="attr_swim_total"></span>%</button>
                            </div>
                        </div>

                        <!-- The Soot -->
                        <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="the_soot">
                            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_the_soot_standard" value="1">
                            <div class="sheet-flex sheet-wide-toggle sheet-detailed">
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="the_soot"><span class="sheet-radioico">w</span></div>
                                <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="the_soot"><span class="sheet-radioico">q</span></div>
                                <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{the_soot_total}/5)"><span class="sheet-radioico">&</span></div>
                                <div class="sheet-td sheet-grow sheet-hover-btn">
                                    <label class="sheet-skill" data-i18n="the_soot">The Soot</label>
                                    <button type="roll" class="sheet-id" title="%{the_soot_id}" name="roll_the_soot_id" value="/w gm &{template:default} {{name=@{the_soot_name}}} {{^{id}=the_soot}}">i</button>
                                    <input type="hidden" name="attr_the_soot_name" value="^{the_soot}">
                                </div>
                                <div class="sheet-td sheet-play">
                                    <button type="roll" class="sheet-d100 sheet-button-width" title="%{the_soot_roll}" name="roll_the_soot_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{the_soot}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{the_soot_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{the_soot_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{the_soot_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{the_soot_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{the_soot_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{the_soot_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{the_soot_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{the_soot_total}*1.5)+@{penalty})]]}} {{standard=[[@{the_soot_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{the_soot_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{the_soot_total}+@{penalty})]]}} {{hard=[[ceil((@{the_soot_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{the_soot_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{the_soot_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{the_soot_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{the_soot_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{the_soot_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{the_soot_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{the_soot_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{the_soot_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{the_soot_notes}}}"></button>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <button type="roll" class="sheet-improve sheet-button-width" title="%{the_soot_improve}" name="roll_the_soot_improve" value="@{roll_display}&{template:improvement} {{name=^{the_soot}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{the_soot_fumbled}]]}} {{skill=[[@{the_soot_total}]]}} {{fumbled=[[@{the_soot_fumbled}]]}}"></button>
                                </div>
                                <div class="sheet-td sheet-play">
                                    <input type="checkbox" title="@{the_soot_encumbered}" name="attr_the_soot_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{the_soot_fumbled}" name="attr_the_soot_fumbled" value="1"><span class="sheet-checkico">!</span>
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{the_soot_trained}" name="attr_the_soot_trained" value="1"><span class="sheet-checkico">3</span>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width">-</div>
                                    <input type="hidden" name="attr_the_soot_char1" value="0" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <div class="sheet-number-width">-</div>
                                    <input type="hidden" name="attr_the_soot_char2" value="0" disabled>
                                </div>
                                <div class="sheet-td sheet-edit">
                                    <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{the_soot_other}" name="attr_the_soot_other" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{the_soot_total}" name="attr_the_soot_total" value="0">
                                </div>
                                <div class="sheet-td">
                                    <input type="checkbox" title="@{the_soot_details}" name="attr_the_soot_details" value="1"><span class="sheet-checkico">E</span>
                                </div>
                            </div>
                            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_the_soot_details" value="1">
                            <div class="sheet-toggle sheet-wide-toggle sheet-detailed">
                                <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{the_soot_notes}" name="attr_the_soot_notes"></textarea></div>
                                <div class="sheet-play"><span class="sheet-skillnotes" name="attr_the_soot_notes"></span></div>
                            </div>
                            <div class="sheet-compact sheet-wide-toggle">
                                <button type="roll" class="sheet-nodie" title="%{the_soot_roll}" name="roll_the_soot_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{the_soot}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{the_soot_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{the_soot_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{the_soot_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{the_soot_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{the_soot_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{the_soot_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{the_soot_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{the_soot_total}*1.5)+@{penalty})]]}} {{standard=[[@{the_soot_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{the_soot_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{the_soot_total}+@{penalty})]]}} {{hard=[[ceil((@{the_soot_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{the_soot_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{the_soot_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{the_soot_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{the_soot_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{the_soot_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{the_soot_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{the_soot_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{the_soot_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{the_soot_notes}}}"><span class="sheet-bold" data-i18n="the_soot"></span> <span name="attr_the_soot_total"></span>%</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Improvised Skills -->
                <div class="sheet-minor" data-i18n-list="improvised_skills-order">
                    <div class="sheet-flex sheet-detailed">
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="improvised_skill">Improvised Skill</div></div>
                        <div class="sheet-th"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                    </div>
                    <div class="sheet-flex sheet-compact">
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="improvised_skills">Improvised Skills</div></div>
                    </div>

                    <!-- Novice -->
                    <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="novice">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-grow">
                                <label class="sheet-skill"><span data-i18n="novice">Novice</span> (
                                    <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{novice_char1}" name="attr_novice_char1">
                                        <option value="0" selected>0</option>
                                        <option value="@{str}" data-i18n="str-u">STR</option>
                                        <option value="@{con}" data-i18n="con-u">CON</option>
                                        <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                        <option value="@{dex}" data-i18n="dex-u">DEX</option>
                                        <option value="@{int}" data-i18n="int-u">INT</option>
                                        <option value="@{pow}" data-i18n="pow-u">POW</option>
                                        <option value="@{cha}" data-i18n="cha-u">CHA</option>
                                        <option value="(21-@{int})" data-i18n="21-int-u">21-INT</option>
                                    </select>
                                    +
                                    <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{novice_char2}" name="attr_novice_char2">
                                        <option value="0" selected>0</option>
                                        <option value="@{str}" data-i18n="str-u">STR</option>
                                        <option value="@{con}" data-i18n="con-u">CON</option>
                                        <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                        <option value="@{dex}" data-i18n="dex-u">DEX</option>
                                        <option value="@{int}" data-i18n="int-u">INT</option>
                                        <option value="@{pow}" data-i18n="pow-u">POW</option>
                                        <option value="@{cha}" data-i18n="cha-u">CHA</option>
                                    </select>
                                    )
                                </label>
                                <input type="hidden" name="attr_novice_name" value="^{novice}" disabled>
                            </div>
                            <div class="sheet-td">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{novice_roll}" name="roll_novice_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{novice}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{novice_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{novice_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{novice_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{novice_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{novice_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{novice_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{novice_total}*1.5)+@{penalty})]]}} {{standard=[[@{novice_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{novice_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{novice_total}+@{penalty})]]}} {{hard=[[ceil((@{novice_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{novice_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{novice_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{novice_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{novice_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{novice_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{novice_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{novice_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{novice_total}*@{herculean_mod})+@{penalty})]]}}"></button>
                            </div>
                            <div class="sheet-td">
                                <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{novice_total}" name="attr_novice_total" value="0" readonly>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <span class="sheet-bold" data-i18n="novice">Novice</span> (
                            <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{novice_char1}" name="attr_novice_char1">
                                <option value="0" selected>0</option>
                                <option value="@{str}" data-i18n="str-u">STR</option>
                                <option value="@{con}" data-i18n="con-u">CON</option>
                                <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                <option value="@{dex}" data-i18n="dex-u">DEX</option>
                                <option value="@{int}" data-i18n="int-u">INT</option>
                                <option value="@{pow}" data-i18n="pow-u">POW</option>
                                <option value="@{cha}" data-i18n="cha-u">CHA</option>
                                <option value="(21-@{int})" data-i18n="21-int-u">21-INT</option>
                            </select>
                            +
                            <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{novice_char2}" name="attr_novice_char2">
                                <option value="0" selected>0</option>
                                <option value="@{str}" data-i18n="str-u">STR</option>
                                <option value="@{con}" data-i18n="con-u">CON</option>
                                <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                <option value="@{dex}" data-i18n="dex-u">DEX</option>
                                <option value="@{int}" data-i18n="int-u">INT</option>
                                <option value="@{pow}" data-i18n="pow-u">POW</option>
                                <option value="@{cha}" data-i18n="cha-u">CHA</option>
                            </select>
                            )
                            <button type="roll" class="sheet-nodie" title="%{novice_roll}" name="roll_novice_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{novice}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{novice_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{novice_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{novice_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{novice_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{novice_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{novice_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{novice_total}*1.5)+@{penalty})]]}} {{standard=[[@{novice_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{novice_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{novice_total}+@{penalty})]]}} {{hard=[[ceil((@{novice_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{novice_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{novice_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{novice_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{novice_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{novice_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{novice_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{novice_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{novice_total}*@{herculean_mod})+@{penalty})]]}}"><span name="attr_novice_total"></span>%</button>
                        </div>
                    </div>

                    <!-- Competent -->
                    <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="competent">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-grow">
                                <label class="sheet-skill" data-i18n="competent">Competent</label>
                                <input type="hidden" name="attr_competent_name" value="^{competent}" disabled>
                            </div>
                            <div class="sheet-td">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{competent_roll}" name="roll_competent_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{competent}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{competent_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{competent_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{competent_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{competent_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{competent_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{competent_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{competent_total}*1.5)+@{penalty})]]}} {{standard=[[@{competent_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{competent_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{competent_total}+@{penalty})]]}} {{hard=[[ceil((@{competent_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{competent_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{competent_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{competent_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{competent_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{competent_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{competent_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{competent_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{competent_total}*@{herculean_mod})+@{penalty})]]}}"></button>
                            </div>
                            <div class="sheet-td">
                                <div class="sheet-number-width">31-50</div>
                                <input type="number" class="sheet-hidden" title="@{competent_total}" name="attr_competent_total" value="[[30+1d20]]" disabled>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{competent_roll}" name="roll_competent_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{competent}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{competent_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{competent_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{competent_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{competent_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{competent_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{competent_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{competent_total}*1.5)+@{penalty})]]}} {{standard=[[@{competent_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{competent_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{competent_total}+@{penalty})]]}} {{hard=[[ceil((@{competent_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{competent_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{competent_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{competent_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{competent_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{competent_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{competent_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{competent_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{competent_total}*@{herculean_mod})+@{penalty})]]}}"><span class="sheet-bold" data-i18n="competent"></span> 31-50%</button>
                        </div>
                    </div>

                    <!-- Proficient -->
                    <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="proficient">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-grow">
                                <label class="sheet-skill" data-i18n="proficient">Proficient</label>
                                <input type="hidden" name="attr_proficient_name" value="^{proficient}" disabled>
                            </div>
                            <div class="sheet-td">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{proficient_roll}" name="roll_proficient_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{proficient}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{proficient_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{proficient_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{proficient_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{proficient_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{proficient_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{proficient_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{proficient_total}*1.5)+@{penalty})]]}} {{standard=[[@{proficient_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{proficient_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{proficient_total}+@{penalty})]]}} {{hard=[[ceil((@{proficient_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{proficient_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{proficient_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{proficient_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{proficient_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{proficient_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{proficient_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{proficient_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{proficient_total}*@{herculean_mod})+@{penalty})]]}}"></button>
                            </div>
                            <div class="sheet-td">
                                <div class="sheet-number-width">51-70</div>
                                <input type="number" class="sheet-hidden" title="@{proficient_total}" name="attr_proficient_total" value="[[50+1d20]]" disabled>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{proficient_roll}" name="roll_proficient_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{proficient}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{proficient_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{proficient_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{proficient_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{proficient_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{proficient_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{proficient_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{proficient_total}*1.5)+@{penalty})]]}} {{standard=[[@{proficient_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{proficient_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{proficient_total}+@{penalty})]]}} {{hard=[[ceil((@{proficient_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{proficient_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{proficient_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{proficient_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{proficient_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{proficient_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{proficient_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{proficient_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{proficient_total}*@{herculean_mod})+@{penalty})]]}}"><span class="sheet-bold" data-i18n="proficient"></span> 51-70%</button>
                        </div>
                    </div>

                    <!-- Expert -->
                    <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="expert">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-grow">
                                <label class="sheet-skill" data-i18n="expert">Expert</label>
                                <input type="hidden" name="attr_expert_name" value="^{expert}" disabled>
                            </div>
                            <div class="sheet-td">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{expert_roll}" name="roll_expert_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{expert}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{expert_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{expert_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{expert_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{expert_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{expert_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{expert_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{expert_total}*1.5)+@{penalty})]]}} {{standard=[[@{expert_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{expert_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{expert_total}+@{penalty})]]}} {{hard=[[ceil((@{expert_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{expert_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{expert_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{expert_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{expert_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{expert_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{expert_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{expert_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{expert_total}*@{herculean_mod})+@{penalty})]]}}"></button>
                            </div>
                            <div class="sheet-td">
                                <div class="sheet-number-width">71-90</div>
                                <input type="number" class="sheet-hidden" title="@{expert_total}" name="attr_expert_total" value="[[70+1d20]]" disabled>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{expert_roll}" name="roll_expert_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{expert}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{expert_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{expert_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{expert_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{expert_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{expert_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{expert_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{expert_total}*1.5)+@{penalty})]]}} {{standard=[[@{expert_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{expert_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{expert_total}+@{penalty})]]}} {{hard=[[ceil((@{expert_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{expert_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{expert_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{expert_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{expert_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{expert_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{expert_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{expert_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{expert_total}*@{herculean_mod})+@{penalty})]]}}"><span class="sheet-bold" data-i18n="expert"></span> 71-90%</button>
                        </div>
                    </div>

                    <!-- Master -->
                    <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="master">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-grow">
                                <label class="sheet-skill" data-i18n="master">Master</label>
                                <input type="hidden" name="attr_master_name" value="^{master}" disabled>
                            </div>
                            <div class="sheet-td">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{master_roll}" name="roll_master_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{master}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{master_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{master_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{master_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{master_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{master_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{master_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{master_total}*1.5)+@{penalty})]]}} {{standard=[[@{master_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{master_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{master_total}+@{penalty})]]}} {{hard=[[ceil((@{master_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{master_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{master_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{master_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{master_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{master_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{master_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{master_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{master_total}*@{herculean_mod})+@{penalty})]]}}"></button>
                            </div>
                            <div class="sheet-td">
                                <div class="sheet-number-width">91-110</div>
                                <input type="number" class="sheet-hidden" title="@{master_total}" name="attr_master_total" value="[[90+1d20]]" disabled>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{master_roll}" name="roll_master_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{master}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{master_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{master_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{master_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{master_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{master_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{master_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{master_total}*1.5)+@{penalty})]]}} {{standard=[[@{master_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{master_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{master_total}+@{penalty})]]}} {{hard=[[ceil((@{master_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{master_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{master_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{master_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{master_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{master_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{master_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{master_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{master_total}*@{herculean_mod})+@{penalty})]]}}"><span class="sheet-bold" data-i18n="master"></span> 91-110%</button>
                        </div>
                    </div>


                    <!-- Paragon -->
                    <div class="sheet-hl sheet-compactable-rmargin" data-i18n-list-item="paragon">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-grow">
                                <label class="sheet-skill" data-i18n="paragon">Paragon</label>
                                <input type="hidden" name="attr_paragon_name" value="^{paragon}" disabled>
                            </div>
                            <div class="sheet-td">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{paragon_roll}" name="roll_paragon_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{paragon}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{paragon_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{paragon_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{paragon_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{paragon_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{paragon_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{paragon_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{paragon_total}*1.5)+@{penalty})]]}} {{standard=[[@{paragon_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{paragon_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{paragon_total}+@{penalty})]]}} {{hard=[[ceil((@{paragon_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{paragon_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{paragon_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{paragon_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{paragon_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{paragon_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{paragon_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{paragon_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{paragon_total}*@{herculean_mod})+@{penalty})]]}}"></button>
                            </div>
                            <div class="sheet-td">
                                <div class="sheet-number-width">&#62;110</div>
                                <input type="number" class="sheet-hidden" title="@{paragon_total}" name="attr_paragon_total" value="[[110+1d20]]" disabled>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{paragon_roll}" name="roll_paragon_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{paragon}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{paragon_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{paragon_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{paragon_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{paragon_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{paragon_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{paragon_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{paragon_total}*1.5)+@{penalty})]]}} {{standard=[[@{paragon_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{paragon_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{paragon_total}+@{penalty})]]}} {{hard=[[ceil((@{paragon_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{paragon_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{paragon_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{paragon_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{paragon_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{paragon_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{paragon_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{paragon_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{paragon_total}*@{herculean_mod})+@{penalty})]]}}"><span class="sheet-bold" data-i18n="paragon"></span> &#62;110%</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Skills Right Column -->
            <div class="sheet-half-col">
                <!-- Combat Styles -->
                <div class="sheet-bmargin">
                    <div class="sheet-flex sheet-detailed">
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_attack">w</div></div>
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_defense">q</div></div>
                        <div class="sheet-th sheet-pictos sheet-augment-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_augmentation">&</div></div>
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="combat_style">Combat Style</div></div>
                        <div class="sheet-th sheet-edit sheet-major"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-play"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-play sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="affected_by_encumbrance">a</div></div>
                        <div class="sheet-th sheet-pictos sheet-major"><div class="sheet-help sheet-checkbox-width" data-i18n-title="fumbled">!</div></div>
                        <div class="sheet-th sheet-pictos sheet-major"><div class="sheet-help sheet-checkbox-width" data-i18n-title="trained">3</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                        <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                        <div class="sheet-th sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="show_details">E</div></div>
                    </div>
                    <div class="sheet-flex sheet-compact">
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="combat_styles">Combat Styles</div></div>
                    </div>

                    <!-- Unarmed -->
                    <div class="sheet-hl sheet-compactable sheet-corporal">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="unarmed"><span class="sheet-radioico">w</span></div>
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="unarmed"><span class="sheet-radioico">q</span></div>
                            <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{unarmed_total}/5)"><span class="sheet-radioico">&</span></div>
                            <div class="sheet-td sheet-grow sheet-hover-btn">
                                <label class="sheet-skill" data-i18n="unarmed">Unarmed</label>
                                <button type="roll" class="sheet-id" title="%{unarmed_id}" name="roll_unarmed_id" value="/w gm &{template:default} {{name=@{unarmed_name}}} {{^{id}=unarmed}}">i</button>
                                <input type="hidden" name="attr_unarmed_name" value="^{unarmed}">
                            </div>
                            <div class="sheet-td sheet-play">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{unarmed_roll}" name="roll_unarmed_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{unarmed}}} {{roll=[[1d100]]}} {{combatstyle=1}}  {{weapon_buttons=@{weapon_buttons}}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{unarmed_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{unarmed_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{unarmed_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{unarmed_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{unarmed_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{unarmed_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{unarmed_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{unarmed_total}*1.5)+@{penalty})]]}} {{standard=[[@{unarmed_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{unarmed_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{unarmed_total}+@{penalty})]]}} {{hard=[[ceil((@{unarmed_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{unarmed_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{unarmed_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{unarmed_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{unarmed_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{unarmed_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{unarmed_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{unarmed_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{unarmed_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{unarmed_notes}}}"></button>
                            </div>
                            <div class="sheet-td sheet-edit sheet-major">
                                <button type="roll" class="sheet-improve sheet-button-width" title="%{unarmed_improve}" name="roll_unarmed_improve" value="@{roll_display}&{template:improvement} {{name=^{unarmed}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{unarmed_fumbled}]]}} {{skill=[[@{unarmed_total}]]}} {{fumbled=[[@{unarmed_fumbled}]]}}"></button>
                            </div>
                            <div class="sheet-td sheet-play">
                                <input type="checkbox" title="@{unarmed_encumbered}" name="attr_unarmed_encumbered" value="1" checked disabled><span class="sheet-checkico">a</span>
                            </div>
                            <div class="sheet-td sheet-major">
                                <input type="checkbox" title="@{unarmed_fumbled}" name="attr_unarmed_fumbled" value="1"><span class="sheet-checkico">!</span>
                            </div>
                            <div class="sheet-td sheet-major">
                                <input type="checkbox" title="@{unarmed_trained}" name="attr_unarmed_trained" value="1"><span class="sheet-checkico">3</span>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <div class="sheet-number-width" data-i18n="str-u">STR</div>
                                <input type="hidden" name="attr_unarmed_char1" value="@{str}" disabled>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <div class="sheet-number-width" data-i18n="dex-u">DEX</div>
                                <input type="hidden" name="attr_unarmed_char2" value="@{dex}" disabled>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{unarmed_other}" name="attr_unarmed_other" value="0">
                            </div>
                            <div class="sheet-td">
                                <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{unarmed_total}" name="attr_unarmed_total" value="22">
                            </div>
                            <div class="sheet-td">
                                <input type="checkbox" title="@{unarmed_details}" name="attr_unarmed_details" value="1"><span class="sheet-checkico">E</span>
                            </div>
                        </div>
                        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_unarmed_details" value="1">
                        <div class="sheet-toggle sheet-detailed">
                            <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{unarmed_notes}" name="attr_unarmed_notes"></textarea></div>
                            <div class="sheet-play"><span class="sheet-skillnotes" name="attr_unarmed_notes"></span></div>
                        </div>
                        <div class="sheet-compact sheet-rmargin sheet-corporal">
                            <button type="roll" class="sheet-nodie" title="%{unarmed_roll}" name="roll_unarmed_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{unarmed}}} {{roll=[[1d100]]}} {{combatstyle=1}}  {{weapon_buttons=@{weapon_buttons}}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{unarmed_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{unarmed_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{unarmed_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{unarmed_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{unarmed_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{unarmed_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{unarmed_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{unarmed_total}*1.5)+@{penalty})]]}} {{standard=[[@{unarmed_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{unarmed_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{unarmed_total}+@{penalty})]]}} {{hard=[[ceil((@{unarmed_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{unarmed_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{unarmed_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{unarmed_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{unarmed_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{unarmed_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{unarmed_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{unarmed_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{unarmed_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{unarmed_notes}}}"><span class="sheet-bold" data-i18n="unarmed"></span> <span name="attr_unarmed_total"></span>%</button>
                        </div>
                    </div>

                    <!-- Spectral Combat -->
                    <div class="sheet-hl sheet-compactable sheet-spirit" data-i18n-list-item="spectral_combat">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_attack_id}" name="attr_social_attack_id" value="spectral_combat"><span class="sheet-radioico">w</span></div>
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="radio" title="@{social_defense_id}" name="attr_social_defense_id" value="spectral_combat"><span class="sheet-radioico">q</span></div>
                            <div class="sheet-td sheet-augment-toggle sheet-play"><input type="radio" title="@{skill_augmentation}" name="attr_skill_augment" value="ceil(@{spectral_combat_total}/5)"><span class="sheet-radioico">&</span></div>
                            <div class="sheet-td sheet-grow sheet-hover-btn">
                                <label class="sheet-skill" data-i18n="spectral_combat">Spectral Combat</label>
                                <button type="roll" class="sheet-id" title="%{spectral_combat_id}" name="roll_spectral_combat_id" value="/w gm &{template:default} {{name=@{spectral_combat_name}}} {{^{id}=spectral_combat}}">i</button>
                                <input type="hidden" name="attr_spectral_combat_name" value="^{spectral_combat}">
                            </div>
                            <div class="sheet-td sheet-play">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{spectral_combat_roll}" name="roll_spectral_combat_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{spectral_combat}}} {{roll=[[1d100]]}} {{spiritcombat=1}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{spectral_combat_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{spectral_combat_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{spectral_combat_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{spectral_combat_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{spectral_combat_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{spectral_combat_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{spectral_combat_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{spectral_combat_total}*1.5)+@{penalty})]]}} {{standard=[[@{spectral_combat_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{spectral_combat_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{spectral_combat_total}+@{penalty})]]}} {{hard=[[ceil((@{spectral_combat_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{spectral_combat_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{spectral_combat_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{spectral_combat_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{spectral_combat_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{spectral_combat_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{spectral_combat_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{spectral_combat_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{spectral_combat_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{spectral_combat_notes}}}"></button>
                            </div>
                            <div class="sheet-td sheet-play">
                                <input type="checkbox" title="@{spectral_combat_encumbered}" name="attr_spectral_combat_encumbered" value="1" disabled><span class="sheet-checkico">a</span>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <div class="sheet-number-width" data-i18n="pow-u">POW</div>
                                <input type="hidden" name="attr_spectral_combat_char1" value="@{pow}" disabled>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <div class="sheet-number-width" data-i18n="cha-u">CHA</div>
                                <input type="hidden" name="attr_spectral_combat_char2" value="@{cha}" disabled>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{spectral_combat_other}" name="attr_spectral_combat_other" value="50">
                            </div>
                            <div class="sheet-td">
                                <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{spectral_combat_total}" name="attr_spectral_combat_total" value="72">
                            </div>
                            <div class="sheet-td">
                                <input type="checkbox" title="@{spectral_combat_details}" name="attr_spectral_combat_details" value="1"><span class="sheet-checkico">E</span>
                            </div>
                        </div>
                        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_spectral_combat_details" value="1">
                        <div class="sheet-toggle sheet-detailed">
                            <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{spectral_combat_notes}" name="attr_spectral_combat_notes"></textarea></div>
                            <div class="sheet-play"><span class="sheet-skillnotes" name="attr_spectral_combat_notes"></span></div>
                        </div>
                        <div class="sheet-compact sheet-rmargin sheet-spirit">
                            <button type="roll" class="sheet-nodie" title="%{spectral_combat_roll}" name="roll_spectral_combat_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=^{spectral_combat}}} {{roll=[[1d100]]}} {{spiritcombat=1}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{spectral_combat_encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{spectral_combat_total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{spectral_combat_total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{spectral_combat_total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{spectral_combat_total}*2)+@{penalty})]]}} {{easy=[[ceil((@{spectral_combat_total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{spectral_combat_total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{spectral_combat_total}*1.5)+@{penalty})]]}} {{standard=[[@{spectral_combat_total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{spectral_combat_total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{spectral_combat_total}+@{penalty})]]}} {{hard=[[ceil((@{spectral_combat_total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{spectral_combat_total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{spectral_combat_total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{spectral_combat_total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{spectral_combat_total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{spectral_combat_total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{spectral_combat_total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{spectral_combat_total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{spectral_combat_total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{spectral_combat_notes}}}"><span class="sheet-bold" data-i18n="spectral_combat"></span> <span name="attr_spectral_combat_total"></span>%</button>
                        </div>
                    </div>
                    
                    <div class="sheet-compactable-fieldset-control"></div>
                    <fieldset class="repeating_combatstyle">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="checkbox" title="@{social_attack_id}" name="attr_social_attack" value="1"><span class="sheet-checkico">w</span></div>
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="checkbox" title="@{social_defense_id}" name="attr_social_defense" value="1"><span class="sheet-checkico">q</span></div>
                            <div class="sheet-td sheet-augment-toggle sheet-play"><input type="checkbox" title="@{skill_augment}" name="attr_augment" value="1"><span class="sheet-checkico">&</span></div>
                            <div class="sheet-td sheet-grow sheet-hover-btn">
                                <input type="text" class="sheet-full-width sheet-text-left sheet-usrinput" title="@{$ID_name}" name="attr_name" value="">
                                <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                                <input type="hidden" name="attr_id" value="unset, please change any value in this skill" readonly>
                            </div>
                            <div class="sheet-td sheet-play">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{$ID_roll}" name="roll_roll" value="@{roll_display}&{template:skill} {{combatstyle=1}} {{weapon_buttons=@{weapon_buttons}}} {{character=@{character_name}}} {{name=@{name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{total}*2)+@{penalty})]]}} {{easy=[[ceil((@{total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{total}*1.5)+@{penalty})]]}} {{standard=[[@{total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{total}+@{penalty})]]}} {{hard=[[ceil((@{total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{notes}}}'}}"></button>
                            </div>
                            <div class="sheet-td sheet-edit sheet-major">
                                <button type="roll" class="sheet-improve sheet-button-width" title="%{$ID_improve}" name="roll_improve" value="@{roll_display}&{template:improvement} {{name=@{name}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{fumbled}]]}} {{skill=[[@{total}]]}} {{fumbled=[[@{fumbled}]]}}"></button>
                            </div>
                            <div class="sheet-td sheet-play sheet-pictos">
                                <input type="checkbox" title="@{$ID_encumbered}" name="attr_encumbered" value="1" checked readonly><span class="sheet-checkico">a</span>
                            </div>
                            <div class="sheet-td sheet-pictos sheet-major">
                                <input type="checkbox" title="@{$ID_fumbled}" name="attr_fumbled" value="1"><span class="sheet-checkico">!</span>
                            </div>
                            <div class="sheet-td sheet-pictos sheet-major">
                                <input type="checkbox" title="@{$ID_trained}" name="attr_trained" value="1"><span class="sheet-checkico">3</span>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{$ID_char1}" name="attr_char1">
                                    <option value="0">0</option>
                                    <option value="@{str}" data-i18n="str-u" selected>STR</option>
                                    <option value="@{con}" data-i18n="con-u">CON</option>
                                    <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                    <option value="@{dex}" data-i18n="dex-u">DEX</option>
                                    <option value="@{int}" data-i18n="int-u">INT</option>
                                    <option value="@{pow}" data-i18n="pow-u">POW</option>
                                    <option value="@{cha}" data-i18n="cha-u">CHA</option>
                                    <option value="(21-@{int})" data-i18n="21-int-u">21-INT</option>
                                </select>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{$ID_char2}" name="attr_char2">
                                    <option value="0">0</option>
                                    <option value="@{str}" data-i18n="str-u">STR</option>
                                    <option value="@{con}" data-i18n="con-u">CON</option>
                                    <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                    <option value="@{dex}" data-i18n="dex-u" selected>DEX</option>
                                    <option value="@{int}" data-i18n="int-u">INT</option>
                                    <option value="@{pow}" data-i18n="pow-u">POW</option>
                                    <option value="@{cha}" data-i18n="cha-u">CHA</option>
                                </select>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{$ID_other}" name="attr_other" value="0">
                            </div>
                            <div class="sheet-td">
                                <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{$ID_total}" name="attr_total" value="22">
                            </div>
                            <div class="sheet-td">
                                <input type="checkbox" title="@{$ID_details}" name="attr_details" value="1" checked><span class="sheet-checkico">E</span>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{$ID_compact_roll}" name="roll_roll" value="@{roll_display}&{template:skill} {{combatstyle=1}} {{weapon_buttons=@{weapon_buttons}}} {{character=@{character_name}}} {{name=@{name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{total}*2)+@{penalty})]]}} {{easy=[[ceil((@{total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{total}*1.5)+@{penalty})]]}} {{standard=[[@{total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{total}+@{penalty})]]}} {{hard=[[ceil((@{total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{notes}}}'}}"><span class="sheet-bold" name="attr_name"></span> <span name="attr_total"></span>%</button>
                        </div>
                        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1" checked>
                        <div class="sheet-toggle sheet-detailed">
                            <!--<div class="sheet-flex">
                                <div><label class="sheet-left" data-i18n="traits">Traits</label></div>
                                <div class="sheet-edit sheet-grow"><input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_traits}" name="attr_traits"></div>
                                <div class="sheet-play"><span class="sheet-usrnotes" name="attr_traits"></span></div>
                            </div>
                            <div class="sheet-flex">
                                <div><label class="sheet-left" data-i18n="weapons">Weapons</label></div>
                                <div class="sheet-edit sheet-grow"><input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_weapons}" name="attr_weapons"></div>
                                <div class="sheet-play"><span class="sheet-usrnotes" name="attr_weapons"></span></div>
                            </div>-->
                            <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{$ID_notes}" name="attr_notes"></textarea></div>
                            <div class="sheet-play"><span class="sheet-skillnotes" name="attr_notes"></span></div>
                        </div>
                    </fieldset>
                </div>

                <!-- Professional Skills -->
                <div class="sheet-bmargin">
                    <div class="sheet-flex sheet-detailed">
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_attack">w</div></div>
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_defense">q</div></div>
                        <div class="sheet-th sheet-pictos sheet-augment-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_augmentation">&</div></div>
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width sheet-major" data-i18n="professional_skill">Professional Skill</div><div class="sheet-full-width sheet-minor" data-i18n="other_skill">Other Skill</div></div>
                        <div class="sheet-th sheet-edit sheet-major"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-play"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-play sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="affected_by_encumbrance">a</div></div>
                        <div class="sheet-th sheet-pictos sheet-major"><div class="sheet-help sheet-checkbox-width" data-i18n-title="fumbled">!</div></div>
                        <div class="sheet-th sheet-pictos sheet-major"><div class="sheet-help sheet-checkbox-width" data-i18n-title="trained">3</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="base">Base</div></div>
                        <div class="sheet-th sheet-edit"><div class="sheet-number-width" data-i18n="other">Other</div></div>
                        <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                        <div class="sheet-th sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="show_details">E</div></div>
                    </div>
                    <div class="sheet-flex sheet-compact">
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width sheet-major" data-i18n="professional_skills">Professional Skills</div><div class="sheet-full-width sheet-minor" data-i18n="other_skills">Other Skills</div></div>
                    </div>
                    <div class="sheet-compactable-fieldset-control"></div>
                    <fieldset class="repeating_professionalskill">
                        <div class="sheet-flex sheet-detailed">
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="checkbox" title="@{social_attack_id}" name="attr_social_attack" value="1"><span class="sheet-checkico">w</span></div>
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="checkbox" title="@{social_defense_id}" name="attr_social_defense" value="1"><span class="sheet-checkico">q</span></div>
                            <div class="sheet-td sheet-augment-toggle sheet-play"><input type="checkbox" title="@{skill_augment}" name="attr_augment" value="1"><span class="sheet-checkico">&</span></div>
                            <div class="sheet-td sheet-grow sheet-hover-btn">
                                <input type="text" class="sheet-full-width sheet-text-left sheet-usrinput" title="@{$ID_name}" name="attr_name" value="">
                                <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                                <input type="hidden" name="attr_id" value="unset, please change any value in this skill" readonly>
                            </div>
                            <div class="sheet-td sheet-play">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{$ID_roll}" name="roll_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=@{name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{total}*2)+@{penalty})]]}} {{easy=[[ceil((@{total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{total}*1.5)+@{penalty})]]}} {{standard=[[@{total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{total}+@{penalty})]]}} {{hard=[[ceil((@{total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{notes}}}'}}"></button>
                            </div>
                            <div class="sheet-td sheet-edit sheet-major">
                                <button type="roll" class="sheet-improve sheet-button-width" title="%{$ID_improve}" name="roll_improve" value="@{roll_display}&{template:improvement} {{name=@{name}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1+@{fumbled}]]}} {{skill=[[@{total}]]}} {{fumbled=[[@{fumbled}]]}}"></button>
                            </div>
                            <div class="sheet-td sheet-play sheet-pictos">
                                <input type="checkbox" title="@{$ID_encumbered}" name="attr_encumbered" value="1" readonly><span class="sheet-checkico">a</span>
                            </div>
                            <div class="sheet-td sheet-pictos sheet-major">
                                <input type="checkbox" title="@{$ID_fumbled}" name="attr_fumbled" value="1"><span class="sheet-checkico">!</span>
                            </div>
                            <div class="sheet-td sheet-pictos sheet-major">
                                <input type="checkbox" title="@{$ID_trained}" name="attr_trained" value="1"><span class="sheet-checkico">3</span>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{$ID_char1}" name="attr_char1">
                                    <option value="0" selected>0</option>
                                    <option value="@{str}" data-i18n="str-u">STR</option>
                                    <option value="@{con}" data-i18n="con-u">CON</option>
                                    <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                    <option value="@{dex}" data-i18n="dex-u">DEX</option>
                                    <option value="@{int}" data-i18n="int-u">INT</option>
                                    <option value="@{pow}" data-i18n="pow-u">POW</option>
                                    <option value="@{cha}" data-i18n="cha-u">CHA</option>
                                    <option value="(21-@{int})" data-i18n="21-int-u">21-INT</option>
                                </select>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <select class="sheet-number-width sheet-text-center sheet-usrinput" title="@{$ID_char2}" name="attr_char2">
                                    <option value="0" selected>0</option>
                                    <option value="@{str}" data-i18n="str-u">STR</option>
                                    <option value="@{con}" data-i18n="con-u">CON</option>
                                    <option value="@{siz}" data-i18n="siz-u">SIZ</option>
                                    <option value="@{dex}" data-i18n="dex-u">DEX</option>
                                    <option value="@{int}" data-i18n="int-u">INT</option>
                                    <option value="@{pow}" data-i18n="pow-u">POW</option>
                                    <option value="@{cha}" data-i18n="cha-u">CHA</option>
                                </select>
                            </div>
                            <div class="sheet-td sheet-edit">
                                <input type="number" step="1" class="sheet-number-width sheet-usrinput" title="@{$ID_other}" name="attr_other" value="0">
                            </div>
                            <div class="sheet-td">
                                <input type="number" step="1" class="sheet-number-width sheet-impvalue" title="@{$ID_total}" name="attr_total" value="0">
                            </div>
                            <div class="sheet-td">
                                <input type="checkbox" title="@{$ID_details}" name="attr_details" value="1"><span class="sheet-checkico">E</span>
                            </div>
                        </div>
                        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1">
                        <div class="sheet-toggle sheet-detailed">
                            <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{$ID_notes}" name="attr_notes"></textarea></div>
                            <div class="sheet-play"><span class="sheet-skillnotes" name="attr_notes"></span></div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{$ID_roll}" name="roll_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=@{name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{total}*2)+@{penalty})]]}} {{easy=[[ceil((@{total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{total}*1.5)+@{penalty})]]}} {{standard=[[@{total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{total}+@{penalty})]]}} {{hard=[[ceil((@{total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{notes}}}'}}"><span class="sheet-bold" name="attr_name"></span> <span name="attr_total"></span>%</button>
                        </div>
                    </fieldset>
                </div>

                <!-- Passions -->
                <div class="sheet-bmargin">
                    <div class="sheet-flex sheet-detailed">
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_attack">w</div></div>
                        <div class="sheet-th sheet-pictos sheet-social-conflict-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_social_defense">q</div></div>
                        <div class="sheet-th sheet-pictos sheet-augment-toggle sheet-play"><div class="sheet-help sheet-checkbox-width" data-i18n-title="use_for_augmentation">&</div></div>
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="passion">Passion</div></div>
                        <div class="sheet-th sheet-play"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-edit sheet-major"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th sheet-edit sheet-major"><div class="sheet-button-width"></div></div>
                        <div class="sheet-th"><div class="sheet-passiontype" data-i18n="type">Type</div></div>
                        <div class="sheet-th sheet-pictos sheet-major"><div class="sheet-help sheet-checkbox-width" data-i18n-title="trained">3</div></div>
                        <div class="sheet-th"><div class="sheet-number-width">%</div></div>
                        <div class="sheet-th sheet-pictos"><div class="sheet-help sheet-checkbox-width" data-i18n-title="show_details">E</div></div>
                    </div>
                    <div class="sheet-flex sheet-compact">
                        <div class="sheet-th sheet-grow"><div class="sheet-full-width" data-i18n="passions">Passions</div></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-corruptions-toggle" name="attr_corruptions_enabled" value="1">
                    <input type="checkbox" class="sheet-hidden sheet-dependencies-toggle" name="attr_dependencies_enabled" value="1">
                    <input type="checkbox" class="sheet-hidden sheet-peculiarities-toggle" name="attr_peculiarities_enabled" value="1">
                    <div class="sheet-compactable-fieldset-control"></div>
                    <fieldset class="repeating_passion">
                        <div class="sheet-flex sheet-detailed">
                            <input type="hidden" name="attr_encumbered" value="0" disabled>
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="checkbox" title="@{social_attack_id}" name="attr_social_attack" value="1"><span class="sheet-checkico">w</span></div>
                            <div class="sheet-td sheet-social-conflict-toggle sheet-play"><input type="checkbox" title="@{social_defense_id}" name="attr_social_defense" value="1"><span class="sheet-checkico">q</span></div>
                            <div class="sheet-td sheet-augment-toggle sheet-play"><input type="checkbox" title="@{skill_augment}" name="attr_augment" value="1"><span class="sheet-checkico">&</span></div>
                            <div class="sheet-td sheet-grow sheet-hover-btn">
                                <input type="text" class="sheet-full-width sheet-text-left sheet-usrinput" title="@{$ID_name}" name="attr_name" value="">
                                <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                                <input type="hidden" name="attr_id" value="unset, please change any value in this passion" readonly>
                            </div>
                            <div class="sheet-td sheet-play">
                                <button type="roll" class="sheet-d100 sheet-button-width" title="%{$ID_roll}" name="roll_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=@{name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{original=@{total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{total}*2)+@{penalty})]]}} {{easy=[[ceil((@{total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{total}*1.5)+@{penalty})]]}} {{standard=[[@{total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{total}+@{penalty})]]}} {{hard=[[ceil((@{total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{notes}}}'}}"></button>
                            </div>
                            <div class="sheet-td sheet-edit sheet-major">
                                <button type="roll" class="sheet-improve sheet-button-width" title="%{$ID_improve}" name="roll_improve" value="@{roll_display}&{template:improvement} {{name=@{name}}} {{character=@{character_name}}} {{roll=[[1d100+@{int}]]}} {{improvement=[[1d4+1]]}} {{skill=[[@{total}]]}} {{fumbled=[[0]]}}"></button>
                            </div>
                            <div class="sheet-td sheet-edit sheet-major">
                                <button type="roll" class="sheet-waxorwane sheet-button-width" title="%{$ID_waxorwane}" name="roll_waxorwane" value="@{roll_display}&{template:default} {{purple=1}} {{name=@{name}}} {{character=@{character_name}}} {{^{weak}=+/-[[1d10]]%}} {{^{moderate}=+/-[[1d10+5]]%}} {{^{strong}=+/-[[1d10+10]]%}}"></button>
                            </div>
                            <div class="sheet-td">
                                <select class="sheet-passiontype sheet-text-center sheet-usrinput" title="@{$ID_type}" name="attr_type">
                                    <option value="corruption" class="sheet-corruptions-toggle" data-i18n="corruption">Corruption</option>
                                    <option value="dependency" class="sheet-dependencies-toggle" data-i18n="dependency">Dependency</option>
                                    <option value="passion" data-i18n="passion" selected>Passion</option>
                                    <option value="peculiarity" class="sheet-peculiarities-toggle" data-i18n="peculiarity">Peculiarity</option>
                                </select>
                            </div>
                            <div class="sheet-td sheet-major">
                                <input type="checkbox" title="@{$ID_trained}" name="attr_trained" value="1"><span class="sheet-checkico">3</span>
                            </div>
                            <div class="sheet-td">
                                <input type="number" step="1" class="sheet-number-width sheet-impusrinput" title="@{$ID_total}" name="attr_total" value="0">
                            </div>
                            <div class="sheet-td">
                                <input type="checkbox" title="@{$ID_details}" name="attr_details" value="1"><span class="sheet-checkico">E</span>
                            </div>
                        </div>
                        <div class="sheet-compact">
                            <button type="roll" class="sheet-nodie" title="%{$ID_roll}" name="roll_compact_roll" value="@{roll_display}&{template:skill} {{character=@{character_name}}} {{name=@{name}}} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{original=@{total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{total}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{total}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((@{total}*2)+@{penalty})]]}} {{easy=[[ceil((@{total}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{total}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((@{total}*1.5)+@{penalty})]]}} {{standard=[[@{total}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((@{total}+@{penalty})/10)]]}} {{standard_fumble=[[(@{total}+@{penalty})]]}} {{hard=[[ceil((@{total}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{total}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((@{total}*.67)+@{penalty})]]}} {{formidable=[[ceil((@{total}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{total}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((@{total}*.5)+@{penalty})]]}} {{herculean=[[ceil((@{total}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{total}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((@{total}*@{herculean_mod})+@{penalty})]]}} {{notes=@{notes}}}'}}"><span class="sheet-bold" name="attr_name"></span> <span name="attr_total"></span>%</button>
                        </div>
                        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1">
                        <div class="sheet-toggle sheet-detailed">
                            <div class="sheet-edit"><textarea class="sheet-full-width sheet-skillnotes" title="@{$ID_notes}" name="attr_notes"></textarea></div>
                            <div class="sheet-play"><span class="sheet-skillnotes" name="attr_notes"></span></div>
                        </div>
                    </fieldset>
                </div>
                <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_dependencies_enabled" value="1">
                <div class="sheet-toggle">
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_apply_dependencies_penalty" value="1" checked>
                    <div class="sheet-toggle sheet-text-right sheet-detailed">
                        <label class="sheet-left" data-i18n="tenacity_penalty">Tenacity Penalty</label>
                        <input class="sheet-number-width" name="attr_tenacity_dependencies" title="@{tenacity_dependencies}" value="0" readonly>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

    <div class='sheet-character-tab-abilities'>
        <!-- TODO: Power sub-role -->

<!-- Hidden Component Buttons and Pre-made Formula-->
<div class="sheet-hidden">
    <!-- Dice Roll -->
    <button type="roll" class="sheet-hidden" name="roll_damage" value="@{roll_display}&{template:default} {{name=^{damage}}} {{character=@{character_name}}} {{red=1}} {{^{roll}=[[?{Roll}]]}}"></button>
    <input type="text" name="attr_damage" value="[Damage](~@{character_name}|damage)" disabled>

    <!-- Dynamic Intensity -->
    <input type="text" name="attr_dynamic_intensity_trait" value="{{^{intensity}=?{Intensity|1}}}" disabled>
    <!-- Armor Penalty Formula -->
    <input type="text" name="attr_armor_penalty_trait" value="{{armor_penalty=[[@{armor_penalty}]]}}" disabled>

    <!-- Adding a new component check-list
        - set the static attributes here
            - if only a single option is available the options should be disabled/enabled
            - if multiple charts are feasible make a both/all option
            - if it uses metric/imperial measures make sure to name with unit type in attr name (imperal not supported
                 yet but make a metric one so we are ready for that addition
        - ensure new component is set to disabled by default in calcTraditionTypeSettings in character.js
        - make sure it is added to attr_advanced_traits
        - add the UI option to the traditions settings
    -->

    <!-- Ablation -->
    <button type="roll" class="sheet-hidden" name="roll_ablation_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{ablation}=?{Ablation|0 - None, None (0pts)|1 - -1 Magnitude, -1 Magnitude (1pts)|2 - -2 Magnitude, -2 Magnitude (2pts)|3 - -3 Magnitude, -3 Magnitude (3pts)|4 - -4 Magnitude, -4 Magnitude (4pts)|5 - -5 Magnitude, -5 Magnitude (5pts)|6 - -6 Magnitude, -6 Magnitude (6pts)|7 - -7 Magnitude, -7 Magnitude (7pts)|8 - -8 Magnitude, -8 Magnitude (8pts)|9 - -1 Magnitude, -9 Magnitude (9pts)|10 - -10 Magnitude, -10 Magnitude (10pts)}}}"></button>
    <input type="text" name="attr_ablation_component_standard_trait" value="{{^{ablation}=0 | [Enhance](~@{character_name}|ablation_component_standard)}}" disabled>

    <!-- Area -->
    <button type="roll" class="sheet-hidden" name="roll_area_component_sandestin_metric" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{area}=?{Area|0 - None, None (0pts)|1 - 2m Radius, 2m Radius (1pts)|3 - 5m Radius, 5m Radius (2pts)|3 - 10m Radius, 10m Radius (3pts)|4 - 25m Radius, 25m Radius (4pts)|5 - 50m Radius, 50m Radius (5pts)|6 - 100m Radius, 100m Radius (6pts)|7 - 250m Radius, 250m Radius (7pts)|8 - 500m Radius, 500m Radius (8pts)|9 - 1km Radius, 1km Radius (9pts)|10 - 2km Radius, 2km Radius (10pts)}}}"></button>
    <input type="text" name="attr_area_component_sandestin_metric_trait" value="{{^{area}=1m | [Enhance](~@{character_name}|area_component_sandestin_metric)}}" disabled>

    <!-- Combine -->
    <button type="roll" class="sheet-hidden" name="roll_combine_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{combine}=?{Combine|0 - None, None (0pts)|1 - 2 effects, 2 effects (1pts)|2 - 3 effects, 3 effects (2pts)|3 - 4 effects, 4 effects (3pts)|4 - 5 effects, 5 effects (4pts)|5 - 6 effects, 6 effects (5pts)|6 - 7 effects, 7 effects (6pts)|7 - 8 effects, 8 effects (7pts)|8 - 9 effects, 9 effects (8pts)|9 - 10 effects, 10 effects (9pts)|10 - 11 effects, 11 effects (10pts)}}} {{^{effects}=?{Effects}}}"></button>
    <button type="roll" class="sheet-hidden" name="roll_combine_component_sandestin" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{combine}=?{Combine|0 - None, None (0pts)|1 - 2 effects, 2 effects (1pts)|3 - 3 effects, 3 effects (3pts)|5 - 4 effects, 4 effects (5pts)|7 - 5 effects, 5 effects (7pts)|9 - 6 effects, 6 effects (9pts)|11 - 7 effects, 7 effects (11pts)|13 - 8 effects, 8 effects (13pts)|15 - 9 effects, 9 effects (15pts)|17 - 10 effects, 10 effects (17pts)|19 - 11 effects, 11 effects (19pts)}}} {{^{effects}=?{Effects}}}"></button>
    <input type="text" name="attr_combine_component_standard_trait" value="{{^{combine}=None | [Enhance](~@{character_name}|combine_component_standard)}}" disabled>
    <input type="text" name="attr_combine_component_sandestin_trait" value="{{^{combine}=None | [Enhance](~@{character_name}|combine_component_sandestin)}}" disabled>

    <!-- Conditions -->
    <button type="roll" class="sheet-hidden" name="roll_conditions_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{conditions}=?{Conditions|0 - None, None (0pts)|1 - 1 Condition , 1 Condition (1pt)|2 - 2 Conditions , 2 Conditions (2pts)|3 - 3 Conditions , 3 Conditions (3pts)|4 - 4 Conditions , 4 Conditions (4pts)|5 - 5 Conditions , 5 Conditions (5pts)|6 - 6 Conditions , 6 Conditions (6pts)|7 - 7 Conditions , 7 Conditions (7pts)|8 - 8 Conditions , 8 Conditions (8pts)|9 - 9 Conditions , 9 Conditions (9pts)|10 - 10 Conditions , 10 Conditions (10pts)}}}"></button>
    <input type="text" name="attr_conditions_component_standard_trait" value="{{^{conditions}=None | [Enhance](~@{character_name}|conditions_component_standard)}}" disabled>

    <!-- Doses -->
    <button type="roll" class="sheet-hidden" name="roll_doses_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{doses}=?{Doses|0 - 1 Dose , 1 Dose (0pts)|1 - 2 Doses , 2 Doses (1pt)|2 - 3 Doses , 3 Doses (2pts)|3 - 4 Doses , 4 Doses (3pts)|4 - 5 Doses , 5 Doses (4pts)|5 - 6 Doses , 6 Doses (5pts)|6 - 7 Doses , 7 Doses (6pts)|7 - 8 Doses , 8 Doses (7pts)|8 - 9 Doses , 9 Doses (8pts)|9 - 10 Doses , 10 Doses (9pts)|10 - 11 Doses , 11 Doses (10pts)}}}"></button>
    <input type="text" name="attr_doses_component_standard_trait" value="{{^{doses}=None | [Enhance](~@{character_name}|doses_component_standard)}}" disabled>
    
    <!-- Duration -->
    <button type="roll" class="sheet-hidden" name="roll_duration_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{duration}=?{Duration|0 - POW minutes, [[@{pow}]]mins (0pts)| 1 - 2&times;POW minutes, [[2*@{pow}]]mins (1pt)|2 - 3&times;POW minutes, 2 - [[3*@{pow}]]mins (2pts)|3 - 4&times;POW minutes, [[4*@{pow}]]mins (3pts)|4 - 5&times;POW minutes,  [[5*@{pow}]]mins (4pts)|5 - 6&times;POW minutes,  [[6*@{pow}]]mins (5pts)|6 - 7&times;POW minutes,  [[7*@{pow}]]mins (6pts)|7 - 8&times;POW minutes,  [[8*@{pow}]]mins (7pts)|8 - 9&times;POW minutes,  [[9*@{pow}]]mins (8pts)|9 - 10&times;POW minutes,  [[10*@{pow}]]mins (9pts)|10 - 11&times;POW minutes,  [[11*@{pow}]]mins (10pts)}}}"></button>
    <button type="roll" class="sheet-hidden" name="roll_duration_component_extended" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{duration}=?{Duration|0 - POW turns, [[@{pow}*1]] Turns (0pts)|1 - POW Rounds, [[@{pow}*1]] Rounds (1pt)|2 - POW Minutes, *1]] Minutes (2pts)|3 - POW &times; 5 Minutes, [[@{pow}*5]] Minutes (3pts)|4 - POW &times; 15 Minutes, [[@{pow}*15]] Minutes (4pts)|5 - POW Hours, [[@{pow}*1]] Hours (5pts)|6 - POW &times; 6 Hours, [[@{pow}*6]] Hours (6pts)|7 - POW Days, [[@{pow}*1]] Days (7pts)|8 - POW Weeks, [[@{pow}*1]] Weeks (8pts)|9 - POW Months, [[@{pow}*1]] Months (9pts)|5 - POW Years, [[@{pow}*1]] Years (10pts)} }}"></button>
    <input type="text" name="attr_duration_component_standard_trait" value="{{^{duration}=@{pow} Mins | [Enhance](~@{character_name}|duration_component_standard)}}" disabled>
    <input type="text" name="attr_duration_component_extended_trait" value="{{^{duration}=@{pow} Turns | [Enhance](~@{character_name}|duration_component_extended)}}" disabled>
    <input type="text" name="attr_duration_component_both_trait" value="{{^{duration}=@{pow} Mins | Enhance: [Standard](~@{character_name}|duration_component_standard) | [Extended](~@{character_name}|duration_component_extended)}}" disabled>

    <!-- Focus -->
    <button type="roll" class="sheet-hidden" name="roll_focus_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{focus}=?{Focus|0 - None, None (0pts)|1 - Ignore 1 level of difficulty, 1 level (1pt)|2 - Ignore 2 levels of difficulty, 2 levels (2pt)|3 - Ignore 3 levels of difficulty, 3 levels (3pt)|4 - Ignore 4 levels of difficulty, 4 levels (4pt)|5 - Ignore 5 levels of difficulty, 5 levels (5pt)|6 - Ignore 6 levels of difficulty, 6 levels (6pt)}}}"></button>
    <input type="text" name="attr_focus_component_standard_trait" value="{{^{focus}=None | [Enhance](~@{character_name}|focus_component_standard)}}" disabled>

    <!-- Fortune -->
    <button type="roll" class="sheet-hidden" name="roll_fortune_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{fortune}=?{Fortune|0 - None, None (0pts)|1 - 2 rolls, 2 rolls (1pt)|2 - 3 rolls, 3 rolls (2pt)|3 - 4 rolls, 4 rolls (3pt)|4 - 5 rolls, 5 rolls (4pt)|5 - 6 rolls, 6 rolls (5pt)|6 - 7 rolls, 7 rolls (6pt)|7 - 8 rolls, 8 rolls (7pt)|8 - 9 rolls, 9 rolls (8pt)|9 - 10 rolls, 10 rolls (9pt)|10 - 11 rolls, 11 rolls (10pt)}}}"></button>
    <button type="roll" class="sheet-hidden" name="roll_fortune_component_sandestin" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{fortune}=?{Fortune|0 - None, None (0pts)|1 - 2 Rolls, 2 Rolls (1pt)|3 - 3 Rolls, 3 Rolls (3pt)|6 - 4 Rolls, 4 Rolls (6pt)|10 - 5 Rolls, 5 Rolls (10pt)|15 - 6 Rolls, 6 Rolls (15pt)|21 - 7 Rolls, 7 Rolls (21pt)}}}"></button>
    <input type="text" name="attr_fortune_component_standard_trait" value="{{^{fortune}=None | [Enhance](~@{character_name}|fortune_component_standard)}}" disabled>
    <input type="text" name="attr_fortune_component_sandestin_trait" value="{{^{fortune}=None | [Enhance](~@{character_name}|fortune_component_sandestin)}}" disabled>

    <!-- Range -->
    <button type="roll" class="sheet-hidden" name="roll_range_component_standard_metric" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{range}=?{Range|0 - Touch, Touch (0pts)|1 - 1m&times;POW,  [[@{pow}]]m (1pt)|2 - 5m&times;POW,  [[5*@{pow}]]m (2pts)|3 - 10m&times;POW,  [[10*@{pow}]]m (3pts)|4 - 50m&times;POW,  [[50*@{pow}]]m (4pts)|5 - 100m&times;POW,  [[100*@{pow}]]m (5pts)|6 - 500m&times;POW,  [[500*@{pow}]]m (6pts)|7 - 1km&times;POW,  [[1*@{pow}]]km (7pts)|8 - 5km&times;POW,  [[5*@{pow}]]km (8pts)|9 - 10km&times;POW,  [[10*@{pow}]]km (9pts)|10 - 15km&times;POW,  [[15*@{pow}]]km (10pts)}}}"></button>
    <button type="roll" class="sheet-hidden" name="roll_range_component_sympathetic" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{range}=?{Range|0 - Touch, Touch (0pts)|1 - 2+ fragments of the target, 2+ fragments of the target (1pt)|2 - A fragments of the target, A fragments of the target (2pts)|3 - Any personal object that the target has worn or carried continuously for a year, Any personal object that the target has worn or carried continuously for a year (3pts)|4 - Any personal object that the target has used several times within the last year, Any personal object that the target has used several times within the last year (4pts)|5 - Any personal object that the target has used several times within the last year, Any personal object that the target has used several times within the last year (5pts)|6 - Any object the target has created or consumed, Any object the target has created or consumed (6pts)|7 - A live video of the target, A live video of the target (7pts)|8 - A recorded video of the target made within the last year, A recorded video of the target made within the last year (8pts)|9 - A clear photograph of the target made within the last year, A clear photograph of the target made within the last year (9pts)|10 - The caster has ever spent over an hour interacting with the target, The caster has ever spent over an hour interacting with the target (10pts)} }}"></button>
    <input type="text" name="attr_range_component_standard_metric_trait" value="{{^{range}=Touch | [Enhance](~@{character_name}|range_component_standard_metric)}}" disabled>
    <input type="text" name="attr_range_component_sympathetic_trait" value="{{^{range}=Touch | [Enhance](~@{character_name}|range_component_sympathetic)}}" disabled>
    <input type="text" name="attr_range_component_both_metric_trait" value="{{^{range}=Touch | Enhance: [Standard](~@{character_name}|range_component_standard_metric) | [Sympathetic](~@{character_name}|range_component_sympathetic)}}" disabled>

    <!-- Magnitude -->
    <button type="roll" class="sheet-hidden" name="roll_magnitude_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{magnitude}=?{Magnitude|0 - Magnitude 1, 1 (0pts)|1 - Magnitude 2, 2 (1pt)|2 - Magnitude 3, 3 (2pts)|3 - Magnitude 4, 4 (3pts)|4 - Magnitude 5, 5 (4pts)|5 - Magnitude 6, 6 (5pts)|6 - Magnitude 7, 7 (6pts)|7 - Magnitude 8, 8 (7pts)|8 - Magnitude 9, 9 (8pts)|9 - Magnitude 10, 10 (9pts)|10 - Magnitude 11, 11 (10pts)}}}"></button>
    <input type="text" name="attr_magnitude_component_standard_trait" value="{{^{magnitude}=1 | [Enhance](~@{character_name}|magnitude_component_standard)}}" disabled>

    <!-- Precision -->
    <button type="roll" class="sheet-hidden" name="roll_precision_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{precision}=?{Precision|0 - None, None (0pts)|1 - Adjust roll by 1, Adjust roll by 1 (1pt)|2 - Adjust roll by 2, Adjust roll by 2 (2pts)|3 - Adjust roll by 3, Adjust roll by 3 (3pts)|4 - Adjust roll by 4, Adjust roll by 4 (4pts)|5 - Adjust roll by 5, Adjust roll by 5 (5pts)|6 - Adjust roll by 6, Adjust roll by 6 (6pts)|7 - Adjust roll by 7, Adjust roll by 7 (7pts)|8 - Adjust roll by 8, Adjust roll by 8 (8pts)|9 - Adjust roll by 9, Adjust roll by 9 (9pts)|10 - Adjust roll by 10, Adjust roll by 10 (10pts)}}}"></button>
    <input type="text" name="attr_precision_component_standard_trait" value="{{^{precision}=None | [Enhance](~@{character_name}|precision_component_standard)}}" disabled>

    <!-- Services -->
    <button type="roll" class="sheet-hidden" name="roll_services_component_sandestin" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{services}=?{Services|0 - 1 Service, 1 (0pts)|3 - 2 Services, 2 (3pts)|7 - 3 Services, 3 (7pts)|12 - 4 Services, 4 (12pts)|18 - 5 Services, 5 (18pts)}}}"></button>
    <input type="text" name="attr_services_component_sandestin_trait" value="{{^{services}=1 | [Enhance](~@{character_name}|services_component_sandestin)}}" disabled>

    <!-- Shelf Life -->
    <button type="roll" class="sheet-hidden" name="roll_shelf_life_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{shelf_life}=?{Shelf Life|0 - POW hours, [[@{pow}]] hours (0pts)| 1 - 3&times;POW hours, [[3*@{pow}]] hours (1pt)|2 - POW days, 2 - [[@{pow}]] days (2pts)|3 - 3&times;POW days, [[3*@{pow}]] days (3pts)|4 - POW weeks,  [[@{pow}]] weeks (4pts)|5 - 3&times;POW weeks,  [[3*@{pow}]] weeks (5pts)|6 - POW months,  [[@{pow}]] months (6pts)|7 - 3&times;POW months,  [[3*@{pow}]] months (7pts)|8 - POW years,  [[@{pow}]] years (8pts)|9 - 3&times;POW years,  [[3*@{pow}]] years (9pts)|10 - 10&times;POW years,  [[10*@{pow}]] years (10pts)}}}"></button>
    <input type="text" name="attr_shelf_life_component_standard_trait" value="{{^{shelf_life}=@{pow} Hours | [Enhance](~@{character_name}|shelf_life_component_standard)}}" disabled>

    <!-- Swiftness -->
    <button type="roll" class="sheet-hidden" name="roll_swiftness_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{swiftness}=?{Swiftness|0 - None, None (0pts)|1 - -1 Casting time , -1 Casting time (1pt)|2 - -2 Casting time , -2 Casting time (2pts)|3 - -3 Casting time , -3 Casting time (3pts)|4 - -4 Casting time , -4 Casting time (4pts)|5 - -5 Casting time , -5 Casting time (5pts)|6 - -6 Casting time , -6 Casting time (6pts)|7 - -7 Casting time , -7 Casting time (7pts)|8 - -8 Casting time , -8 Casting time (8pts)|9 - -9 Casting time , -9 Casting time (9pts)|10 - -10 Casting time , -10 Casting time (10pts)}}}"></button>
    <button type="roll" class="sheet-hidden" name="roll_swiftness_component_sandestin" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{swiftness}=?{Swiftness|0 - None, None (0pts)|1 - -2 Casting time , -2 Casting time  (1pt)|2 - -4 Casting time , -4 Casting time (2pts)|3 - -6 Casting time , -6 Casting time (3pts)|4 - -8 Casting time , -8 Casting time (4pts)|5 - -10 Casting time , -10 Casting time (5pts)|6 - -12 Casting time , -12 Casting time (6pts)|7 - -14 Casting time , -14 Casting time (7pts)|8 - -16 Casting time , -16 Casting time (8pts)|9 - -18 Casting time , -18 Casting time (9pts)|10 - -20 Casting time , -20 Casting time (10pts)}}}"></button>
    <input type="text" name="attr_swiftness_component_standard_trait" value="{{^{swiftness}=None | [Enhance](~@{character_name}|swiftness_component_standard)}}" disabled>
    <input type="text" name="attr_swiftness_component_sandestin_trait" value="{{^{swiftness}=None | [Enhance](~@{character_name}|swiftness_component_sandestin)}}" disabled>

    <!-- Targets -->
    <button type="roll" class="sheet-hidden" name="roll_targets_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{targets}=?{Target|0 - 1 Target, 1 (0pts)|1 - 2 Targets, 2 (1pt)|2 - 3 Targets, 3 (2pts)|3 - 4 Targets, 4 (3pts)|4 - 5 Targets, 5 (4pts)|5 - 6 Targets, 6 (5pts)|6 - 7 Targets, 7 (6pts)|7 - 8 Targets, 8 (7pts)|8 - 9 Targets, 9 (8pts)|9 - 10 Targets, 10 (9pts)|10 - 11 Targets, 11 (10pts)}}}"></button>
    <input type="text" name="attr_targets_component_standard_trait" value="{{^{targets}=1 | [Enhance](~@{character_name}|targets_component_standard)}}" disabled>

    <!-- Terms -->
    <button type="roll" class="sheet-hidden" name="roll_terms_component_sandestin" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{terms}=?{Terms|0 - None, None (0pts)|1 - 1 Term , 1 Term (1pt)|2 - 2 Terms , 2 Terms (2pts)|3 - 3 Terms , 3 Terms (3pts)|4 - 4 Terms , 4 Terms (4pts)|5 - 5 Terms , 5 Terms (5pts)|6 - 6 Terms , 6 Terms (6pts)|7 - 7 Terms , 7 Terms (7pts)|8 - 8 Terms , 8 Terms (8pts)|9 - 9 Terms , 9 Terms (9pts)|10 - 10 Terms , 10 Terms (10pts)}}}"></button>
    <input type="text" name="attr_terms_component_sandestin_trait" value="{{^{terms}=None | [Enhance](~@{character_name}|terms_component_sandestin)}}" disabled>

    <!-- Wonders -->
    <button type="roll" class="sheet-hidden" name="roll_wonders_component_standard" value="@{roll_display}&{template:default} {{name=^{component}}} {{character=@{character_name}}} {{blue=1}} {{^{wonders}=?{Wonders|0 - None, None (0pts)|1 - 1 Wonder , 1 Wonder (1pt)|2 - 2 Wonders , 2 Wonders (2pts)|3 - 3 Wonders , 3 Wonders (3pts)|4 - 4 Wonders , 4 Wonders (4pts)|5 - 5 Wonders , 5 Wonders (5pts)|6 - 6 Wonders , 6 Wonders (6pts)|7 - 7 Wonders , 7 Wonders (7pts)|8 - 8 Wonders , 8 Wonders (8pts)|9 - 9 Wonders , 9 Wonders (9pts)|10 - 10 Wonders , 10 Wonders (10pts)}}}"></button>
    <input type="text" name="attr_wonders_component_standard_trait" value="{{^{wonders}=None | [Enhance](~@{character_name}|wonders_component_standard)}}" disabled>
</div>

<!-- Magic -->
<!-- Controls to toggle tradition types per magic systems -->
<input type="hidden" class="sheet-setting-control" name="attr_magic_systems" value="default">
<div class="sheet-section sheet-setting-hide-if-none">
    <!-- header -->
    <div class="sheet-flex-centered">
        <div><h2 data-i18n="magic">Magic</h2></div>
        <!-- magic attributes shortcut -->
        <div class="sheet-grow sheet-flex-rev sheet-text-right">
            <div data-i18n-list="magic-attribute-order">
                <div class="sheet-inline-block" data-i18n-list-item="magic_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_magic_points_enabled' value="1" checked/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="magic_points">Magic Points</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{magic_points}" name="attr_magic_points" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                </div>
                <div class="sheet-inline-block" data-i18n-list-item="power_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_power_points_enabled' value="1"/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="power_points">Power Points</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{magic_points}" name="attr_magic_points" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                </div>
                <div class="sheet-inline-block" data-i18n-list-item="prana_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_prana_points_enabled' value="1"/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="prana_points">Prana Points</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{magic_points}" name="attr_magic_points" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                </div>
                <div class="sheet-inline-block" data-i18n-list-item="tenacity">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_tenacity_enabled' value="1"/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="tenacity">Tenacity</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{tenacity}" name="attr_tenacity" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{tenacity|max}" name="attr_tenacity_max" value="11" readonly></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Traditions table -->
    <div class="sheet-flex">
        <div class="sheet-th sheet-tradition-name"><span data-i18n="tradition">Tradition></span> / <span data-i18n="system">System</span></div>
        <div class="sheet-th sheet-number-width" data-i18n="rank">Rank</div>
        <div class="sheet-th sheet-grow" data-i18n="summary">Summary</div>
        <div class="sheet-th sheet-tradition-pool" data-i18n="pool">Pool</div>
        <div class="sheet-th sheet-checkbox-width sheet-edit"><span class="sheet-pictos" data-i18n-title="details-tooltip">y</span></div>
    </div>

    <div class="sheet-bmargin">
        <fieldset class="repeating_tradition">
            <div class="sheet-flex">
                <div class="sheet-td sheet-tradition-name sheet-hover-btn">
                    <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                    <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                    <input type="hidden" name="attr_id" value="unset, please change any value in this tradition" readonly>
                </div>
                <div class="sheet-td sheet-number-width">
                    <select class="sheet-full-width sheet-usrinput sheet-text-center" title="@{$ID_tradition_rank}" name="attr_tradition_rank">
                        <option value="0" data-i18n="none" selected >None</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                <div style="white-space: pre-wrap;" class="sheet-td sheet-grow sheet-text-center">
                    <span name="attr_summary"></span>
                    <input type="hidden" name="attr_summary" value="-" readonly>
                </div>
                <div class="sheet-td sheet-tradition-pool">
                    <select class="sheet-full-width sheet-usrinput sheet-text-center sheet-edit" name="attr_pool_limit">
                        <option value="0" selected data-i18n="none">None</option>
                        <option value="ceil(@{pow}*.25)" data-i18n="1/4_pow-u">1/4 POW</option>
                        <option value="ceil(@{pow}*.5)" data-i18n="1/2_pow-u">1/2 POW</option>
                        <option value="ceil(@{pow}*.75)" data-i18n="3/4_pow-u">3/4 POW</option>
                        <option value="@{pow}" data-i18n="pow-u">POW</option>
                    </select>
                    <!-- If no pool display - instead of a pool value in play mode-->
                    <input type="hidden" class="sheet-pool-toggle" name="attr_pool_limit" value="0">
                    <span class="sheet-pool-toggle-none sheet-play">-</span>
                    <div class="sheet-pool-toggle-exist sheet-play">
                        <input type="number" class="sheet-number-width-sm sheet-usrinput sheet-play" title="@{$ID_pool}" name="attr_pool" value="0">
                        <span class="sheet-play">/</span>
                        <input type="number" class="sheet-number-width-sm sheet-play" title="@{$ID_pool|max}" name="attr_pool_max" value="@{pool_limit}" disabled>
                    </div>
                </div>
                <div class="sheet-td sheet-checkbox-width sheet-edit"><input type="checkbox" title="@{$ID_details}" name="attr_details" value="1" checked><span class="sheet-checkico">y</span></div>
            </div>

            <!-- Tradition Details-->
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1" checked>
            <div class="sheet-toggle sheet-edit sheet-lmargin">
                <!-- Tradition Type Config -->
                <div>
                    <span class="sheet-rmargin">
                        <label class="sheet-left" data-i18n="type">Type</label>
                        <select class="sheet-auto-width sheet-usrinput sheet-text-center" data-i18n-list="magic-type-order" title="@{$ID_type}" name="attr_type">
                            <option value="custom" data-i18n="custom" selected>Custom</option>
                            <option class="sheet-setting-option sheet-setting-thennla" value="alchemy_assabian" data-i18n-list-item="alchemy_(assabian)" data-i18n="alchemy_(assabian)">Alchemy (Assabian)</option>
                            <option class="sheet-setting-option sheet-setting-thennla" value="alchemy_sorandib" data-i18n-list-item="alchemy_(sorandib)" data-i18n="alchemy_(sorandib)">Alchemy (Sorandib)</option>
                            <option class="sheet-setting-option sheet-setting-default sheet-setting-mb sheet-setting-thennla" value="animism" data-i18n-list-item="animism" data-i18n="animism">Animism</option>
                            <option class="sheet-setting-option sheet-setting-cf" value="arcane_magic_bard" data-i18n-list-item="arcane_magic_bard"><span data-i18n="arcane_magic">Arcane Magic</span> (<span data-i18n="bard">Bard</span>)</option>
                            <option class="sheet-setting-option sheet-setting-cf" value="arcane_magic_high" data-i18n-list-item="arcane_magic_magic-user"><span data-i18n="arcane_magic">Arcane Magic</span> (<span data-i18n="magic-user">Magic-User</span>)</option>
                            <option class="sheet-setting-option sheet-setting-thennla" value="artifice" data-i18n-list-item="artifice" data-i18n="artifice">Artifice</option>
                            <option class="sheet-setting-option sheet-setting-cf" value="divine_magic_bard" data-i18n-list-item="divine_magic_bard"><span data-i18n="divine_magic">Divine Magic</span> (<span data-i18n="bard">Bard</span>)</option>
                            <option class="sheet-setting-option sheet-setting-cf" value="divine_magic_high" data-i18n-list-item="divine_magic_druid_priest"><span data-i18n="divine_magic">Divine Magic</span> (<span data-i18n="druid">Druid</span>/<span data-i18n="priest">Priest</span>)</option>
                            <option class="sheet-setting-option sheet-setting-cf" value="divine_magic_low" data-i18n-list-item="divine_magic_range_paladin"><span data-i18n="divine_magic">Divine Magic</span> (<span data-i18n="ranger">Ranger</span>/<span data-i18n="paladin">Paladin</span>)</option>
                            <option class="sheet-setting-option sheet-setting-atvw" value="fae_powers" data-i18n-list-item="fae_powers" data-i18n="fae_powers">Fae Powers</option>
                            <option class="sheet-setting-option sheet-setting-lyonesse" value="fairy_magic" data-i18n-list-item="fairy_magic" data-i18n="fairy_magic">Fairy Magic</option>
                            <option class="sheet-setting-option sheet-setting-default sheet-setting-atvw sheet-setting-perceforest sheet-setting-thennla" value="folk_magic" data-i18n-list-item="folk_magic" data-i18n="folk_magic">Folk Magic</option>
                            <option class="sheet-setting-option sheet-setting-mba" value="incantations" data-i18n-list-item="incantations" data-i18n="incantations">Incantations</option>
                            <option class="sheet-setting-option sheet-setting-default sheet-setting-cf sheet-setting-la sheet-setting-thennla sheet-setting-wu" value="mysticism" data-i18n-list-item="mysticism" data-i18n="mysticism">Mysticism</option>
                            <option class="sheet-setting-option sheet-setting-atvw sheet-setting-cf sheet-setting-la sheet-setting-wu" value="psychic_powers" data-i18n-list-item="psychic_powers" data-i18n="psychic_powers">Psychic Powers</option>
                            <option class="sheet-setting-option sheet-setting-lyonesse" value="sandestin_magic" data-i18n-list-item="sandestin_magic" data-i18n="sandestin_magic">Sandestin Magic</option>
                            <option class="sheet-setting-option sheet-setting-default sheet-setting-atvw sheet-setting-perceforest sheet-setting-thennla" value="sorcery" data-i18n-list-item="sorcery" data-i18n="sorcery">Sorcery</option>
                            <option class="sheet-setting-option sheet-setting-mba" value="sorcery_mythic_babylon" data-i18n-list-item="sorcery_(mythic_babylon)" data-i18n="sorcery_(mythic_babylon)">Sorcery (Mythic Babylon)</option>
                            <option class="sheet-setting-option sheet-setting-default sheet-setting-perceforest sheet-setting-thennla" value="theism" data-i18n-list-item="theism" data-i18n="theism">Theism</option>
                            <option class="sheet-setting-option sheet-setting-thennla" value="work_songs" data-i18n-list-item="work_songs" data-i18n="work_songs">Work Songs</option>

                        </select>
                    </span>

                    <label class="sheet-checkbox sheet-rmargin">
                        <input type='checkbox' name='attr_other_skill_enabled' value="1" checked><span>3</span>
                        <span class="sheet-bold" data-i18n="other_skill">Other Skill</span>
                    </label>

                    <label class="sheet-checkbox sheet-rmargin">
                        <input type='checkbox' name='attr_dynamic_intensity_enabled' value="@{dynamic_intensity_trait}"/><span>3</span>
                        <span class="sheet-bold" data-i18n="dynamic_intensity">Dynamic Intensity</span>
                    </label>

                    <label class="sheet-checkbox sheet-rmargin">
                        <input type='checkbox' name='attr_armor_penalty_enabled' value="@{armor_penalty_trait}"/><span>3</span>
                        <span class="sheet-bold" data-i18n="armor_penalty">Armor Penalty</span>
                    </label>

                    <label class="sheet-checkbox">
                        <input type='checkbox' name='attr_components_enabled' value="1"/><span>3</span>
                        <span class="sheet-bold" data-i18n="casting_components">Casting Components</span>
                    </label>
                </div>
                <!-- Rolled Skill Config -->
                <div class="sheet-flex">
                    <div class="sheet-flex sheet-rmargin sheet-half-col">
                        <div><label class="sheet-left" data-i18n="Rolled Skill ID">Rolled Skill ID</label></div>
                        <div class="sheet-grow"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_rolled_skill_id}" name="attr_rolled_skill_id" value=""></div>
                    </div>
                    <div class="sheet-flex sheet-half-col">
                        <input type="text" class="sheet-grow sheet-rmargin" title="@{$ID_rolled_skill_name}" name="attr_rolled_skill_name" value="" readonly>
                        <input type="number" class="sheet-number-width" name="attr_rolled_skill_total" value="0" readonly>
                        <input type="hidden" name="attr_rolled_skill_macro" value="">
                    </div>
                </div>
                <!-- Other Skill Config -->
                <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_other_skill_enabled" value="1" checked>
                <div class="sheet-toggle sheet-flex">
                    <div class="sheet-flex sheet-rmargin sheet-half-col">
                        <div><label class="sheet-left" data-i18n="Other Skill ID">Other Skill ID</label></div>
                        <div class="sheet-grow"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_other_skill_id}" name="attr_other_skill_id" value=""></div>
                    </div>
                    <div class="sheet-flex sheet-half-col">
                        <input type="text" class="sheet-grow sheet-rmargin" title="@{$ID_other_skill_name}" name="attr_other_skill_name" value="" readonly>
                        <input type="number" class="sheet-number-width" name="attr_other_skill_total" value="0" readonly>
                    </div>
                </div>
                <!-- Casting Component Config -->
                <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_components_enabled" value="1">
                <div class="sheet-toggle sheet-table">
                    <div class="sheet-tr">
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="ablation">
                            <label class="sheet-left" data-i18n="ablation">Ablation</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_ablation_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{ablation_component_standard_trait}" data-i18n="enabled">enabled</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list="area">
                            <label class="sheet-left" data-i18n="area">Area</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_area_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{area_component_sandestin_metric_trait}" data-i18n="sandestin_coercion">Sandestin Coercion</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="combine">
                            <label class="sheet-left" data-i18n="combine">Combine</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_combine_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{combine_component_standard_trait}" data-i18n="standard">Standard</option>
                                <option value="@{combine_component_sandestin_trait}" data-i18n="sandestin_coercion">Sandestin Coercion</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="conditions">
                            <label class="sheet-left" data-i18n="conditions">Conditions</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_conditions_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{conditions_component_standard_trait}" data-i18n="enabled">Enableds</option>
                            </select>
                        </div>
                    </div>
                    <div class="sheet-tr">
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="doses">
                            <label class="sheet-left" data-i18n="doses">Conditions</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_doses_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{doses_component_standard_trait}"  data-i18n="enabled">Enableds</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="duration">
                            <label class="sheet-left" data-i18n="duration">Duration</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_duration_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{duration_component_standard_trait}" data-i18n="standard">Standard</option>
                                <option value="@{duration_component_extended_trait}" data-i18n="extended">Extended</option>
                                <option value="@{duration_component_both_trait}" data-i18n="both">Both</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="focus">
                            <label class="sheet-left" data-i18n="focus">Focus</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_focus_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{focus_component_standard_trait}" data-i18n="enabled">Enabled</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="fortune">
                            <label class="sheet-left" data-i18n="fortune">Fortune</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_fortune_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{fortune_component_standard_trait}" data-i18n="standard">Standard</option>
                                <option value="@{fortune_component_sandestin_trait}" data-i18n="sandestin_coercion">Sandestin Coercion</option>
                            </select>
                        </div>
                    </div>
                    <div class="sheet-tr">
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="magnitude">
                            <label class="sheet-left" data-i18n="magnitude">Magnitude</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_magnitude_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{magnitude_component_standard_trait}" data-i18n="enabled">Enabled</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="precision">
                            <label class="sheet-left" data-i18n="precision">Precision</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_precision_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{precision_component_standard_trait}" data-i18n="enabled">Enabled</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="range">
                            <label class="sheet-left" data-i18n="range">Range</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_range_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{range_component_standard_metric_trait}" data-i18n="standard">Standard</option>
                                <option value="@{range_component_sympathetic_trait}" data-i18n="sympathetic">Sympathetic</option>
                                <option value="@{range_component_both_metric_trait}" data-i18n="both">Both</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="shelf_life">
                            <label class="sheet-left" data-i18n="shelf_life">Shelf Life</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_shelf_life_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{shelf_life_component_standard_trait}" data-i18n="enabled">Enabled</option>
                            </select>
                        </div>
                    </div>
                    <div class="sheet-tr">
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="services">
                            <label class="sheet-left" data-i18n="services">Services</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_services_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{services_component_sandestin_trait}" data-i18n="sandestin_coercion">Sandestin Coercion</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="swiftness">
                            <label class="sheet-left" data-i18n="swiftness">Swiftness</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_swiftness_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{swiftness_component_standard_trait}" data-i18n="standard">Standard</option>
                                <option value="@{swiftness_component_sandestin_trait}" data-i18n="sandestin_coercion">Sandestin Coercion</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="targets">
                            <label class="sheet-left" data-i18n="targets">Targets</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_targets_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{targets_component_standard_trait}" data-i18n="enabled">Enabled</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="terms">
                            <label class="sheet-left" data-i18n="terms">Terms</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_terms_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{terms_component_sandestin_trait}" data-i18n="sandestin_coercion">Sandestin Coercion</option>
                            </select>
                        </div>
                    </div>
                    <div class="tr">
                        <div class="sheet-td sheet-text-left" data-i18n-list-item="wonders">
                            <label class="sheet-left" data-i18n="wonders">Wonders</label>
                            <select class="sheet-auto-width sheet-usrinput" name="attr_wonders_component">
                                <option value="" data-i18n="disabled" selected>Disabled</option>
                                <option value="@{wonders_component_standard_trait}" data-i18n="enabled">Enabled</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Advanced Tradition Traits -->
            <input type="hidden" name="attr_advanced_traits" value="@{dynamic_intensity_enabled} @{armor_penalty_enabled} @{ablation_component} @{area_component} @{combine_component} @{conditions_component} @{doses_component} @{duration_component} @{focus_component} @{fortune_component} @{magnitude_component} @{precision_component} @{range_component} @{services_component} @{shelf_life_component} @{swiftness_component} @{targets_component} @{terms_component} @{wonders_component}" disabled>
        </fieldset>
    </div>

    <!-- Magic Powers Table -->
    <div class="sheet-flex sheet-detailed">
        <div class="sheet-th sheet-checkbox-width"><span class="sheet-pictos sheet-help" data-i18n-title="when_compact_only_starred_powers_are_shown">S</span></div>
        <div class="sheet-th sheet-ability-name" data-i18n="power">Power</div>
        <div class="sheet-th sheet-play sheet-button-width"></div>
        <div class="sheet-th sheet-ability-type" data-i18n="type">Type</div>
        <div class="sheet-th sheet-grow" data-i18n="traits">Traits</div>
        <div class="sheet-th sheet-checkbox-width"><span class="sheet-pictos" data-i18n-title="details-tooltip">E</span></div>
    </div>
    <div class="sheet-flex sheet-compact">
        <div class="sheet-grow sheet-th"><span data-i18n="powers">Powers</span></div>
    </div>
    <div class="sheet-compactable-nomargin-fieldset-control"></div>
    <fieldset class="repeating_power">
        <div class="sheet-flex sheet-detailed">
            <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_favored}" name="attr_favored" value="1" checked><span class="sheet-checkico">S</span></div>
            <div class="sheet-td sheet-ability-name sheet-hover-btn">
                <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                <input type="hidden" name="attr_id" value="unset, please change any value in this power" readonly>
            </div>
            <div class="sheet-td sheet-play sheet-button-width"><button type="roll" class="sheet-effect sheet-full-width" title="%{$ID_effect}" name="roll_effect" value="@{roll_display}&{template:effect} {{name=@{name}}} {{character=@{character_name}}} {{traits=@{traits}}} @{tradition_traits} {{effectid=@{id}}} @{buttons} {{description=@{description}}} {{rolled_skill_name=@{rolled_skill_name}}} {{rolled_skill_total=@{rolled_skill_total}}} {{rolled_skill_macro=@{rolled_skill_macro}}} {{other_skill_name=@{other_skill_name}}} {{other_skill_total=@{other_skill_total}}}"></button></div>
            <div class="sheet-td sheet-ability-type"><input type="text" class="sheet-full-width sheet-usrinput" title="%{$ID_type}" name="attr_type" value=""></div>
            <div style="white-space: normal;" class="sheet-td sheet-grow sheet-text-center">
                <span class="sheet-italic" name="attr_traits_summary"></span>
                <input type="hidden" name="attr_traits_summary" value="-" readonly>
            </div>
            <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_details}" name="attr_details" value="1" checked><span class="sheet-checkico">E</span></div>
        </div>
        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1" checked>
        <div class="sheet-toggle sheet-lmargin sheet-detailed">
            <div class="sheet-edit sheet-flex">
                <div class="sheet-third-col sheet-rmargin">
                    <div><label class="sheet-left" data-i18n="traits">Traits</label></div>
                    <textarea class="sheet-full-width" title="@{$ID_traits}" name="attr_traits"></textarea>
                </div>
                <div class="sheet-grow">
                    <div><label class="sheet-left" data-i18n="description">Description</label></div>
                    <textarea class="sheet-full-width " title="@{$ID_description}" name="attr_description"></textarea>
                </div>
            </div>
            <div class="sheet-edit sheet-flex">
                <div class="sheet-flex sheet-rmargin sheet-grow">
                    <div><label class="sheet-left" data-i18n="tradition_id">Tradition ID</label></div>
                    <div class="sheet-grow"><input type="text" class="sheet-usrinput sheet-full-width" title="@{$ID_tradition_id}" name="attr_tradition_id" value=""></div>
                </div>
                <div class="sheet-rmargin sheet-grow">
                    <input type="text" class="sheet-full-width" title="%{$ID_tradition_name}" name="attr_tradition_name_display" value="@{tradition_name}" disabled>
                </div>
                <div>
                    <label class="sheet-left" data-i18n="buttons">Buttons</label>
                    <select class="sheet-auto-width sheet-usrinput" title="%{$ID_buttons}" name="attr_buttons">
                        <option value="" data-i18n="none" selected>None</option>
                        <option value="{{buttons=1}} {{generic_button=1}}" data-i18n="generic">Generic</option>
                        <option value="{{buttons=1}} {{damage_button=1}}" data-i18n="damage">Damage</option>
                        <option value="{{buttons=1}} {{hit_location_buttons=1}} {{damage_button=1}}" data-i18n="hit_location_&_damage">Hit Location & Damage</option>
                        <option value="{{buttons=1}} {{special_effects_button=1}} {{initiative_button=1}} {{skill_button=1}} {{damage_button=1}}" data-i18n="spirit_buttons">Spirit Buttons</option>
                    </select>
                </div>
                <!-- Hidden Tradition Values -->
                <div class="sheet-hidden">
                    <input type="text" name="attr_tradition_name" value="" readonly>
                    <input type="text" name="attr_tradition_traits" value="" readonly>
                    <input type="text" name="attr_rolled_skill_name" value="" readonly>
                    <input type="text" name="attr_rolled_skill_total" value="" readonly>
                    <input type="text" name="attr_rolled_skill_macro" value="" readonly>
                    <input type="text" name="attr_other_skill_name" value="" readonly>
                    <input type="text" name="attr_other_skill_total" value="" readonly>
                </div>
            </div>
            <div class="sheet-play">
                <span class="sheet-usrnotes" name="attr_description"></span>
            </div>
        </div>
        <div class="sheet-compact">
            <input type="checkbox" class="sheet-compactable-toggle sheet-hidden" name="attr_favored" value="1" checked>
            <div class="sheet-compactable-rmargin"><button type="roll" class="sheet-nodie" title="%{$ID_effect}" name="roll_effect" value="@{roll_display}&{template:effect} {{name=@{name}}} {{character=@{character_name}}} {{traits=@{traits}}} @{tradition_traits} {{effectid=@{id}}} {{description=@{description}}} {{rolled_skill_name=@{rolled_skill_name}}} {{rolled_skill_total=@{rolled_skill_total}}} {{rolled_skill_macro=@{rolled_skill_macro}}} {{other_skill_name=@{other_skill_name}}} {{other_skill_total=@{other_skill_total}}}"><span name="attr_name"></span></button></div>
        </div>
        <!-- Hidden Buttons -->
        <button type="roll" class="sheet-hidden" name="roll_damage" value="@{roll_display}&{template:default} {{name=@{name} (?{Roll|1dX})}} {{character=@{character_name}}} {{red=1}} {{^{damage}=[[?{Roll|1dX}]]}}"></button>
        <button type="roll" class="sheet-hidden" name="roll_description" value="@{roll_display}&{template:default} {{name=@{name}}} {{character=@{character_name}}} {{blue=1}} {{notes=@{description}}}"></button>
        <button type="roll" class="sheet-hidden" name="roll_generic" value="@{roll_display}&{template:default} {{name=@{name} (?{Roll|1dX})}} {{character=@{character_name}}} {{blue=1}} {{^{rolled}=[[?{Roll|1dX}]]}}"></button>
        <button type="roll" class="sheet-hidden" name="roll_initiative" value="@{roll_display}&{template:default} {{name=@{name}}} {{character=@{character_name}}} {{yellow=1}} {{^{initiative}=[[?{Roll|1d10+X}]]}} {{notes=^{results_need_to_be_added_to_the_initiative_table_manually}}}"></button>
        <button type="roll" class="sheet-hidden" name="roll_skill" value="@{roll_display}&{template:skill} {{name=@{name}: ?{Skill Name}}} {{character=@{character_name}}}  {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[0]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=?{Skill Value}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((?{Skill Value}+@{augmentation})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((?{Skill Value}*2)+@{penalty})/10)]]}} {{very_easy_fumble=[[((?{Skill Value}*2)+@{penalty})]]}} {{easy=[[ceil((?{Skill Value}+@{augmentation})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((?{Skill Value}*1.5)+@{penalty})/10)]]}} {{easy_fumble=[[ceil((?{Skill Value}*1.5)+@{penalty})]]}} {{standard=[[?{Skill Value}+@{augmentation}+@{penalty}]]}} {{standard_crit=[[ceil((?{Skill Value}+@{penalty})/10)]]}} {{standard_fumble=[[(?{Skill Value}+@{penalty})]]}} {{hard=[[ceil((?{Skill Value}+@{augmentation})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((?{Skill Value}*.67)+@{penalty})/10)]]}} {{hard_fumble=[[ceil((?{Skill Value}*.67)+@{penalty})]]}} {{formidable=[[ceil((?{Skill Value}+@{augmentation})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((?{Skill Value}*.5)+@{penalty})/10)]]}} {{formidable_fumble=[[ceil((?{Skill Value}*.5)+@{penalty})]]}} {{herculean=[[ceil((?{Skill Value}+@{augmentation})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((?{Skill Value}*@{herculean_mod})+@{penalty})/10)]]}} {{herculean_fumble=[[ceil((?{Skill Value}*@{herculean_mod})+@{penalty})]]}}"></button>
        <button type="roll" class="sheet-hidden" name="roll_special_effects" value="@{roll_display}&{template:default} {{name=@{name}}} {{character=@{character_name}}} {{^{special_effects}=?{Special Effects}}}"></button>
    </fieldset>
</div>

<!-- Features -->
<div class="sheet-section">
    <!-- header -->
    <div class="sheet-flex-centered">
        <div><h2 data-i18n="features">Features</h2></div>
        <!-- magic attributes shortcut -->
        <div class="sheet-grow sheet-flex-rev sheet-text-right">
            <div data-i18n-list="magic-attribute-order">
                <div class="sheet-inline-block" data-i18n-list-item="magic_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_magic_points_enabled' value="1" checked/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="magic_points">Magic Points</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{magic_points}" name="attr_magic_points" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                </div>
                <div class="sheet-inline-block" data-i18n-list-item="power_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_power_points_enabled' value="1"/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="power_points">Power Points</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{magic_points}" name="attr_magic_points" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                </div>
                <div class="sheet-inline-block" data-i18n-list-item="prana_points">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_prana_points_enabled' value="1"/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="prana_points">Prana Points</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{magic_points}" name="attr_magic_points" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{magic_points|max}" name="attr_magic_points_max" value="11" readonly></div>
                </div>
                <div class="sheet-inline-block" data-i18n-list-item="tenacity">
                    <input type='checkbox' class='sheet-hidden sheet-toggle' name='attr_tenacity_enabled' value="1"/>
                    <div class="sheet-toggle sheet-inline-block sheet-lmargin"><label class="sheet-left" data-i18n="tenacity">Tenacity</label><input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{tenacity}" name="attr_tenacity" value="11">/<input type="number" class="sheet-impvalue sheet-number-width-sm" title="@{tenacity|max}" name="attr_tenacity_max" value="11" readonly></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Table -->
    <!-- TODO: change the Features title per setting -->
    <div class="sheet-flex sheet-detailed">
        <!-- Disable Dividers <div class="sheet-th sheet-checkbox-width sheet-edit"><span class="sheet-help" data-i18n-title="make_this_item_a_divider">%</span></div>-->
        <div class="sheet-th sheet-ability-name" data-i18n="feature">Feature</div>
        <div class="sheet-th sheet-play sheet-button-width"></div>
        <div class="sheet-th sheet-ability-type" data-i18n="type">Type</div>
        <div class="sheet-th sheet-grow" data-i18n="summary">Summary</div>
        <div class="sheet-th sheet-checkbox-width"><span class="sheet-pictos" data-i18n-title="details-tooltip">E</span></div>
    </div>
    <div class="sheet-compactable-nomargin-fieldset-control"></div>
    <fieldset class="repeating_feature">
        <!-- Disable Dividers <input type="checkbox" class="sheet-hidden sheet-divider-toggle" name="attr_divider" value="1">
        <div class="sheet-divider">
            <div class="sheet-edit sheet-flex sheet-tmargin">
                <div class="sheet-checkbox-width sheet-edit"><input type="checkbox" class="sheet-edit" title="@{$ID_divider}" name="attr_divider" value="1"><span class="sheet-font-normal sheet-checkico">%</span></div>
                <div class="sheet-grow sheet-edit"><input type="text" class="sheet-full-width sheet-dividerusrinput sheet-text-left" title="@{$ID_name}" name="attr_name"></div>
            </div>
            <div class="sheet-play">
                <div class="sheet-detailed sheet-flex sheet-tmargin">
                    <span class="sheet-divider sheet-grow" name="attr_name"></span>
                </div>
                <div class="sheet-compact sheet-compactable-rmargin">
                    <span class="sheet-divider" name="attr_name"></span>:
                </div>
            </div>
        </div>
        <div class="sheet-non-divider"> -->
            <div class="sheet-flex sheet-detailed">
                <!-- Disable Dividers <div class="sheet-td sheet-checkbox-width sheet-edit"><input type="checkbox" title="@{$ID_divider}" name="attr_divider" value="1"><span class="sheet-font-normal sheet-checkico">%</span></div>-->
                <div class="sheet-td sheet-ability-name sheet-hover-btn">
                    <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                    <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                    <input type="hidden" name="attr_id" value="unset, please change any value in this feature" readonly>
                </div>
                <div class="sheet-td sheet-play sheet-button-width"><button type="roll" class="sheet-effect sheet-full-width" title="%{$ID_effect}" name="roll_effect" value="@{roll_display}&{template:effect} {{name=@{name}}} {{character=@{character_name}}} {{summary=@{summary}}} {{effectid=@{id}}} {{description=@{description}}}"></button></div>
                <div class="sheet-td sheet-ability-type"><input type="text" class="sheet-full-width sheet-usrinput" title="%{$ID_type}" name="attr_type" value=""></div>
                <div style="white-space: normal;" class="sheet-td sheet-grow sheet-text-center">
                    <input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_summary}" name="attr_summary">
                </div>
                <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_details}" name="attr_details" value="1"><span class="sheet-checkico">E</span></div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1" checked>
            <div class="sheet-toggle sheet-lmargin sheet-detailed">
                <div class="sheet-edit">
                    <div><label class="sheet-left" data-i18n="description">Description</label></div>
                    <textarea class="sheet-full-width " title="@{$ID_description}" name="attr_description"></textarea>
                </div>
                <div class="sheet-play">
                    <span class="sheet-usrnotes" name="attr_description"></span>
                </div>
            </div>
            <div class="sheet-compact">
                <div class="sheet-compactable-rmargin"><button type="roll" class="sheet-nodie" title="%{$ID_effect}" name="roll_effect" value="@{roll_display}&{template:effect} {{name=@{name}}} {{character=@{character_name}}} {{summary=@{summary}}} {{effectid=@{id}}} {{description=@{description}}}"><span name="attr_name"></span></button></div>
            </div>
            <!-- Hidden Description Button -->
            <button type="roll" class="sheet-hidden" name="roll_description" value="@{roll_display}&{template:default} {{name=@{name}}} {{character=@{character_name}}} {{blue=1}} {{notes=@{description}}}"></button>
        <!--</div> Disable Divider-->
    </fieldset>
</div>
    </div>

    <div class='sheet-character-tab-equipment'>
        <div class="sheet-major">
            <!-- Armor -->
<div class="sheet-section">
    <div class="sheet-flex-centered">
        <h2 data-i18n="armor">Armor</h2>
        <div class="sheet-edit sheet-grow sheet-text-right">
            <label class="sheet-checkbox" title="@{half_effective_armor_enc}">
                <input type='checkbox' name='attr_half_effective_armor_enc' value="1"/><span>3</span>
                <span data-i18n="calculate_effective_armor_enc_as_quarter">Calculate effective ENC from armor as 1/4 actual</span>
            </label>
        </div>
    </div>

    <div class="sheet-rmargin">
        <div class="sheet-table">
            <div class="sheet-tr sheet-hl">
                <div class="sheet-th" data-i18n="hit_location">Hit Location</div>
                <div class="sheet-th" data-i18n="type">Type</div>
                <div class="sheet-th sheet-help" data-i18n-title="armor_points" data-i18n="ap">AP</div>
                <div class="sheet-th" data-i18n="enc">ENC</div>
                <div class="sheet-th sheet-full-width" data-i18n="notes">Notes</div>
                <div class="sheet-th" data-i18n="location">Location</div>
            </div>
            <div class="sheet-tr sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location1_name}" name="attr_location1_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location1_armor_type}" name="attr_location1_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location1_armor_ap}" name="attr_location1_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location1_armor_enc}" step="any" name="attr_location1_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location1_armor_notes}" name="attr_location1_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location1_armor_equipped}" name="attr_location1_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-wide-toggle" name="attr_location2to7_display" value="1" checked>
            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location2_name}" name="attr_location2_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location2_armor_type}" name="attr_location2_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location2_armor_ap}" name="attr_location2_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location2_armor_enc}" step="any" name="attr_location2_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location2_armor_notes}" name="attr_location2_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location2_armor_equipped}" name="attr_location2_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location3_name}" name="attr_location3_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location3_armor_type}" name="attr_location3_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location3_armor_ap}" name="attr_location3_armor_ap" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location3_armor_enc}" step="any" name="attr_location3_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location3_armor_notes}" name="attr_location3_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location3_armor_equipped}" name="attr_location3_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location4_name}" name="attr_location4_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location4_armor_type}" name="attr_location4_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location4_armor_ap}" name="attr_location4_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location4_armor_enc}" step="any" name="attr_location4_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location4_armor_notes}" name="attr_location4_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location4_armor_equipped}" name="attr_location4_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location5_name}" name="attr_location5_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location5_armor_type}" name="attr_location5_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location5_armor_ap}" name="attr_location5_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location5_armor_enc}" step="any" name="attr_location5_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location5_armor_notes}" name="attr_location5_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location5_armor_equipped}" name="attr_location5_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location6_name}" name="attr_location6_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location6_armor_type}" name="attr_location6_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location6_armor_ap}" name="attr_location6_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location6_armor_enc}" step="any" name="attr_location6_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location6_armor_notes}" name="attr_location6_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location6_armor_equipped}" name="attr_location6_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <div class="sheet-tr sheet-wide-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location7_name}" name="attr_location7_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location7_armor_type}" name="attr_location7_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location7_armor_ap}" name="attr_location7_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location7_armor_enc}" step="any" name="attr_location7_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location7_armor_notes}" name="attr_location7_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location7_armor_equipped}" name="attr_location7_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location8_display" value="1">
            <div class="sheet-tr sheet-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location8_name}" name="attr_location8_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location8_armor_type}" name="attr_location8_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location8_armor_ap}" name="attr_location8_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location8_armor_enc}" step="any" name="attr_location8_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location8_armor_notes}" name="attr_location8_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location8_armor_equipped}" name="attr_location8_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location9_display" value="1">
            <div class="sheet-tr sheet-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location9_name}" name="attr_location9_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location9_armor_type}" name="attr_location9_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location9_armor_ap}" name="attr_location9_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location9_armor_enc}" step="any" name="attr_location9_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location9_armor_notes}" name="attr_location9_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location9_armor_equipped}" name="attr_location9_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location10_display" value="1">
            <div class="sheet-tr sheet-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location10_name}" name="attr_location10_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location10_armor_type}" name="attr_location10_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location10_armor_ap}" name="attr_location10_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location10_armor_enc}" step="any" name="attr_location10_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location10_armor_notes}" name="attr_location10_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location10_armor_equipped}" name="attr_location10_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location11_display" value="1">
            <div class="sheet-tr sheet-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location11_name}" name="attr_location11_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location11_armor_type}" name="attr_location11_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location11_armor_ap}" name="attr_location11_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location11_armor_enc}" step="any" name="attr_location11_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location11_armor_notes}" name="attr_location11_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location11_armor_equipped}" name="attr_location11_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
            <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_location12_display" value="1">
            <div class="sheet-tr sheet-toggle sheet-hl">
                <div class="sheet-td sheet-text-center"><input type="text" class="sheet-armor-field sheet-text-center sheet-usrinput" title="@{location12_name}" name="attr_location12_name" value=""></div>
                <div class="sheet-td"><input type="text" class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location12_armor_type}" name="attr_location12_armor_type" value=""></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location12_armor_ap}" name="attr_location12_armor_ap" step="1" min="0" value="0"></div>
                <div class="sheet-td"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{location12_armor_enc}" step="any" name="attr_location12_armor_enc" min="0" value="0"></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-usrinput sheet-text-center sheet-full-width" title="@{location12_armor_notes}" name="attr_location12_armor_notes"></div>
                <div class="sheet-td">
                    <select class="sheet-usrinput sheet-text-center sheet-armor-field" title="@{location12_armor_equipped}" name="attr_location12_armor_equipped">
                        <option value="1" data-i18n="worn" selected>Worn</option>
                        <option value="0" data-i18n="pack">Pack</option>
                        <option value="mount" data-i18n="transport">Transport</option>
                        <option value="camp" data-i18n="camp">Camp</option>
                        <option value="stash" data-i18n="stash">Stash</option>
                        <option value="homebase" data-i18n="homebase">Homebase</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="sheet-text-right">
            <label class="sheet-left" data-i18n="worn_armor_enc">Worn Armor ENC</label>&nbsp;
            <span data-i18n="actual">Actual</span>&nbsp;<input type="number" class="sheet-value sheet-number-width" title="@{armor_enc}" name="attr_armor_enc" value="0" readonly>&nbsp;
            <span data-i18n="effective">Effective</span>&nbsp;<input type="number" class="sheet-value sheet-number-width" title="@{effective_armor_enc}" name="attr_effective_armor_enc" value="0" readonly>&nbsp;
            <label class="sheet-left" data-i18n="pack_armor_enc">Pack Armor ENC</label>&nbsp;
            <input type="number" class="sheet-value sheet-number-width" title="@{armor_enc_carried}" name="attr_armor_enc_carried" value="0" readonly>&nbsp;
            <label class="sheet-left" data-i18n="armor-penalty">Armor Penalty</label>&nbsp;
            <input type="number" class="sheet-value sheet-number-width" title="@{armor_penalty}" name="attr_armor_penalty" value="0" readonly>
        </div>
    </div>
</div>

<!-- Weapons -->
<div class="sheet-section">
    <h2 data-i18n="weapons">Weapons</h2>

    <input type="hidden" name="attr_weapon_buttons" value="">

<div class="sheet-bmargin">
    <input type='checkbox' class="sheet-hidden sheet-deep-toggle" name='attr_reach_enabled' value="1" checked/>
    <div class="sheet-flex">
        <div class="sheet-checkbox-width sheet-th"><span class="sheet-pictos sheet-help" data-i18n-title="include_in_combat_rolls">S</span></div>
        <div class="sheet-th sheet-weapon-name" data-i18n="melee_weapon">Melee Weapon</div>
        <div class="sheet-th sheet-play sheet-button-width"></div>
        <div class="sheet-th sheet-weapon-damage" data-i18n="damage">Damage</div>
        <div class="sheet-th sheet-checkbox-width sheet-pictos sheet-help" data-i18n-title="damage_modifier">+</div>
        <div class="sheet-th sheet-weapon-size"><span data-i18n="size">Size</span></div>
        <div class="sheet-th sheet-deep-toggle sheet-weapon-reach"><span data-i18n="reach">Reach</span></div>
        <div class="sheet-th sheet-number-width-sm sheet-help" data-i18n-title="armor-points" title="Armor Points" data-i18n="ap">AP</div>
        <div class="sheet-th sheet-edit sheet-weapon-hp sheet-help" data-i18n-title="hit-points" title="Hit Points" data-i18n="hp">HP</div>
        <div class="sheet-th sheet-play sheet-number-width-sm sheet-help" data-i18n-title="hit-points" title="Hit Points" data-i18n="hp">HP</div>
        <div class="sheet-th sheet-grow"><span data-i18n="traits">Traits</span> / <span data-i18n="effects">Effects</span> / <span data-i18n="notes">Notes</span></div>
        <div class="sheet-th sheet-edit sheet-number-width" data-i18n="enc">ENC</div>
        <div class="sheet-th sheet-number-width-sm sheet-help" data-i18n-title="quantity" title="Quantity">#</div>
        <div class="sheet-th sheet-equipment-location" data-i18n="location">Location</div>
    </div>
    <fieldset class="repeating_meleeweapon">
        <div class="sheet-flex">
            <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_favored}" name="attr_favored" value="1"><span class="sheet-checkico">S</span></div>
            <div class="sheet-td sheet-weapon-name sheet-hover-btn">
                <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                <input type="hidden" name="attr_id" value="unset, please change any value in this weapon" readonly>
            </div>
            <div class="sheet-td sheet-play sheet-button-width sheet-text-center"><button type="roll" class="sheet-d100" title="%{$ID_damage}" name="roll_damage" value="@{roll_display}&{template:default} {{red=1}} {{name=@{name}}} {{character=@{character_name}}} {{^{damage}=[[@{damage}+@{damage_mod_toggle}]]}} {{^{size}=@{size}}} {{notes=@{notes}}}"></button></div>
            <div class="sheet-td sheet-weapon-damage"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_damage}" name="attr_damage"></div>
            <div class="sheet-td sheet-checkbox-width sheet-text-center"><input type="checkbox" name="attr_damage_mod_toggle" title="@{$ID_damage_mod_toggle}" value="@{damage_mod}" checked><span class="sheet-checkico">+</span></div>
            <div class="sheet-td sheet-weapon-size"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_size}" name="attr_size"></div>
            <div class="sheet-td sheet-deep-toggle sheet-weapon-reach"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_reach}" name="attr_reach"></div>
            <div class="sheet-td sheet-number-width-sm"><input type="number" class="sheet-full-width sheet-usrinput" title="@{$ID_ap}" name="attr_ap"></div>
            <div class="sheet-td sheet-edit sheet-weapon-hp"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp}" name="attr_hp" step="1" min="0" value="0">/<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp|max}" name="attr_hp_max" step="1" min="0" value="0"></div>
            <div class="sheet-td sheet-play sheet-number-width-sm"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp}" name="attr_hp" step="1" min="0" value="0"></div>
            <div class="sheet-td sheet-grow"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_notes}" name="attr_notes"></div>
            <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-edit sheet-number-width sheet-usrinput" step="1" min="0" title="@{$ID_enc}" name="attr_enc" value="0"></div>
            <div class="sheet-td sheet-number-width-sm"><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_quantity}" name="attr_quantity" value="1"></div>
            <div class="sheet-td sheet-equipment-location">
                <select class="sheet-full-width sheet-usrinput sheet-text-center sheet-armor-field" title="@{$ID_location}" name="attr_location">
                    <option value="loadout" data-i18n="worn" selected>Worn</option>
                    <option value="pack" data-i18n="pack">Pack</option>
                    <option value="mount" data-i18n="transport">Transport</option>
                    <option value="camp" data-i18n="camp">Camp</option>
                    <option value="stash" data-i18n="stash">Stash</option>
                    <option value="homebase" data-i18n="homebase">Homebase</option>
                </select>
            </div>
        </div>
    </fieldset>
</div>

<input type='checkbox' class="sheet-hidden sheet-deep-toggle" name='attr_fire_rate_enabled' value="1"/>
<div class="sheet-bmargin">
    <div class="sheet-flex">
        <div class="sheet-checkbox-width sheet-th"><span class="sheet-pictos sheet-help" data-i18n-title="include_in_combat_rolls">S</span></div>
        <div class="sheet-th sheet-grow sheet-weapon-name" data-i18n="ranged_weapon">Ranged Weapon</div>
        <div class="sheet-th sheet-play sheet-button-width"></div>
        <div class="sheet-th sheet-weapon-damage" data-i18n="damage">Damage</div>
        <div class="sheet-th sheet-checkbox-width sheet-pictos sheet-help" data-i18n-title="damage_modifier">+</div>
        <div class="sheet-th sheet-weapon-size"><span data-i18n="force">Force</span></div>
        <div class="sheet-th sheet-weapon-reach"><span data-i18n="range">Range</span></div>
        <div class="sheet-th sheet-number-width-sm sheet-help" data-i18n-title="armor-points" title="Armor Points" data-i18n="ap">AP</div>
        <div class="sheet-th sheet-edit sheet-weapon-hp sheet-help" data-i18n-title="hit-points" title="Hit Points" data-i18n="hp">HP</div>
        <div class="sheet-th sheet-play sheet-number-width-sm sheet-help" data-i18n-title="hit-points" title="Hit Points" data-i18n="hp">HP</div>
        <div class="sheet-th sheet-number-width" data-i18n="load">Load</div>
        <div class="sheet-th sheet-number-width-sm sheet-help" data-i18n-title="impale_size" data-i18n="impale_size-abrv">IS</div>
        <div class="sheet-th sheet-weapon-reach sheet-deep-toggle" data-i18n="fire_rate">Fire Rate</div>
        <div class="sheet-th sheet-weapon-hp sheet-help" data-i18n-title="ammunition" title="Ammunition" data-i18n="ammunition-abrv4">Ammo</div>
        <div class="sheet-th sheet-edit sheet-number-width" data-i18n="enc">ENC</div>
        <div class="sheet-th sheet-number-width-sm sheet-help" data-i18n-title="quantity" title="Quantity">#</div>
        <div class="sheet-th sheet-equipment-location" data-i18n="location">Location</div>
        <div class="sheet-th sheet-pictos sheet-checkbox-width sheet-help" data-i18n-title="show_details">E</div>
    </div>
    <fieldset class="repeating_rangedweapon">
        <div class="sheet-flex">
            <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_favored}" name="attr_favored" value="1"><span class="sheet-checkico">S</span></div>
            <div class="sheet-td sheet-full-width sheet-hover-btn">
                <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                <input type="hidden" name="attr_id" value="unset, please change any value in this weapon" readonly>
            </div>
            <div class="sheet-td sheet-play sheet-button-width sheet-text-center"><button type="roll" class="sheet-d100" title="%{$ID_damage}" name="roll_damage" value="@{roll_display}&{template:default} {{red=1}} {{name=@{name}}} {{character=@{character_name}}} {{^{damage}=[[@{damage}+@{damage_mod_toggle}]]}} {{^{force}=@{force}}} {{^{impale_size}=@{impale_size}}} {{notes=@{notes}}}"></button></div>
            <div class="sheet-td sheet-weapon-damage"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_damage}" name="attr_damage"></div>
            <div class="sheet-td sheet-checkbox-width sheet-text-center"><input type="checkbox" name="attr_damage_mod_toggle" title="@{$ID_damage_mod_toggle}" value="@{damage_mod}" checked><span class="sheet-checkico">+</span></div>
            <div class="sheet-td sheet-weapon-size"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_force}" name="attr_force"></div>
            <div class="sheet-td sheet-weapon-reach"><input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_range}" name="attr_range"></div>
            <div class="sheet-td sheet-number-width-sm"><input type="number" class="sheet-full-width sheet-usrinput" title="@{$ID_ap}" name="attr_ap"></div>
            <div class="sheet-td sheet-edit sheet-weapon-hp"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp}" name="attr_hp" step="1" min="0" value="0">/<input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp|max}" name="attr_hp_max" step="1" min="0" value="0"></div>
            <div class="sheet-td sheet-play sheet-number-width-sm"><input type="number" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_hp}" name="attr_hp" step="1" min="0" value="0"></div>
            <div class="sheet-td sheet-number-width"><input type="number" class="sheet-number-width sheet-usrinput" step="1" min="0" title="@{$ID_load}" name="attr_load" value="1"></div>
            <div class="sheet-td sheet-number-width-sm"><input type="text" class="sheet-number-width-sm sheet-usrinput" title="@{$ID_impale_size}" name="attr_impale_size" value=""></div>
            <div class="sheet-td sheet-weapon-reach sheet-deep-toggle"><input type="text" class="sheet-weapon-reach sheet-usrinput" title="@{$ID_fire_rate}" name="attr_fire_rate" value=""></div>
            <div class="sheet-td sheet-weapon-hp"><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_ammo}" name="attr_ammo" value="0">/<input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_ammo|max}" name="attr_ammo_max" value="0"></div>
            <div class="sheet-td sheet-edit sheet-number-width"><input type="number" class="sheet-number-width sheet-usrinput" step="1" min="0" title="@{$ID_enc}" name="attr_enc" value="0"></div>
            <div class="sheet-td sheet-number-width-sm"><input type="number" class="sheet-number-width-sm sheet-usrinput" step="1" min="0" title="@{$ID_quantity}" name="attr_quantity" value="1"></div>
            <div class="sheet-td sheet-equipment-location">
                <select class="sheet-full-width sheet-usrinput sheet-text-center sheet-armor-field" title="@{$ID_location}" name="attr_location">
                    <option value="loadout" data-i18n="worn" selected>Worn</option>
                    <option value="pack" data-i18n="pack">Pack</option>
                    <option value="mount" data-i18n="transport">Transport</option>
                    <option value="camp" data-i18n="camp">Camp</option>
                    <option value="stash" data-i18n="stash">Stash</option>
                    <option value="homebase" data-i18n="homebase">Homebase</option>
                </select>
            </div>
            <div class="sheet-td sheet-checkbox-width sheet-text-center"><input type="checkbox" name="attr_details" title="@{$ID_details}" value="1" checked><span class="sheet-checkico">E</span></div>
        </div>
        <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1" checked>
        <div class="sheet-toggle">
            <!-- Notes -->
            <div class="sheet-flex">
                <div>
                    &emsp;
                    <label class="sheet-left"><span data-i18n="traits">Traits</span> / <span data-i18n="effects">Effects</span> / <span data-i18n="notes">Notes</span></label>
                </div>
                <div class="sheet-grow">
                    <input type="text" class="sheet-full-width sheet-usrinput" title="@{$ID_notes}" name="attr_notes">
                </div>
            </div>
        </div>
    </fieldset>
</div>

    <div class="sheet-text-right">
        <label class="sheet-left" data-i18n="worn_melee_enc">Worn Melee ENC</label>&nbsp;
        <input type="number" class="sheet-value sheet-number-width" title="@{meleeweapon_enc}" name="attr_meleeweapon_enc" value="0" readonly>&nbsp;
        <label class="sheet-left" data-i18n="pack_melee_enc">Pack Melee ENC</label>&nbsp;
        <input type="number" class="sheet-value sheet-number-width" title="@{meleeweapon_enc_carried}" name="attr_meleeweapon_enc_carried" value="0" readonly>&nbsp;
        <label class="sheet-left" data-i18n="worn_ranged_enc">Worn Ranged ENC</label>&nbsp;
        <input type="number" class="sheet-value sheet-number-width" title="@{rangedweapon_enc}" name="attr_rangedweapon_enc" value="0" readonly>&nbsp;
        <label class="sheet-left" data-i18n="pack_ranged_enc">Pack Ranged ENC</label>&nbsp;
        <input type="number" class="sheet-value sheet-number-width" title="@{rangedweapon_enc_carried}" name="attr_rangedweapon_enc_carried" value="0" readonly>&nbsp;
    </div>
</div>

<div class="sheet-flex">
    <div class="sheet-half-col">
        <!-- Gear -->
        <div class="sheet-section sheet-rmargin">
            <h2 data-i18n="gear">Gear</h2>

            <div class="sheet-bmargin">
                <div class="sheet-flex">
                    <div class="sheet-th sheet-grow"><span data-i18n="item">Item</span></div>
                    <div class="sheet-play sheet-button-width sheet-th"></div>
                    <div class="sheet-th sheet-number-width"><span data-i18n="enc">ENC</span></div>
                    <div class="sheet-th sheet-number-width"><span data-i18n-title="quantity" title="Quantity">#</span></div>
                    <div class="sheet-th sheet-equipment-location"><span data-i18n="location">Location</span></div>
                    <div class="sheet-checkbox-width sheet-th"><span class="sheet-pictos" data-i18n-title="details-tooltip">E</span></div>
                </div>
                <fieldset class="repeating_equipment">
                    <div class="sheet-flex">
                        <div class="sheet-td sheet-grow sheet-hover-btn">
                            <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                            <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                            <input type="hidden" name="attr_id" value="unset, please change any value in this item" readonly>
                        </div>
                        <div class="sheet-td sheet-play sheet-button-width sheet-text-center"><button type="roll" class="sheet-effect sheet-full-width" title="%{$ID_effect}" name="roll_effect" value="@{roll_display}&{template:effect} {{name=@{name}}} {{character=@{character_name}}} {{traits=@{traits}}} {{description=@{description}}}"></button></div>
                        <div class="sheet-td sheet-number-width"><input type="number" step="any" class="sheet-full-width sheet-usrinput" title="@{$ID_enc}" name="attr_enc" value="0"></div>
                        <div class="sheet-td sheet-number-width"><input type="number" step="1" class="sheet-full-width sheet-usrinput" title="@{$ID_quantity}" name="attr_quantity" value="1"></div>
                        <div class="sheet-td sheet-equipment-location">
                            <select class="sheet-full-width sheet-usrinput sheet-text-center sheet-armor-field" title="@{$ID_location}" name="attr_location">
                                <option value="loadout" data-i18n="worn" selected>Worn</option>
                                <option value="pack" data-i18n="pack">Pack</option>
                                <option value="mount" data-i18n="transport">Transport</option>
                                <option value="camp" data-i18n="camp">Camp</option>
                                <option value="stash" data-i18n="stash">Stash</option>
                                <option value="homebase" data-i18n="homebase">Homebase</option>
                            </select>
                        </div>
                        <div class="sheet-td sheet-checkbox-width"><input type="checkbox" title="@{$ID_details}" name="attr_details" value="1"><span class="sheet-checkico">E</span></div>
                    </div>
                    <input type="checkbox" class="sheet-hidden sheet-toggle" name="attr_details" value="1">
                    <div class="sheet-toggle">
                        <div class="sheet-edit">
                            <div><label class="sheet-left" data-i18n="traits">Traits</label></div>
                            <textarea class="sheet-full-width sheet-gear-note" name="attr_traits"></textarea>
                            <div><label class="sheet-left" data-i18n="description">Description</label></div>
                            <textarea class="sheet-full-width sheet-gear-note" name="attr_description"></textarea>
                        </div>
                        <div class="sheet-play">
                            <div><span class="sheet-usrnotes sheet-italic" name="attr_traits"></span></div>
                            <div><span class="sheet-usrnotes" name="attr_description"></span></div>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="sheet-text-right">
                <label class="sheet-left" data-i18n="worn_gear_enc">Worn Gear ENC</label>&nbsp;
                <input type="number" class="sheet-value sheet-number-width" title="@{equipment_enc}" name="attr_equipment_enc" value="0" readonly>&nbsp;
                <label class="sheet-left" data-i18n="pack_gear_enc">Pack Gear ENC</label>&nbsp;
                <input type="number" class="sheet-value sheet-number-width" title="@{equipment_enc_carried}" name="attr_equipment_enc_carried" value="0" readonly>&nbsp;
            </div>
        </div>

        <!-- Encumberance -->
        <div class="sheet-section sheet-grow sheet-rmargin">
            <div class="sheet-flex-centered">
                <h2 data-i18n="encumbrance">Encumbrance</h2>
                <div class="sheet-grow sheet-text-right">
                    <label class="sheet-checkbox">
                        <input type='checkbox' title="@{pack_equipped}" name='attr_pack_equipped' value="1" checked/><span>3</span>
                        <span class="sheet-bold" data-i18n="equip-pack">Equip Pack</span>
                    </label>
                </div>
            </div>

            <div class="sheet-table">
                <div class="sheet-tr">
                    <div class="sheet-th" data-i18n="temp">Temp</div>
                    <div class="sheet-th" data-i18n="current">Current</div>
                    <div class="sheet-th" data-i18n="carrying-load">Carrying Load</div>
                    <div class="sheet-th" data-i18n="skills">Skills</div>
                    <div class="sheet-th" data-i18n="move">Move</div>
                </div>
                <div class="sheet-tr">
                    <div class="sheet-td"><input type="number" step="any" class="sheet-number-width sheet-usrinput" title="@{encumbrance_temp}" name="attr_encumbrance_temp" value="0"></div>
                    <div class="sheet-td"><input type="number" step="any" class="sheet-number-width sheet-value" title="@{encumbrance_current}" name="attr_encumbrance_current" value="0" readonly></div>
                    <div class="sheet-td">
                        <select class="sheet-full-width sheet-disabled sheet-text-center" title="@{encumbrance_load}" name="attr_encumbrance_load">
                            <option value="0" data-i18n="normal" selected>Normal</option>
                            <option value="1" data-i18n="medium">Medium</option>
                            <option value="2" data-i18n="strenuous">Strenuous</option>
                            <option value="3" data-i18n="impossible">Impossible</option>
                        </select>
                    </div>
                    <div class="sheet-td">
                        <select class="sheet-full-width sheet-disabled sheet-text-center" title="@{encumbrance_skills}" name="attr_encumbrance_skills">
                            <option value="0" data-i18n="standard" selected>Standard</option>
                            <option value="1" data-i18n="1_grade_harder">1 grade harder</option>
                            <option value="2" data-i18n="2_grades_harder">2 grades harder</option>
                            <option value="3" data-i18n="impossible">Impossible</option>
                        </select>
                    </div>
                    <div class="sheet-td">
                        <select class="sheet-full-width sheet-disabled sheet-text-center" title="@{movement_rate_enc}" name="attr_movement_rate_enc">
                            <option value="+0" data-i18n="normal">Normal</option>
                            <option value="-2">-2</option>
                            <option value="*.5" data-i18n="halved">Halved</option>
                            <option value="*0" data-i18n="impossible">Impossible</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="sheet-hidden">
                <input type="number" step="any" name="attr_armor_enc" value="0" readonly>
                <input type="number" step="any" name="attr_armor_penalty" value="0" readonly>
                <input type="number" step="any" name="attr_melee_weapons_enc" value="0" readonly>
                <input type="number" step="any" name="attr_ranged_weapons_enc" value="0" readonly>
                <input type="number" step="any" name="attr_loadout_enc" value="0" readonly>
                <input type="number" step="any" name="attr_pack_enc" value="0" readonly>
                <input type="number" step="any" name="attr_currency_enc" value="0" readonly>
                <input type="number" name="attr_burdened_enc" value="22" readonly>
                <input type="number" name="attr_overloaded_enc" value="33" readonly>
                <input type="number" name="attr_encumbrance_current_max" value="44" readonly>
            </div>
        </div>
    </div>
    
    <!-- Wealth -->
    <div class="sheet-section sheet-rpad sheet-half-col">
        <h2 data-i18n="money-and-wealth">Money & Wealth</h2>

        <div class="sheet-bmargin">
            <div class="sheet-flex sheet-full-width">
                <div class="sheet-th sheet-grow"><span data-i18n="currency">Currency</span></div>
                <div class="sheet-th sheet-number-width"><span data-i18n="value">Value</span></div>
                <div class="sheet-th sheet-number-width"><span data-i18n="enc">ENC</span></div>
                <div class="sheet-th sheet-number-width"><span data-i18n-title="quantity" title="Quantity">#</span></div>
                <div class="sheet-th sheet-equipment-location"><span data-i18n="location">Location</span></div>
            </div>
            <fieldset class="repeating_currency">
                <div class="sheet-flex">
                    <div class="sheet-td sheet-grow sheet-hover-btn">
                        <input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{$ID_name}" name="attr_name">
                        <button type="roll" class="sheet-id" title="%{$ID_id}" name="roll_id" value="/w gm &{template:default} {{character=@{character_name}}} {{name=@{name}}} {{^{id}=@{id}}}">i</button>
                        <input type="hidden" name="attr_id" value="unset, please change any value in this currency" readonly>
                    </div>
                    <div class="sheet-td sheet-number-width"><input type="number" step="any" class="sheet-full-width sheet-usrinput" title="@{$ID_value}" name="attr_value" value="1"></div>
                    <div class="sheet-td sheet-number-width"><input type="number" step="any" class="sheet-full-width sheet-usrinput" title="@{$ID_enc}" name="attr_enc" value="0"></div>
                    <div class="sheet-td sheet-number-width"><input type="number" step="any" class="sheet-full-width sheet-usrinput" title="@{$ID_quantity}" name="attr_quantity" value="1"></div>
                    <div class="sheet-td sheet-equipment-location">
                        <select class="sheet-full-width sheet-usrinput sheet-text-center sheet-armor-field" title="@{$ID_location}" name="attr_location">
                            <option value="loadout" data-i18n="worn" selected>Worn</option>
                            <option value="pack" data-i18n="pack">Pack</option>
                            <option value="mount" data-i18n="transport">Transport</option>
                            <option value="camp" data-i18n="camp">Camp</option>
                            <option value="stash" data-i18n="stash">Stash</option>
                            <option value="homebase" data-i18n="homebase">Homebase</option>
                        </select>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="sheet-text-right">
            <label class="sheet-left" data-i18n="worn_currency_enc">Worn Currency ENC</label>&nbsp;
            <input type="number" class="sheet-value sheet-number-width" title="@{currency_enc}" name="attr_currency_enc" value="0" readonly>&nbsp;
            <label class="sheet-left" data-i18n="pack_currency_enc">Pack Currency ENC</label>&nbsp;
            <input type="number" class="sheet-value sheet-number-width" title="@{currency_enc_carried}" name="attr_currency_enc_carried" value="0" readonly>&nbsp;
        </div>

        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-td sheet-text-left"><label class="sheet-left" data-i18n="income">Income</label></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{income}" name="attr_income" value=""></div>
            </div>
            <div class="sheet-tr">
                <div class="sheet-td sheet-text-left"><label class="sheet-left" data-i18n="expenses">Expenses</label></div>
                <div class="sheet-td sheet-full-width"><input type="text" class="sheet-full-width sheet-usrinput sheet-text-left" title="@{expenses}" name="attr_expenses" value=""></div>
            </div>
        </div>
        <div>
            <label class="sheet-left" data-i18n="other">Other</label>
            <textarea class="sheet-usrnotes" name="attr_wealth_other"></textarea>
        </div>
    </div>
</div>
        </div>
    </div>

    <div class='sheet-character-tab-background'>
        <div class="sheet-major">
            <div class="sheet-section">
    <h2 data-i18n="background">Background</h2>

    <div class="sheet-flex sheet-bmargin">
        <div class="sheet-half-col sheet-rmargin">
            <label class="sheet-left" data-i18n="organizations">Organizations</label>
            <textarea class="sheet-background-notes sheet-usrnotes" title="@{cults_notes}" name="attr_cults_notes"></textarea>
        </div>
        <div class="sheet-half-col">
            <label class="sheet-left" data-i18n="contacts">Contacts</label>
            <textarea class="sheet-background-notes sheet-usrnotes" title="@{contacts_notes}" name="attr_contacts_notes"></textarea>
        </div>
    </div>

    <div class="sheet-flex sheet-bmargin">
        <div class="sheet-half-col sheet-rmargin">
            <label class="sheet-left" data-i18n="community">Community</label>
            <textarea class="sheet-background-notes sheet-usrnotes" title="@{community_notes}" name="attr_community_notes"></textarea>
        </div>
        <div class="sheet-half-col">
            <label class="sheet-left" data-i18n="allies">Allies</label>
            <textarea class="sheet-background-notes sheet-usrnotes" title="@{allies_notes}" name="attr_allies_notes"></textarea>
        </div>
    </div>

    <div class="sheet-flex sheet-bmargin">
        <div class="sheet-half-col sheet-rmargin">
            <label class="sheet-left" data-i18n="family">Family</label>
            <textarea class="sheet-background-notes sheet-usrnotes" title="@{family_notes}" name="attr_family_notes"></textarea>
        </div>
        <div class="sheet-half-col">
            <label class="sheet-left" data-i18n="enemies">Enemies</label>
            <textarea class="sheet-background-notes sheet-usrnotes" title="@{enemies_notes}" name="attr_enemies_notes"></textarea>
        </div>
    </div>
</div>
        </div>
    </div>

    <div class='sheet-character-tab-notes'>
        <div class="sheet-section">
    <h2 data-i18n="notes">Notes</h2>

    <textarea class="sheet-character-notes sheet-usrnotes" title="@{sheet_notes}" name="attr_sheet_notes"></textarea>
</div>
    </div>

    <div class='sheet-character-tab-import'>
        <div class="sheet-section">
    <h2 data-i18n="import">Import</h2>

    <div class="sheet-flex">
        <div class="sheet-half-col sheet-rmargin">
            <div class="sheet-flex"><div class="sheet-th sheet-grow sheet-full-width" data-i18n="import_data">Import Data</div></div>
            <div class="sheet-bmargin">
                <textarea class="sheet-import-data sheet-bmargin" name="attr_import_json_data"></textarea>
            </div>

            <div class="sheet-flex sheet-bmargin">
                <div class="sheet-rmargin">
                    <label class="sheet-left sheet-help" title="Character to import from data">#</label>
                    <input type="number" class="sheet-usrinput sheet-number-width-sm" title="@{import_character}" name="attr_import_character" value="1" min="1">
                </div>
                <button type="action" name="act_import_as_minor" class="sheet-action-btn sheet-grow sheet-text-center" data-i18n="import_as_minor_character">Import as Minor Character</button>
                <button type="action" name="act_import_as_major" class="sheet-action-btn sheet-grow sheet-text-center" data-i18n="import_as_major_character">Import as Major Character</button>
            </div>

            <span style="color: red" name="attr_import_errors"></span>

            <div class="sheet-flex"><div class="sheet-th sheet-grow sheet-full-width" data-i18n="imported_spirit_data">Imported Spirit Data</div></div>
            <fieldset class="repeating_fetish">
                <input type="hidden" name="attr_name" value=""/>
                <label><span name="attr_name"></span></label>
                <div class="sheet-bmargin">
                    <textarea name="attr_fetish_json" readonly></textarea>
                </div>
            </fieldset>
        </div>
        <div class="sheet-half-col">
            <div class="sheet-flex"><div class="sheet-th sheet-full-width" data-i18n="instructions">Instructions</div></div>

            <ol>
                <li><span data-i18n="import_step_one">Visit the Encounter Generator</span>: <button type="roll" class="sheet-link" name="roll_meg_link" value="/w gm http://skoll.xyz/mythras_eg/">http://skoll.xyz/mythras_eg/</button></li>
                <li data-i18n="import_step_two">Find your desired enemy and click to visit the template page.</li>
                <li data-i18n="import_step_three">Note the number at the end of the URL.  This is the enemy ID.  For example, if the template URL is "https://mythras.skoll.xyz/enemy_template/195/" the ID is "195".</li>
                <li><span data-i18n="import_step_fourA">Enter the ID here</span>: <input type="number" class="sheet-usrinput sheet-number-width" name="attr_meg_enemy_id"/></li>
                <li><span data-i18n="import_step_fourB">Enter the number desired here</span>: <input type="number" class="sheet-usrinput sheet-number-width" name="attr_meg_enemy_amount" value="6"/></li>
                <li><span data-i18n="import_step_fourC">Then click this to get and follow a link to the enemies json data</span>: <button type="roll" class="sheet-link" name="roll_meg_link" value="/w gm http://skoll.xyz/mythras_eg/generate_enemies_json/?id=@{meg_enemy_id}&amount=@{meg_enemy_amount}" data-i18n="generate_data_link">Generate Data Link</button></li>
                <li data-i18n="import_step_five">Paste the contents of the data page into "Import Data" and set # to the character you wish to import.</li>
                <li data-i18n="import_step_six">Click "Import as Minor Character" or "Import as Major Character"</li>
            </ol>

            <div class="sheet-infomsg">
                <ul>
                    <li data-i18n="import_infomsg1">To import another character from the same data, simply add a new character, re-use the same import data and select a different character number to import.</li>
                    <li data-i18n="import_infomsg2">Only the first character found in the data will be imported.  Spirits associated with that character will be parsed out under "Imported Spirit Data" so they may be imported as individual roll20 characters.</li>
                    <li data-i18n="import_infomsg3">The import will determine if the character is a creature or spirit and set the sheet appropriately.</li>
                </ul>
            </div>

            <div class="sheet-noticemsg">
                <ul>
                    <li data-i18n="import_noticemsg1">Some browsers may display the import data in a user-friendly way, but for this we need the raw text data.  There will likely be a tab for the raw data and/or a button to copy it.</li>
                    <li data-i18n="import_spirit_noticemsg1">It is recommended to delete imported spirit data after use.  This will help minimize the amount of data retained in this sheet.</li>
                </ul>
            </div>

            <div class="sheet-warnmsg">
                <span data-i18n="import_warnmsg1">It is always recommended to import with a fresh character.  Importing on an existing character will overwrite data and may have unexpected results.</span>
            </div>
        </div>
    </div>
</div>
    </div>
</div>
    <div class="sheet-ship">Ship</div>
    
    
    <!-- M-Space Star System -->
<div class="sheet-star-system sheet-flex">
    <div class="sheet-section sheet-rmargin">
        <h2 data-i18n="stats">Stats</h2>
        <div class="flex">
            <label class="sheet-left" data-i18n="name">Name</label>
            <input type="text" class="sheet-full-width sheet-usrinput" title="@{character_name}" name="attr_character_name">
        </div>
        <div>
            <div class="system-label"><span data-i18n="sub-sector" class="bold">Sub Sector</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_subsector"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="hex" class="bold">Hex</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_hex"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="star-type" class="bold">Star Type</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_star"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="planets" class="bold">Planets</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_planets"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="habitable" class="bold">Habitable</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_habitable"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="starports" class="bold">Starports</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_starports"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="astroid-belt" class="bold">Astroid Belt</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_astroid_belt"></div>
        </div>
        <div><span data-i18n="notes" class="bold">Notes</span>:</div>
        <div><textarea name="attr_system_notes"></textarea></div>
    </div>
    <div>
        <div class="sheet-section sheet-bmargin">
            <h2><span data-i18n="species" class="bold">Species</span></h2>
            <fieldset class="repeating_systemspecies">
                <div class="sheet-bottom-border"></div>
                <div class="sheet-spacer"></div>
                <div><span data-i18n="name" class="bold">Name</span>: <input type="text" name="attr_name"></div>
                <div><span data-i18n="description" class="bold">Description</span>:</div>
                <div><textarea style="height: 5em" name="attr_description"></textarea></div>
            </fieldset>
        </div>
        <div class="sheet-section sheet-bmargin">
            <h2><span data-i18n="worlds" class="bold">Worlds</span></h2>
            <fieldset class="repeating_systemworld">
                <div class="sheet-bottom-border"></div>
                <div class="sheet-spacer"></div>
                <div><span data-i18n="name" class="bold">Name</span>: <input type="text" name="attr_name"></div>
                <div><span data-i18n="description" class="bold">Description</span>:</div>
                <div><textarea style="height: 5em" name="attr_description"></textarea></div>
            </fieldset>
        </div>
    </div>
</div>
</div>

<!-- Roll Templates -->
<!-- Default Roll Template -->
<!-- @{roll_display}&{template:default} {{name=@{name}}} @{name_display} {{color=#}}{{roll=[[1d8]]}} -->
<rolltemplate class="sheet-rolltemplate-default">
    <div class="sheet-border {{#red}}red{{/red}}{{#orange}}orange{{/orange}}{{#yellow}}yellow{{/yellow}}{{#green}}green{{/green}}{{#blue}}blue{{/blue}}{{#purple}}purple{{/purple}}{{#gray}}gray{{/gray}}">
        <div class="sheet-header {{#red}}red{{/red}}{{#orange}}orange{{/orange}}{{#yellow}}yellow{{/yellow}}{{#green}}green{{/green}}{{#blue}}blue{{/blue}}{{#purple}}purple{{/purple}}{{#gray}}gray{{/gray}}">
            <div class="sheet-character">{{character}}</div>
            <div class="sheet-name">{{name}}</div>
        </div>
        {{#allprops() character name notes red orange yellow green blue indigo purple gray}}
        <div class="sheet-listitem">
            <div class="sheet-key">{{key}}:</div>
            <div class="sheet-value">{{value}}</div>
        </div>
        {{/allprops() character name notes red orange yellow green blue indigo purple gray}}
        {{#notes}}
        <div class="sheet-listitem">{{notes}}</div>
        {{/notes}}
    </div>
</rolltemplate>
<!-- Default Roll Template -->
<!-- @{roll_display}&{template:effect} {{name=@{name}}} @{name_display} {{intensity=@{intensity}}} {{magnitude=@{magnitude}}} {{traits=@{traits}}} @{shaping_traits} {{description=@{description}}} {{page=@{page}}}-->
<rolltemplate class="sheet-rolltemplate-effect">
    <div class="sheet-border">
        <div class="sheet-header">
            <div class="sheet-character">{{character}}</div>
            {{^description}}
            <div class="sheet-name">{{name}}</div>
            {{/description}}
            {{#description}}
            <div class="sheet-name">[{{name}}](~{{character}}|{{effectid}}_description)</div>
            {{/description}}
        </div>
        {{#rolled_skill_name}}
        <div class="sheet-subheader">
            <div>[{{rolled_skill_name}} {{rolled_skill_total}}%](~{{character}}|{{rolled_skill_macro}})</div>
            {{#other_skill_name}}
            <div class="sheet-lmargin sheet-text-right">{{other_skill_name}} {{other_skill_total}}%</div>
            {{/other_skill_name}}
        </div>
        {{/rolled_skill_name}}
        {{#armor_penalty}}
        {{#^rollTotal() armor_penalty 0}}
        <div class="sheet-subheader">
            <div><span data-i18n="armor_penalty">Armor Penalty</span>: {{armor_penalty}}</div>
        </div>
        {{/^rollTotal() armor_penalty 0}}
        {{/armor_penalty}}
        {{#traits}}
        <div class="sheet-traits">{{traits}}</div>
        {{/traits}}
        {{#allprops() character name rolled_skill_name rolled_skill_total rolled_skill_macro other_skill_name other_skill_total armor_penalty effectid traits summary description buttons special_effects_button hit_location_buttons generic_button initiative_button skill_button damage_button}}
        <div class="sheet-traits">{{key}}: {{value}}</div>
        {{/allprops() character name rolled_skill_name rolled_skill_total rolled_skill_macro other_skill_name other_skill_total armor_penalty effectid traits summary description buttons special_effects_button hit_location_buttons generic_button initiative_button skill_button damage_button}}
        {{#summary}}
        <div class="sheet-summary">{{summary}}</div>
        {{/summary}}

        {{#buttons}}
        {{#special_effects_button}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n-title="special_effects" data-i18n="special_effects">Special Effects</span>:</div>
            <div class="sheet-value">[Choose](~{{character}}|{{effectid}}_special_effects)</div>
        </div>
        {{/special_effects_button}}
        {{#hit_location_buttons}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="hit_location">Hit Location</span>:</div>
            <div class="sheet-value">[Low](~target|hit_location_low) [Standard](~target|hit_location) [High](~target|hit_location_high)</div>
        </div>
        {{/hit_location_buttons}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="roll">Roll</span>:</div>
            <div class="sheet-value">{{#generic_button}}[Generic](~{{character}}|{{effectid}}_generic){{/generic_button}} {{#initiative_button}}[Initiative](~{{character}}|{{effectid}}_initiative){{/initiative_button}} {{#skill_button}}[Skill](~{{character}}|{{effectid}}_skill){{/skill_button}} {{#damage_button}}[Damage](~{{character}}|{{effectid}}_damage){{/damage_button}}</div>
        </div>
        {{/buttons}}
    </div>
</rolltemplate>
<!-- Hit Table Roll Template -->
<!-- @{roll_display}&{template:hit-location} {{name=@{name}}} @{name_display} {{roll=[[1d8]]}} -->
<rolltemplate class="sheet-rolltemplate-hit-location">
    <div class="sheet-border">
        <div class="sheet-header">
            <div class="sheet-character">{{character}}</div>
            <div class="sheet-name">{{name}}</div>
        </div>
        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-th" style="width:100%;"><span data-i18n="result">Result</span></div>
                <div class="sheet-th sheet-pictos-three sheet-help" data-i18n-title="passive_block_size" title="Passive Block Size">b</div>
                <div class="sheet-th sheet-pictos sheet-help" data-i18n-title="armor_points" title="Armor Points">U</div>
                <div class="sheet-th sheet-help" data-i18n-title="hit_points" title="Hit Points"><span data-i18n="hp">HP</span></div>
            </div>
            {{#roll}}
            <div class="sheet-tr">
                {{#rollBetween() roll loc1_start loc1_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc1_name}})</div>
                <div class="sheet-td">{{loc1_block}}</div>
                <div class="sheet-td">{{loc1_ap}}</div>
                <div class="sheet-td">{{loc1_hp}}/{{loc1_hp_max}}</div>
                {{/rollBetween() roll loc1_start loc1_end}}
                {{#rollBetween() roll loc2_start loc2_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc2_name}})</div>
                <div class="sheet-td">{{loc2_block}}</div>
                <div class="sheet-td">{{loc2_ap}}</div>
                <div class="sheet-td">{{loc2_hp}}/{{loc2_hp_max}}</div>
                {{/rollBetween() roll loc2_start loc2_end}}
                {{#rollBetween() roll loc3_start loc3_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc3_name}})</div>
                <div class="sheet-td">{{loc3_block}}</div>
                <div class="sheet-td">{{loc3_ap}}</div>
                <div class="sheet-td">{{loc3_hp}}/{{loc3_hp_max}}</div>
                {{/rollBetween() roll loc3_start loc3_end}}
                {{#rollBetween() roll loc4_start loc4_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc4_name}})</div>
                <div class="sheet-td">{{loc4_block}}</div>
                <div class="sheet-td">{{loc4_ap}}</div>
                <div class="sheet-td">{{loc4_hp}}/{{loc4_hp_max}}</div>
                {{/rollBetween() roll loc4_start loc4_end}}
                {{#rollBetween() roll loc5_start loc5_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc5_name}})</div>
                <div class="sheet-td">{{loc5_block}}</div>
                <div class="sheet-td">{{loc5_ap}}</div>
                <div class="sheet-td">{{loc5_hp}}/{{loc5_hp_max}}</div>
                {{/rollBetween() roll loc5_start loc5_end}}
                {{#rollBetween() roll loc6_start loc6_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc6_name}})</div>
                <div class="sheet-td">{{loc6_block}}</div>
                <div class="sheet-td">{{loc6_ap}}</div>
                <div class="sheet-td">{{loc6_hp}}/{{loc6_hp_max}}</div>
                {{/rollBetween() roll loc6_start loc6_end}}
                {{#rollBetween() roll loc7_start loc7_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc7_name}})</div>
                <div class="sheet-td">{{loc7_block}}</div>
                <div class="sheet-td">{{loc7_ap}}</div>
                <div class="sheet-td">{{loc7_hp}}/{{loc7_hp_max}}</div>
                {{/rollBetween() roll loc7_start loc7_end}}
                {{#rollBetween() roll loc8_start loc8_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc8_name}})</div>
                <div class="sheet-td">{{loc8_block}}</div>
                <div class="sheet-td">{{loc8_ap}}</div>
                <div class="sheet-td">{{loc8_hp}}/{{loc8_hp_max}}</div>
                {{/rollBetween() roll loc8_start loc8_end}}
                {{#rollBetween() roll loc9_start loc9_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc9_name}})</div>
                <div class="sheet-td">{{loc9_block}}</div>
                <div class="sheet-td">{{loc9_ap}}</div>
                <div class="sheet-td">{{loc9_hp}}/{{loc9_hp_max}}</div>
                {{/rollBetween() roll loc9_start loc9_end}}
                {{#rollBetween() roll loc10_start loc10_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc10_name}})</div>
                <div class="sheet-td">{{loc10_block}}</div>
                <div class="sheet-td">{{loc10_ap}}</div>
                <div class="sheet-td">{{loc10_hp}}/{{loc10_hp_max}}</div>
                {{/rollBetween() roll loc10_start loc10_end}}
                {{#rollBetween() roll loc11_start loc11_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc11_name}})</div>
                <div class="sheet-td">{{loc11_block}}</div>
                <div class="sheet-td">{{loc11_ap}}</div>
                <div class="sheet-td">{{loc11_hp}}/{{loc11_hp_max}}</div>
                {{/rollBetween() roll loc11_start loc11_end}}
                {{#rollBetween() roll loc12_start loc12_end}}
                <div class="sheet-td" style="width:100%;">{{roll}}({{loc12_name}})</div>
                <div class="sheet-td">{{loc12_block}}</div>
                <div class="sheet-td">{{loc12_ap}}</div>
                <div class="sheet-td">{{loc12_hp}}/{{loc12_hp_max}}</div>
                {{/rollBetween() roll loc12_start loc12_end}}
            </div>
            {{/roll}}
        </div>
    </div>
</rolltemplate>
<!-- Improvement Roll Template -->
<!-- @{roll_display}&{template:improvement} {{name=@{name}}} @{name_display} {{roll=[[1d100 + @{int}]]}} {{improvement=[[1d4+1+@{fumbled}]]}} {{skill=[[@{skill_total}]]}} {{fumbled=[[@{fumbled}]]}} -->
<rolltemplate class="sheet-rolltemplate-improvement">
    <div class="sheet-border">
        <div class="sheet-header">
            <div class="sheet-character">{{character}}</div>
            <div class="sheet-name">{{name}}({{skill}})</div>
        </div>
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="fumbled">Fumbled</span>:</div>
            {{#rollTotal() fumbled 0}}
            <div class="sheet-value"><span data-i18n="no">No</span></div>
            {{/rollTotal() fumbled 0}}
            {{#rollTotal() fumbled 1}}
            <div class="sheet-value"><span data-i18n="yes">Yes</span></div>
            {{/rollTotal() fumbled 1}}
        </div>
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="result">Result</span>:</div>
            {{#^rollLess() roll skill}}
            <div class="sheet-value">{{roll}}(<span data-i18n="success">Success</span> +{{improvement}}%)</div>
            {{/^rollLess() roll skill}}
            {{#rollLess() roll skill}}
            {{#rollTotal() fumbled 0}}
            <div class="sheet-value">{{roll}}(<span data-i18n="fail">Fail</span> +1%)</div>
            {{/rollTotal() fumbled 0}}
            {{#rollTotal() fumbled 1}}
            <div class="sheet-value">{{roll}}(<span data-i18n="fail">Fail</span> +2%)</div>
            {{/rollTotal() fumbled 1}}
            {{/rollLess() roll skill}}
        </div>
        {{#notes}}
        <div class="sheet-listitem">{{notes}}</div>
        {{/notes}}
    </div>
</rolltemplate>
<!-- Movement Roll Template -->
<rolltemplate class="sheet-rolltemplate-movement">
    <div class="sheet-border">
        <div class="sheet-header">
            <div class="sheet-character">{{character}}</div>
            <div class="sheet-name">{{name}}</div>
        </div>
        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-th" data-i18n="walk">Walk</div>
                <div class="sheet-th" data-i18n="run">Run</div>
                <div class="sheet-th" data-i18n="sprint">Sprint</div>
                <div class="sheet-th" data-i18n="swim">Swim</div>
            </div>
            <div class="sheet-tr">
                <div class="sheet-td">{{walk}}</div>
                <div class="sheet-td">{{run}}</div>
                <div class="sheet-td">{{sprint}}</div>
                {{#rollLess() sink 0}}
                <div class="sheet-td"><span data-i18n="sink">Sink</span></div>
                {{/rollLess() sink 0}}
                {{#rollTotal() sink 0}}
                <div class="sheet-td"><span data-i18n="float">Float</span></div>
                {{/rollTotal() sink 0}}
                {{#rollGreater() sink 0}}
                <div class="sheet-td">{{swim}}</div>
                {{/rollGreater() sink 0}}
            </div>
        </div>

        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-th" data-i18n="climb">Climb</div>
            </div>
        </div>
        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-td"><span class="sheet-help" data-i18n-title="rough"><span class="sheet-pictos sheet-bold">Y</span>={{climb_rough}}</span></div>
                <div class="sheet-td"><span class="sheet-help" data-i18n-title="steep">/={{climb_steep}}</span></div>
                <div class="sheet-td"><span class="sheet-help" data-i18n-title="sheer">|={{climb_sheer}}</span></div>
            </div>
        </div>

        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-th" data-i18n="running_jump">Running Jump</div>
                <div class="sheet-th" data-i18n="standing_jump">Standing Jump</div>
            </div>
        </div>
        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-td"><span class="sheet-help" data-i18n-title="horizontal">_={{running_jump_horizontal}}</span></div>
                <div class="sheet-td"><span class="sheet-help" data-i18n-title="vertical">|={{running_jump_vertical}}</span></div>
                <div class="sheet-td"><span class="sheet-help" data-i18n-title="horizontal">_={{standing_jump_horizontal}}</span></div>
                <div class="sheet-td"><span class="sheet-help" data-i18n-title="vertical">|={{standing_jump_vertical}}</span></div>
            </div>
        </div>
    </div>
</rolltemplate>
<!-- Hit Table Roll Template -->
<!-- @{roll_display}&{template:resolution_pool} {{name=@{name}}} @{name_display} {{roll=[[1d8]]}} -->
<rolltemplate class="sheet-rolltemplate-resolution_pool">
    <div class="sheet-border">
        <div class="sheet-header">
            <div class="sheet-character">{{character}}</div>
            <div class="sheet-name">{{name}}</div>
        </div>
        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-th" style="width:100%;"><span data-i18n="result">Result</span></div>
                <div class="sheet-th sheet-pictos sheet-help" data-i18n-title="confidence" title="Confidence">U</div>
                <div class="sheet-th"><span data-i18n="pool">Pool</span></div>
            </div>
            <div class="sheet-tr">
                {{#rollBetween() roll 1 4}}
                <div class="sheet-td" style="width:100%;">{{roll}}(<span data-i18n="composure">Composure</span>)</div>
                <div class="sheet-td">{{confidence}}</div>
                <div class="sheet-td">{{composure}}/{{composure_max}}</div>
                {{/rollBetween() roll 1 4}}
                {{#rollBetween() roll 5 8}}
                <div class="sheet-td" style="width:100%;">{{roll}}(<span data-i18n="integrity">Integrity</span>)</div>
                <div class="sheet-td">{{confidence}}</div>
                <div class="sheet-td">{{integrity}}/{{integrity_max}}</div>
                {{/rollBetween() roll 5 8}}
                {{#rollBetween() roll 9 12}}
                <div class="sheet-td" style="width:100%;">{{roll}}(<span data-i18n="resolve">Resolve</span>)</div>
                <div class="sheet-td">{{confidence}}</div>
                <div class="sheet-td">{{resolve}}/{{resolve_max}}</div>
                {{/rollBetween() roll 9 12}}
            </div>
        </div>
    </div>
</rolltemplate>
<!-- Skill Roll Template -->
<!-- @{roll_display}&{template:skill} {{name=@{name}}} @{name_display} {{roll=[[1d100]]}} {{fatigue_skills=[[@{fatigue_skills}]]}} {{encumbered=[[@{encumbered}]]}} {{encumbrance_skills=[[@{encumbrance_skills}]]}} {{original=@{total}}} {{difficulty=[[@{difficulty}]]}} {{augmentation=[[@{augmentation}]]}} {{penalty=[[@{penalty}]]}} {{very_easy=[[((@{total}+@{augment})*2)+@{penalty}]]}} {{very_easy_crit=[[ceil(((@{total}*2)+@{penalty})/10)]]}} {{easy=[[ceil((@{total}+@{augment})*1.5)+@{penalty}]]}} {{easy_crit=[[ceil(((@{total}*1.5)+@{penalty})/10)]]}} {{standard=[[@{total}+@{augment}+@{penalty}]]}} {{standard_crit=[[ceil((@{total}+@{penalty})/10)]]}} {{hard=[[ceil((@{total}+@{augment})*.67)+@{penalty}]]}} {{hard_crit=[[ceil(((@{total}*.67)+@{penalty})/10)]]}} {{formidable=[[ceil((@{total}+@{augment})*.5)+@{penalty}]]}} {{formidable_crit=[[ceil(((@{total}*.5)+@{penalty})/10)]]}} {{herculean=[[ceil((@{total}+@{augment})*@{herculean_mod})+@{penalty}]]}} {{herculean_crit=[[ceil(((@{total}*@{herculean_mod})+@{penalty})/10)]]}} {{notes=@{notes}}} -->
<rolltemplate class="sheet-rolltemplate-skill">
    <div class="sheet-border">
        <div class="sheet-header">
            <div class="sheet-character">{{character}}</div>
            <div class="sheet-name">{{name}} ({{original}}%)</div>
        </div>

        {{#rollGreater() fatigue_skills 0}}
            {{#rollTotal() fatigue_skills 1}}<div class="sheet-hard-notice"><span data-i18n="hard">Hard</span>, <span data-i18n="due_to_fatigue">due to fatigue</span></div>{{/rollTotal() fatigue_skills 1}}
            {{#rollTotal() fatigue_skills 2}}<div class="sheet-formidable-notice"><span data-i18n="formidable">Formidable</span>,&nbsp;<span data-i18n="due_to_fatigue">due to fatigue</span></div>{{/rollTotal() fatigue_skills 2}}
            {{#rollTotal() fatigue_skills 3}}<div class="sheet-herculean-notice"><span data-i18n="herculean">Herculean</span>,&nbsp;<span data-i18n="due_to_fatigue">due to fatigue</span></div>{{/rollTotal() fatigue_skills 3}}
            {{#rollTotal() fatigue_skills 4}}<div class="sheet-hopeless-notice"><span data-i18n="hopeless">Hopeless</span>,&nbsp;<span data-i18n="due_to_fatigue">due to fatigue</span></div>{{/rollTotal() fatigue_skills 4}}
            {{#rollTotal() fatigue_skills 5}}<div class="sheet-hopeless-notice"><span data-i18n="no_action_allowed">No action allowed</span>,&nbsp;<span data-i18n="due_to_fatigue">due to fatigue</span></div>{{/rollTotal() fatigue_skills 5}}
        {{/rollGreater() fatigue_skills 0}}

        {{#rollTotal() encumbered 1}}
            {{#rollTotal() encumbrance_skills 1}}<div class="sheet-hard-notice"><span data-i18n="1_grade_harder">1 grade harder</span>,&nbsp;<span data-i18n="due_to_enc">due to ENC</span></div>{{/rollTotal() encumbrance_skills 1}}
            {{#rollTotal() encumbrance_skills 2}}<div class="sheet-formidable-notice"><span data-i18n="2_grades_harder">2 grades harder</span>,&nbsp;<span data-i18n="due_to_enc">due to ENC</span></div>{{/rollTotal() encumbrance_skills 2}}
            {{#rollTotal() encumbrance_skills 3}}<div class="sheet-hopeless-notice"><span data-i18n="impossible">Impossible</span>,&nbsp;<span data-i18n="due_to_enc">due to ENC</span></div>{{/rollTotal() encumbrance_skills 3}}
        {{/rollTotal() encumbered 1}}

        {{#ship_condition_skills}}
            {{#rollTotal() ship_condition_skills 2}}<div class="sheet-hard-notice"><span data-i18n="hard">Hard</span>,&nbsp;<span data-i18n="due_to_ship_condition">due to ship condition</span></div>{{/rollTotal() ship_condition_skills 2}}
            {{#rollTotal() ship_condition_skills 3}}<div class="sheet-formidable-notice"><span data-i18n="formidable">Formidable</span>,&nbsp;<span data-i18n="due_to_ship_condition">due to ship condition</span></div>{{/rollTotal() ship_condition_skills 3}}
            {{#rollTotal() ship_condition_skills 4}}<div class="sheet-herculean-notice"><span data-i18n="herculean">Herculean</span>,&nbsp;<span data-i18n="due_to_ship_condition">due to ship condition</span></div>{{/rollTotal() ship_condition_skills 4}}
        {{/ship_condition_skills }}

        {{#^rollTotal() augmentation 0}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="augmentation">Augmentation</span>:</div>
            <div class="sheet-value">{{augmentation}}</div>
        </div>
        {{/^rollTotal() augmentation 0}}
        {{#^rollTotal() penalty 0}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="101+_penalty">101+ Penalty</span>:</div>
            <div class="sheet-value">{{penalty}}</div>
        </div>
        {{/^rollTotal() penalty 0}}

        <!-- Skill Result table start -->
        <div class="sheet-table">
            <div class="sheet-tr">
                <div class="sheet-th" data-i18n="difficulty">Difficulty</div>
                <div class="sheet-th">
                    <div style="margin: 0 2px 0; padding: 0 5px 0;">
                        <div class="sheet-flex">
                            <div class="sheet-grow">%</div>
                            <div class="sheet-grow sheet-pictos sheet-help" data-i18n-title="critical">S</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-th" data-i18n="result">Result</div>
            </div>


            {{#rollTotal() difficulty 0}}
            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-very-easy sheet-left" data-i18n="very_easy">Very Easy</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-very-easy">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{very_easy}}</div>
                            <div class="sheet-grow">{{very_easy_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-very-easy">
                    <!-- 95+ Auto Fail -->
                    {{#rollGreater() roll 95}}
                    <!-- score > 100 -->
                    {{#rollGreater() very_easy_fumble 100}}
                    <!-- roll = 100 (fumble) -->
                    {{#rollTotal() roll 100}}
                    {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                    {{/rollTotal() roll 100}}
                    <!-- roll < 100 (fail) -->
                    {{#rollLess() roll 100}}
                    {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                    {{/rollLess() roll 100}}
                    {{/rollGreater() very_easy_fumble 100}}
                    <!-- score <= 100 -->
                    {{#rollLess() very_easy_fumble 101}}
                    <!-- roll 99 to 100 (fumble) -->
                    {{#rollGreater() roll 98}}
                    {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                    {{/rollGreater() roll 98}}
                    <!-- roll < 99 (fail) -->
                    {{#rollLess() roll 99}}
                    {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                    {{/rollLess() roll 99}}
                    {{/rollLess() very_easy_fumble 101}}
                    {{/rollGreater() roll 95}}
                    <!-- 6 to 95 Normal Logic -->
                    {{#rollBetween() roll 6 95}}
                    <!-- roll > total (fail) -->
                    {{#rollGreater() roll very_easy}}
                    {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                    {{/rollGreater() roll very_easy}}
                    <!-- roll <= total -->
                    {{#^rollGreater() roll very_easy}}
                    <!-- roll > crit (success) -->
                    {{#rollGreater() roll very_easy_crit}}
                    {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                    {{/rollGreater() roll very_easy_crit}}
                    <!-- roll <= crit (crit) -->
                    {{#^rollGreater() roll very_easy_crit}}
                    {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                    {{/^rollGreater() roll very_easy_crit}}
                    {{/^rollGreater() roll very_easy}}
                    {{/rollBetween() roll 6 95}}
                    <!-- 5- Auto Fail -->
                    {{#rollLess() roll 6}}
                    <!-- roll > crit (success) -->
                    {{#rollGreater() roll very_easy_crit}}
                    {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                    {{/rollGreater() roll very_easy_crit}}
                    <!-- roll <= crit (crit) -->
                    {{#^rollGreater() roll very_easy_crit}}
                    {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                    {{/^rollGreater() roll very_easy_crit}}
                    {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>

            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-easy" data-i18n="easy">Easy</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-easy">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{easy}}</div>
                            <div class="sheet-grow">{{easy_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-easy">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() easy_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() easy_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() easy_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() easy_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll easy}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll easy}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll easy}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll easy_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll easy_crit}}
                        {{/^rollGreater() roll easy}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll easy_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll easy_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>

            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-standard" data-i18n="standard">Standard</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-standard">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{standard}}</div>
                            <div class="sheet-grow">{{standard_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-standard">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() standard_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() standard_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() standard_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() standard_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll standard}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll standard}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll standard}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll standard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll standard_crit}}
                        {{/^rollGreater() roll standard}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll standard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll standard_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>

            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-hard" data-i18n="hard">Hard</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-hard">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{hard}}</div>
                            <div class="sheet-grow">{{hard_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-hard">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() hard_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() hard_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() hard_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() hard_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll hard}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll hard}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll hard}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll hard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll hard_crit}}
                        {{/^rollGreater() roll hard}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll hard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll hard_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>

            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-formidable" data-i18n="formidable">Formidable</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-formidable">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{formidable}}</div>
                            <div class="sheet-grow">{{formidable_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-formidable">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() formidable_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() formidable_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() formidable_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() formidable_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll formidable}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll formidable}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll formidable}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll formidable_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll formidable_crit}}
                        {{/^rollGreater() roll formidable}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll formidable_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll formidable_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>

            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-herculean" data-i18n="herculean">Herculean</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-herculean">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{herculean}}</div>
                            <div class="sheet-grow">{{herculean_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-herculean">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() herculean_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() herculean_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() herculean_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() herculean_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll herculean}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll herculean}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll herculean}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll herculean_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll herculean_crit}}
                        {{/^rollGreater() roll herculean}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll herculean_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll herculean_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>
            {{/rollTotal() difficulty 0}}

            {{#rollTotal() difficulty 1}}
            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-very-easy" data-i18n="very_easy">Very Easy</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-very-easy">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{very_easy}}</div>
                            <div class="sheet-grow">{{very_easy_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-very-easy">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() very_easy_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() very_easy_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() very_easy_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() very_easy_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll very_easy}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll very_easy}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll very_easy}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll very_easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll very_easy_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll very_easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll very_easy_crit}}
                        {{/^rollGreater() roll very_easy}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll very_easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll very_easy_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll very_easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll very_easy_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>
            {{/rollTotal() difficulty 1}}

            {{#rollTotal() difficulty 2}}
            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-easy" data-i18n="easy">Easy</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-easy">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{easy}}</div>
                            <div class="sheet-grow">{{easy_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-easy">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() easy_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() easy_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() easy_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() easy_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll easy}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll easy}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll easy}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll easy_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll easy_crit}}
                        {{/^rollGreater() roll easy}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll easy_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll easy_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll easy_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>
            {{/rollTotal() difficulty 2}}

            {{#rollTotal() difficulty 3}}
            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-standard" data-i18n="standard">Standard</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-standard">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{standard}}</div>
                            <div class="sheet-grow">{{standard_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-standard">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() standard_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() standard_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() standard_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() standard_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll standard}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll standard}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll standard}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll standard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll standard_crit}}
                        {{/^rollGreater() roll standard}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll standard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll standard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll standard_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>
            {{/rollTotal() difficulty 3}}

            {{#rollTotal() difficulty 4}}
            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-hard" data-i18n="hard">Hard</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-hard">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{hard}}</div>
                            <div class="sheet-grow">{{hard_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-hard">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() hard_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() hard_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() hard_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() hard_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll hard}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll hard}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll hard}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll hard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll hard_crit}}
                        {{/^rollGreater() roll hard}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll hard_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll hard_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll hard_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>
            {{/rollTotal() difficulty 4}}

            {{#rollTotal() difficulty 5}}
            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-formidable" data-i18n="formidable">Formidable</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-formidable">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{formidable}}</div>
                            <div class="sheet-grow">{{formidable_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-formidable">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() formidable_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() formidable_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() formidable_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() formidable_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll formidable}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll formidable}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll formidable}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll formidable_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll formidable_crit}}
                        {{/^rollGreater() roll formidable}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll formidable_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll formidable_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll formidable_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>
            {{/rollTotal() difficulty 5}}

            {{#rollTotal() difficulty 6}}
            <div class="sheet-tr">
                <div class="sheet-td">
                    <div class="sheet-herculean" data-i18n="herculean">Herculean</div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-herculean">
                        <div class="sheet-flex">
                            <div class="sheet-grow">{{herculean}}</div>
                            <div class="sheet-grow">{{herculean_crit}}</div>
                        </div>
                    </div>
                </div>
                <div class="sheet-td">
                    <div class="sheet-herculean">
                        <!-- 95+ Auto Fail -->
                        {{#rollGreater() roll 95}}
                        <!-- score > 100 -->
                        {{#rollGreater() herculean_fumble 100}}
                        <!-- roll = 100 (fumble) -->
                        {{#rollTotal() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollTotal() roll 100}}
                        <!-- roll < 100 (fail) -->
                        {{#rollLess() roll 100}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 100}}
                        {{/rollGreater() herculean_fumble 100}}
                        <!-- score <= 100 -->
                        {{#rollLess() herculean_fumble 101}}
                        <!-- roll 99 to 100 (fumble) -->
                        {{#rollGreater() roll 98}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fumble">!</span>
                        {{/rollGreater() roll 98}}
                        <!-- roll < 99 (fail) -->
                        {{#rollLess() roll 99}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollLess() roll 99}}
                        {{/rollLess() herculean_fumble 101}}
                        {{/rollGreater() roll 95}}
                        <!-- 6 to 95 Normal Logic -->
                        {{#rollBetween() roll 6 95}}
                        <!-- roll > total (fail) -->
                        {{#rollGreater() roll herculean}}
                        {{roll}} <span class="sheet-result" data-i18n-title="fail">&ast;</span>
                        {{/rollGreater() roll herculean}}
                        <!-- roll <= total -->
                        {{#^rollGreater() roll herculean}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll herculean_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll herculean_crit}}
                        {{/^rollGreater() roll herculean}}
                        {{/rollBetween() roll 6 95}}
                        <!-- 5- Auto Fail -->
                        {{#rollLess() roll 6}}
                        <!-- roll > crit (success) -->
                        {{#rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="success">3</span>
                        {{/rollGreater() roll herculean_crit}}
                        <!-- roll <= crit (crit) -->
                        {{#^rollGreater() roll herculean_crit}}
                        {{roll}} <span class="sheet-result" data-i18n-title="critical">S</span>
                        {{/^rollGreater() roll herculean_crit}}
                        {{/rollLess() roll 6}}
                    </div>
                </div>
            </div>
            {{/rollTotal() difficulty 6}}
        <!-- Skill result table end -->
        </div>

        {{#notes}}
        <div class="sheet-listitem">{{notes}}</div>
        {{/notes}}

        {{#combatstyle}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n-title="special_effects" data-i18n="special_effects">Special Effects</span>:</div>
            <div class="sheet-value">[Choose](~{{character}}|special_effects)</div>
        </div>
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="hit_location">Hit Location</span>:</div>
            <div class="sheet-value">[Low](~target|hit_location_low) [Standard](~target|hit_location) [High](~target|hit_location_high)</div>
        </div>
        {{#weapon_buttons}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="weapon">Weapon</span>:</div>
            <div class="sheet-value">{{weapon_buttons}}</div>
        </div>
        {{/weapon_buttons}}
        {{/combatstyle}}

        {{#spiritcombat}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n-title="special_effects" data-i18n="special_effects">Special Effects</span>:</div>
            <div class="sheet-value">[Choose](~{{character}}|special_effects)</div>
        </div>
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="damage">Damage</span>:</div>
            <div class="sheet-value">[Spirit Damage](~{{character}}|spirit_damage)</div>
        </div>
        {{/spiritcombat}}

        {{#socialoffense}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n-title="special_effects" data-i18n="special_effects">Special Effects</span>:</div>
            <div class="sheet-value">[Choose](~{{character}}|special_effects)</div>
        </div>
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="hit_location">Hit Location</span>:</div>
            <div class="sheet-value">[Resolution Pool](~{{character}}|resolution_pool)</div>
        </div>
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n="damage">Damage</span>:</div>
            <div class="sheet-value">[Social Damage](~{{character}}|social_damage)</div>
        </div>
        {{/socialoffense}}

        {{#socialdefense}}
        <div class="sheet-listitem">
            <div class="sheet-key"><span data-i18n-title="special_effects" data-i18n="special_effects">Special Effects</span>:</div>
            <div class="sheet-value">[Choose](~{{character}}|special_effects)</div>
        </div>
        {{/socialdefense}}
    </div>
</rolltemplate>

<script type="text/worker">
/* Option Bar Scripts */
on(`clicked:edit`, function() {
    getAttrs(['edit'], function(v) {
        setAttrs({
            ['edit']: v['edit'] !== "1" ? "1" : "0"
        });
    });
});

on(`clicked:roll_display`, function() {
    getAttrs(['roll_display'], function(v) {
        setAttrs({
            ['roll_display']: v['roll_display'] !== "/w gm" ? "/w gm" : " "
        });
    });
});

/*on(`clicked:name_display`, function() {
    getAttrs(['name_display'], function(v) {
        setAttrs({
            ['name_display']: v['name_display'] !== "{{character=@{character_name}}}" ? "{{character=@{character_name}}}" : " "
        });
    });
});*/

/* Sheet Type Specific Worker Scripts */

/*
    TODO: recalc
    TODO: Upgrade logic:
    sanitize names
    char_ageing & training -> other
    conditions -> add wounds value
    action_points_add_one -> other
    movement_rate_species_fly -> custom_movement
    combat_style traits and weapons -> notes
    skillX_experience -> skillX_other
    passion score -> total
    magic_skills, languages, affiliations, linguistics  -> professional
    pecularities, deps -> passions + set types
    linguistics_notes -> pro skill notes
    magic -> abilities
    locationX_block -> size value?
    income_* -> income
 */

/* Compact Button */
on(`clicked:compact`, function() {
    getAttrs(['compact'], function(v) {
        console.log(`Setting attrs for compact button trigger`);
        setAttrs({
            ['compact']: v['compact'] !== "1" ? "1" : "0"
        });
    });
});

/* Common Autocalc Constants */
const cultRankMap = {
    'common': 1,
    'lay member': 1,
    'follower': 1,
    'dedicated': 2,
    'initiate': 2,
    'spirit worshipper': 2,
    'proven': 3,
    'acolyte': 3,
    'shaman': 3,
    'overseer': 4,
    'priest': 4,
    'high shaman': 4,
    'leader': 5,
    'high priest': 5,
    'spirit lord': 5
};

const strGetAttrs = ['str_base', 'str_other', 'str_temp'];
const dexGetAttrs = ['dex_base', 'dex_other', 'dex_temp'];
const sizGetAttrs = ['siz_base', 'siz_other', 'siz_temp'];
const conGetAttrs = ['con_base', 'con_other', 'con_temp'];
const powGetAttrs = ['pow_base', 'pow_other', 'pow_temp'];
const intGetAttrs = ['int_base', 'int_other', 'int_temp'];
const chaGetAttrs = ['cha_base', 'cha_other', 'cha_temp'];
const allCharGetAttrs = strGetAttrs.concat(dexGetAttrs, sizGetAttrs, conGetAttrs, powGetAttrs, intGetAttrs, chaGetAttrs);

const armorEncGetAttrs = ['location1_armor_enc', 'location1_armor_equipped',
    'location2_armor_enc', 'location2_armor_equipped',
    'location3_armor_enc', 'location3_armor_equipped',
    'location4_armor_enc', 'location4_armor_equipped',
    'location5_armor_enc', 'location5_armor_equipped',
    'location6_armor_enc', 'location6_armor_equipped',
    'location7_armor_enc', 'location7_armor_equipped',
    'location8_armor_enc', 'location8_armor_equipped',
    'location9_armor_enc', 'location9_armor_equipped',
    'location10_armor_enc', 'location10_armor_equipped',
    'location11_armor_enc', 'location11_armor_equipped',
    'location12_armor_enc', 'location12_armor_equipped',
    'half_effective_armor_enc'];

const armorLocGetAttrs = ['location1_other_ap', 'location1_armor_ap', 'location1_armor_equipped',
    'location2_other_ap', 'location2_armor_ap', 'location2_armor_equipped',
    'location3_other_ap', 'location3_armor_ap', 'location3_armor_equipped',
    'location4_other_ap', 'location4_armor_ap', 'location4_armor_equipped',
    'location5_other_ap', 'location5_armor_ap', 'location5_armor_equipped',
    'location6_other_ap', 'location6_armor_ap', 'location6_armor_equipped',
    'location7_other_ap', 'location7_armor_ap', 'location7_armor_equipped',
    'location8_other_ap', 'location8_armor_ap', 'location8_armor_equipped',
    'location9_other_ap', 'location9_armor_ap', 'location9_armor_equipped',
    'location10_other_ap', 'location10_armor_ap', 'location10_armor_equipped',
    'location11_other_ap', 'location11_armor_ap', 'location11_armor_equipped',
    'location12_other_ap', 'location12_armor_ap', 'location12_armor_equipped',
    'all_armor_temp'];

const hitPointGetAttrs = ['location1_hp_max_base_mod', 'location1_hp_max_other', 'location1_hp', 'location1_hp_max',
    'location2_hp_max_base_mod', 'location2_hp_max_other', 'location2_hp', 'location2_hp_max',
    'location3_hp_max_base_mod', 'location3_hp_max_other', 'location3_hp', 'location3_hp_max',
    'location4_hp_max_base_mod', 'location4_hp_max_other', 'location4_hp', 'location4_hp_max',
    'location5_hp_max_base_mod', 'location5_hp_max_other', 'location5_hp', 'location5_hp_max',
    'location6_hp_max_base_mod', 'location6_hp_max_other', 'location6_hp', 'location6_hp_max',
    'location7_hp_max_base_mod', 'location7_hp_max_other', 'location7_hp', 'location7_hp_max',
    'location8_hp_max_base_mod', 'location8_hp_max_other', 'location8_hp', 'location8_hp_max',
    'location9_hp_max_base_mod', 'location9_hp_max_other', 'location9_hp', 'location9_hp_max',
    'location10_hp_max_base_mod', 'location10_hp_max_other', 'location10_hp', 'location10_hp_max',
    'location11_hp_max_base_mod', 'location11_hp_max_other', 'location11_hp', 'location11_hp_max',
    'location12_hp_max_base_mod', 'location12_hp_max_other', 'location12_hp', 'location12_hp_max',
    'hp_max_base', 'all_hp_temp', 'simplified_combat_enabled', 'hp_calc'];

const encGetAttrs = ['avg_species_siz', 'encumbrance_temp', 'pack_equipped', 'effective_armor_enc', 'armor_enc_carried',
    'meleeweapon_enc', 'meleeweapon_enc_carried', 'rangedweapon_enc', 'rangedweapon_enc_carried', 'equipment_enc', 'equipment_enc_carried', 'currency_enc', 'currency_enc_carried'];

const charStdSkillIds = {
    str: ['athletics', 'brawn', 'boating', 'swim', 'unarmed'],
    dex: ['athletics', 'conceal', 'dance', 'drive', 'evade', 'first_aid', 'ride', 'stealth', 'unarmed'],
    siz: ['brawn'],
    con: ['boating', 'endurance', 'swim'],
    pow: ['conceal', 'drive', 'insight', 'perception', 'ride', 'sing', 'superstition', 'willpower', 'spectral_combat'],
    int: ['customs', 'deceit', 'first_aid', 'home_parallel', 'insight', 'locale', 'native_tongue', 'perception', 'stealth', 'superstition'],
    cha: ['dance', 'deceit', 'influence', 'native_tongue', 'sing', 'spectral_combat'],
    zero: ['status', 'strangeness', 'the_soot']
};
/*const allStdSkillIds = Array.from(
    new Set(
        charStdSkillIds['str'].concat(charStdSkillIds['dex'], charStdSkillIds['siz'], charStdSkillIds['con'],
            charStdSkillIds['pow'], charStdSkillIds['int'], charStdSkillIds['cha'], charStdSkillIds['zero'])
    )
);*/

const stdSkillChars = {
    'athletics': ['str', 'dex'],
    'brawn': ['str', 'siz'],
    'boating': ['str', 'con'],
    'conceal': ['dex', 'pow'],
    'customs': ['int', 'int'],
    'dance': ['dex', 'cha'],
    'deceit': ['int', 'cha'],
    'drive': ['dex', 'pow'],
    'endurance': ['con', 'con'],
    'evade': ['dex', 'dex'],
    'first_aid': ['dex', 'int'],
    'home_parallel': ['int', 'int'],
    'influence': ['cha', 'cha'],
    'insight': ['int', 'pow'],
    'locale': ['int', 'int'],
    'native_tongue': ['int', 'cha'],
    'perception': ['int', 'pow'],
    'ride': ['dex', 'pow'],
    'sing': ['pow', 'cha'],
    'spectral_combat': ['pow', 'cha'],
    'status': ['zero', 'zero'],
    'stealth': ['dex', 'int'],
    'strangeness': ['zero', 'zero'],
    'superstition': ['21-int', 'pow'],
    'swim': ['str', 'con'],
    'the_soot': ['zero', 'zero'],
    'unarmed': ['str', 'dex'],
    'willpower': ['pow', 'pow']
}
const allStdSkillIds = Object.keys(stdSkillChars);

const nonSpecialtyProSkillChars = {
    'acting': ['cha', 'cha'],
    'acrobatics': ['str', 'dex'],
    'arcane_casting': ['int', 'pow'],
    'arcane_knowledge': ['int', 'int'],
    'artifice': ['int', 'dex'],
    'astrogation': ['int', 'int'],
    'bureaucracy': ['int', 'int'],
    'channel': ['int', 'pow'],
    'command': ['int', 'cha'],
    'commerce': ['int', 'cha'],
    'comms': ['int', 'int'],
    'computers': ['int', 'int'],
    'courtesy': ['int', 'cha'],
    'cursing': ['cha', 'pow'],
    'demolitions': ['int', 'pow'],
    'disguise': ['int', 'cha'],
    'divination': ['int', 'pow'],
    'electronics': ['dex', 'int'],
    'engineering': ['int', 'int'],
    'fata': ['pow', 'cha'],
    'folk_magic': ['pow', 'cha'],
    'forgery': ['int', 'pow'],
    'gambling': ['int', 'pow'],
    'gnosis': ['int', 'pow'],
    'healing': ['int', 'pow'],
    'law': ['int', 'cha'],
    'linguistics': ['int', 'cha'],
    'lockpicking': ['dex', 'dex'],
    'lycanthropy': ['con', 'pow'],
    'mechanisms': ['dex', 'int'],
    'meditation': ['con', 'int'],
    'medicine': ['int', 'pow'],
    'navigation': ['int', 'pow'],
    'necromancy': ['int', 'cha'],
    'oratory': ['pow', 'cha'],
    'pharmacy': ['int', 'int'],
    'pilot': ['dex', 'int'],
    'probabilities': ['int', 'int'],
    'politics': ['int', 'cha'],
    'research': ['int', 'pow'],
    'rhetoric': ['pow', 'cha'],
    'seamanship': ['int', 'con'],
    'seduction': ['int', 'cha'],
    'sensors': ['int', 'pow'],
    'shape_shifting': ['con', 'pow'],
    'shaping': ['int', 'pow'],
    'sleight': ['dex', 'cha'],
    'streetwise': ['pow', 'cha'],
    'survival': ['pow', 'con'],
    'teach': ['int', 'cha'],
    'theology': ['pow', 'pow'],
    'track': ['int', 'con'],
    'trance': ['pow', 'con']
}
const allNonSpecialtyProSkillIds = Object.keys(nonSpecialtyProSkillChars);

const specialtyProSkillChars = {
    'art': ['pow', 'cha'],
    'binding': ['pow', 'cha'],
    'craft': ['dex', 'int'],
    'culture': ['int', 'int'],
    'devotion': ['pow', 'cha'],
    'exhort': ['int', 'cha'],
    'invocation': ['int', 'int'],
    'knowledge': ['int', 'int'],
    'language': ['int', 'cha'],
    'literacy': ['int', 'int'],
    'lore': ['int', 'int'],
    'musicianship': ['dex', 'cha'],
    'mysticism': ['con', 'pow'],
    'path': ['con', 'pow'],
    'pilot': ['dex', 'int'],
    'rites': ['pow', 'cha'],
    'science': ['int', 'int']
}
const allSpecialtyProSkillIds = Object.keys(specialtyProSkillChars);

const megMagicSkillIds = ['binding', 'devotion', 'exhort', 'folk_magic', 'invocation', 'meditation', 'path', 'shaping', 'trance'];

const fatigueTable = {
    9: ['0', '0', '0', '+0', '-'],
    8: ['1', '0', '0', '+0', .25],
    7: ['1', '0', '0', '-1', 3],
    6: ['2', '0', '-2', '-2', 6],
    5: ['2', '-1', '-4', '*.5', 12],
    4: ['3', '-2', '-6', '*.5', 18],
    3: ['3', '-3', '-8', '*0', 24],
    2: ['4', '-99', '-99', '*0', 36],
    1: ['5', '-99', '-99', '*0', 48],
    0: ['5', '-99', '-99', '*0', '-']
};

const hitLocationTable = {
    custom1: {
        location2to7_display: 0, location8_display: 0, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    custom7: {
        location2to7_display: 1, location8_display: 0, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    custom8: {
        location2to7_display: 1, location8_display: 1, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    custom9: {
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 0, location11_display: 0, location12_display: 0
    },
    custom10: {
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 0, location12_display: 0
    },
    custom11: {
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 1, location12_display: 0
    },
    custom: {
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 1, location12_display: 1
    },
    rabble: {
        location1_table_start: 1, location1_table_end: 20, location1_name: getTranslationByKey('hit_points'), location1_hp_max_base_mod: 0,
        location2_table_start: 0, location2_table_end: 0, location2_name: " ", location2_hp_max_base_mod: '-',
        location3_table_start: 0, location3_table_end: 0, location3_name: " ", location3_hp_max_base_mod: '-',
        location4_table_start: 0, location4_table_end: 0, location4_name: " ", location4_hp_max_base_mod: '-',
        location5_table_start: 0, location5_table_end: 0, location5_name: " ", location5_hp_max_base_mod: '-',
        location6_table_start: 0, location6_table_end: 0, location6_name: " ", location6_hp_max_base_mod: '-',
        location7_table_start: 0, location7_table_end: 0, location7_name: " ", location7_hp_max_base_mod: '-',
        location8_table_start: 0, location8_table_end: 0, location8_name: " ", location8_hp_max_base_mod: '-',
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 0, location8_display: 0, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    simplified: {
        location1_table_start: 1, location1_table_end: 20, location1_name: getTranslationByKey('hit_points'), location1_hp_max_base_mod: 0,
        location2_table_start: 0, location2_table_end: 0, location2_name: " ", location2_hp_max_base_mod: '-',
        location3_table_start: 0, location3_table_end: 0, location3_name: " ", location3_hp_max_base_mod: '-',
        location4_table_start: 0, location4_table_end: 0, location4_name: " ", location4_hp_max_base_mod: '-',
        location5_table_start: 0, location5_table_end: 0, location5_name: " ", location5_hp_max_base_mod: '-',
        location6_table_start: 0, location6_table_end: 0, location6_name: " ", location6_hp_max_base_mod: '-',
        location7_table_start: 0, location7_table_end: 0, location7_name: " ", location7_hp_max_base_mod: '-',
        location8_table_start: 0, location8_table_end: 0, location8_name: " ", location8_hp_max_base_mod: '-',
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 0, location8_display: 0, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    arachnid: {
        location1_table_start: 1, location1_table_end: 2, location1_name: getTranslationByKey('rear_right_leg'), location1_hp_max_base_mod: -1,
        location2_table_start: 3, location2_table_end: 4, location2_name: getTranslationByKey('rear_left_leg'), location2_hp_max_base_mod: -1,
        location3_table_start: 5, location3_table_end: 6, location3_name: getTranslationByKey('mid_right_leg'), location3_hp_max_base_mod: -1,
        location4_table_start: 7, location4_table_end: 8, location4_name: getTranslationByKey('mid_left_leg'), location4_hp_max_base_mod: -1,
        location5_table_start: 9, location5_table_end: 10, location5_name: getTranslationByKey('fore_right_leg'), location5_hp_max_base_mod: -1,
        location6_table_start: 11, location6_table_end: 12, location6_name: getTranslationByKey('fore_left_leg'), location6_hp_max_base_mod: -1,
        location7_table_start: 13, location7_table_end: 14, location7_name: getTranslationByKey('abdomen'), location7_hp_max_base_mod: 2,
        location8_table_start: 15, location8_table_end: 16, location8_name: getTranslationByKey('front_right_leg'), location8_hp_max_base_mod: -1,
        location9_table_start: 17, location9_table_end: 18, location9_name: getTranslationByKey('front_left_leg'), location9_hp_max_base_mod: -1,
        location10_table_start: 19, location10_table_end: 20, location10_name: getTranslationByKey('cephalothorax'), location10_hp_max_base_mod: 1,
        location11_table_start: 0, location11_table_end: 0, location11_name: "", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: "", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 0, location12_display: 0
    },
    humanoid: {
        location1_table_start: 1, location1_table_end: 3, location1_name: getTranslationByKey('right_leg'), location1_hp_max_base_mod: 0,
        location2_table_start: 4, location2_table_end: 6, location2_name: getTranslationByKey('left_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 7, location3_table_end: 9, location3_name: getTranslationByKey('abdomen'), location3_hp_max_base_mod: 1,
        location4_table_start: 10, location4_table_end: 12, location4_name: getTranslationByKey('chest'), location4_hp_max_base_mod: 2,
        location5_table_start: 13, location5_table_end: 15, location5_name: getTranslationByKey('right_arm'), location5_hp_max_base_mod: -1,
        location6_table_start: 16, location6_table_end: 18, location6_name: getTranslationByKey('left_arm'), location6_hp_max_base_mod: -1,
        location7_table_start: 19, location7_table_end: 20, location7_name: getTranslationByKey('head'), location7_hp_max_base_mod: 0,
        location8_table_start: 0, location8_table_end: 0, location8_name: " ", location8_hp_max_base_mod: '-',
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 0, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    centaurid: {
        location1_table_start: 1, location1_table_end: 3, location1_name: getTranslationByKey('rear_right_leg'), location1_hp_max_base_mod: 0,
        location2_table_start: 4, location2_table_end: 6, location2_name: getTranslationByKey('rear_left_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 7, location3_table_end: 8, location3_name: getTranslationByKey('hindquarters'), location3_hp_max_base_mod: 1,
        location4_table_start: 9, location4_table_end: 10, location4_name: getTranslationByKey('forequarters'), location4_hp_max_base_mod: 2,
        location5_table_start: 11, location5_table_end: 12, location5_name: getTranslationByKey('front_right_leg'), location5_hp_max_base_mod: 0,
        location6_table_start: 13, location6_table_end: 14, location6_name: getTranslationByKey('front_left_leg'), location6_hp_max_base_mod: 0,
        location7_table_start: 15, location7_table_end: 16, location7_name: getTranslationByKey('chest'), location7_hp_max_base_mod: -1,
        location8_table_start: 17, location8_table_end: 17, location8_name: getTranslationByKey('right_arm'), location8_hp_max_base_mod: -4,
        location9_table_start: 18, location9_table_end: 18, location9_name: getTranslationByKey('left_arm'), location9_hp_max_base_mod: -4,
        location10_table_start: 19, location10_table_end: 20, location10_name: getTranslationByKey('head'), location10_hp_max_base_mod: -3,
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 0, location12_display: 0
    },
    decapoda: {
        location1_table_start: 1, location1_table_end: 1, location1_name: getTranslationByKey('rear_right_leg'), location1_hp_max_base_mod: -1,
        location2_table_start: 2, location2_table_end: 2, location2_name: getTranslationByKey('rear_left_leg'), location2_hp_max_base_mod: -1,
        location3_table_start: 3, location3_table_end: 3, location3_name: getTranslationByKey('mid_right_leg'), location3_hp_max_base_mod: -1,
        location4_table_start: 4, location4_table_end: 4, location4_name: getTranslationByKey('mid_left_leg'), location4_hp_max_base_mod: -1,
        location5_table_start: 5, location5_table_end: 5, location5_name: getTranslationByKey('fore_right_leg'), location5_hp_max_base_mod: -1,
        location6_table_start: 6, location6_table_end: 6, location6_name: getTranslationByKey('fore_left_leg'), location6_hp_max_base_mod: -1,
        location7_table_start: 7, location7_table_end: 7, location7_name: getTranslationByKey('front_right_leg'), location7_hp_max_base_mod: -1,
        location8_table_start: 8, location8_table_end: 8, location8_name: getTranslationByKey('front_left_leg'), location8_hp_max_base_mod: -1,
        location9_table_start: 9, location9_table_end: 10, location9_name: getTranslationByKey('abdomen'), location9_hp_max_base_mod: 1,
        location10_table_start: 11, location10_table_end: 16, location10_name: getTranslationByKey('cephalothorax'), location10_hp_max_base_mod: 2,
        location11_table_start: 17, location11_table_end: 18, location11_name: getTranslationByKey('right_pincer'), location11_hp_max_base_mod: 2,
        location12_table_start: 19, location12_table_end: 20, location12_name: getTranslationByKey('left_pincer'), location12_hp_max_base_mod: 0,
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 1, location12_display: 1
    },
    decapodiform: {
        location1_table_start: 1, location1_table_end: 1, location1_name: getTranslationByKey('tentacle_1'), location1_hp_max_base_mod: -1,
        location2_table_start: 2, location2_table_end: 2, location2_name: getTranslationByKey('tentacle_2'), location2_hp_max_base_mod: -1,
        location3_table_start: 3, location3_table_end: 3, location3_name: getTranslationByKey('tentacle_3'), location3_hp_max_base_mod: -1,
        location4_table_start: 4, location4_table_end: 4, location4_name: getTranslationByKey('tentacle_4'), location4_hp_max_base_mod: -1,
        location5_table_start: 5, location5_table_end: 5, location5_name: getTranslationByKey('tentacle_5'), location5_hp_max_base_mod: -1,
        location6_table_start: 6, location6_table_end: 6, location6_name: getTranslationByKey('tentacle_6'), location6_hp_max_base_mod: -1,
        location7_table_start: 7, location7_table_end: 7, location7_name: getTranslationByKey('tentacle_7'), location7_hp_max_base_mod: -1,
        location8_table_start: 8, location8_table_end: 8, location8_name: getTranslationByKey('tentacle_8'), location8_hp_max_base_mod: -1,
        location9_table_start: 9, location9_table_end: 11, location9_name: getTranslationByKey('long_tentacle_1'), location9_hp_max_base_mod: 0,
        location10_table_start: 12, location10_table_end: 14, location10_name: getTranslationByKey('long_tentacle_2'), location10_hp_max_base_mod: 0,
        location11_table_start: 15, location11_table_end: 17, location11_name: getTranslationByKey('body'), location11_hp_max_base_mod: 2,
        location12_table_start: 18, location12_table_end: 20, location12_name: getTranslationByKey('head'), location12_hp_max_base_mod: 1,
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 1, location12_display: 1
    },
    dorsal_finned_aquatic: {
        location1_table_start: 1, location1_table_end: 3, location1_name: getTranslationByKey('tail'), location1_hp_max_base_mod: 0,
        location2_table_start: 4, location2_table_end: 6, location2_name: getTranslationByKey('dorsal_fin'), location2_hp_max_base_mod: -1,
        location3_table_start: 7, location3_table_end: 10, location3_name: getTranslationByKey('hindquarters'), location3_hp_max_base_mod: 1,
        location4_table_start: 11, location4_table_end: 14, location4_name: getTranslationByKey('forequarters'), location4_hp_max_base_mod: 2,
        location5_table_start: 15, location5_table_end: 16, location5_name: getTranslationByKey('right_fin'), location5_hp_max_base_mod: -1,
        location6_table_start: 17, location6_table_end: 18, location6_name: getTranslationByKey('left_fin'), location6_hp_max_base_mod: -1,
        location7_table_start: 19, location7_table_end: 20, location7_name: getTranslationByKey('head'), location7_hp_max_base_mod: 0,
        location8_table_start: 0, location8_table_end: 0, location8_name: " ", location8_hp_max_base_mod: '-',
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 0, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    draconic: {
        location1_table_start: 1, location1_table_end: 2, location1_name: getTranslationByKey('tail'), location1_hp_max_base_mod: 0,
        location2_table_start: 3, location2_table_end: 4, location2_name: getTranslationByKey('rear_right_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 5, location3_table_end: 6, location3_name: getTranslationByKey('rear_left_leg'), location3_hp_max_base_mod: 0,
        location4_table_start: 7, location4_table_end: 8, location4_name: getTranslationByKey('hindquarters'), location4_hp_max_base_mod: 1,
        location5_table_start: 9, location5_table_end: 10, location5_name: getTranslationByKey('right_wing'), location5_hp_max_base_mod: -1,
        location6_table_start: 11, location6_table_end: 12, location6_name: getTranslationByKey('left_wing'), location6_hp_max_base_mod: -1,
        location7_table_start: 13, location7_table_end: 14, location7_name: getTranslationByKey('forequarters'), location7_hp_max_base_mod: 2,
        location8_table_start: 15, location8_table_end: 16, location8_name: getTranslationByKey('front_right_leg'), location8_hp_max_base_mod: 0,
        location9_table_start: 17, location9_table_end: 18, location9_name: getTranslationByKey('front_left_leg'), location9_hp_max_base_mod: 0,
        location10_table_start: 19, location10_table_end: 20, location10_name: getTranslationByKey('head'), location10_hp_max_base_mod: 0,
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 0, location12_display: 0
    },
    insect: {
        location1_table_start: 1, location1_table_end: 1, location1_name: getTranslationByKey('right_rear_leg'), location1_hp_max_base_mod: -1,
        location2_table_start: 2, location2_table_end: 2, location2_name: getTranslationByKey('left_rear_leg'), location2_hp_max_base_mod: -1,
        location3_table_start: 3, location3_table_end: 3, location3_name: getTranslationByKey('mid_right_leg'), location3_hp_max_base_mod: -1,
        location4_table_start: 4, location4_table_end: 4, location4_name: getTranslationByKey('mid_left_leg'), location4_hp_max_base_mod: -1,
        location5_table_start: 5, location5_table_end: 9, location5_name: getTranslationByKey('abdomen'), location5_hp_max_base_mod: 1,
        location6_table_start: 10, location6_table_end: 13, location6_name: getTranslationByKey('thorax'), location6_hp_max_base_mod: 2,
        location7_table_start: 14, location7_table_end: 14, location7_name: getTranslationByKey('front_right_leg'), location7_hp_max_base_mod: -1,
        location8_table_start: 15, location8_table_end: 15, location8_name: getTranslationByKey('front_left_leg'), location8_hp_max_base_mod: -1,
        location9_table_start: 16, location9_table_end: 20, location9_name: getTranslationByKey('head'), location9_hp_max_base_mod: 0,
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 0, location11_display: 0, location12_display: 0
    },
    octopodiform: {
        location1_table_start: 1, location1_table_end: 2, location1_name: getTranslationByKey('tentacle_1'), location1_hp_max_base_mod: 0,
        location2_table_start: 3, location2_table_end: 4, location2_name: getTranslationByKey('tentacle_2'), location2_hp_max_base_mod: 0,
        location3_table_start: 5, location3_table_end: 6, location3_name: getTranslationByKey('tentacle_3'), location3_hp_max_base_mod: 0,
        location4_table_start: 7, location4_table_end: 8, location4_name: getTranslationByKey('tentacle_4'), location4_hp_max_base_mod: 0,
        location5_table_start: 9, location5_table_end: 10, location5_name: getTranslationByKey('tentacle_5'), location5_hp_max_base_mod: 0,
        location6_table_start: 11, location6_table_end: 12, location6_name: getTranslationByKey('tentacle_6'), location6_hp_max_base_mod: 0,
        location7_table_start: 13, location7_table_end: 14, location7_name: getTranslationByKey('tentacle_7'), location7_hp_max_base_mod: 0,
        location8_table_start: 15, location8_table_end: 16, location8_name: getTranslationByKey('tentacle_8'), location8_hp_max_base_mod: 0,
        location9_table_start: 17, location9_table_end: 18, location9_name: getTranslationByKey('body'), location9_hp_max_base_mod: 1,
        location10_table_start: 19, location10_table_end: 20, location10_name: getTranslationByKey('head'), location10_hp_max_base_mod: 2,
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 0, location12_display: 0
    },
    pachyderm: {
        location1_table_start: 1, location1_table_end: 2, location1_name: getTranslationByKey('rear_right_leg'), location1_hp_max_base_mod: 0,
        location2_table_start: 3, location2_table_end: 4, location2_name: getTranslationByKey('rear_left_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 5, location3_table_end: 8, location3_name: getTranslationByKey('hindquarters'), location3_hp_max_base_mod: 1,
        location4_table_start: 9, location4_table_end: 12, location4_name: getTranslationByKey('forequarters'), location4_hp_max_base_mod: 2,
        location5_table_start: 13, location5_table_end: 14, location5_name: getTranslationByKey('front_right_leg'), location5_hp_max_base_mod: 0,
        location6_table_start: 15, location6_table_end: 16, location6_name: getTranslationByKey('front_left_leg'), location6_hp_max_base_mod: 0,
        location7_table_start: 17, location7_table_end: 17, location7_name: getTranslationByKey('trunk'), location7_hp_max_base_mod: -1,
        location8_table_start: 18, location8_table_end: 20, location8_name: getTranslationByKey('head'), location8_hp_max_base_mod: 0,
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    quadruped: {
        location1_table_start: 1, location1_table_end: 2, location1_name: getTranslationByKey('rear_right_leg'), location1_hp_max_base_mod: 0,
        location2_table_start: 3, location2_table_end: 4, location2_name: getTranslationByKey('rear_left_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 5, location3_table_end: 7, location3_name: getTranslationByKey('hindquarters'), location3_hp_max_base_mod: 1,
        location4_table_start: 8, location4_table_end: 10, location4_name: getTranslationByKey('forequarters'), location4_hp_max_base_mod: 2,
        location5_table_start: 11, location5_table_end: 13, location5_name: getTranslationByKey('front_right_leg'), location5_hp_max_base_mod: 0,
        location6_table_start: 14, location6_table_end: 16, location6_name: getTranslationByKey('front_left_leg'), location6_hp_max_base_mod: 0,
        location7_table_start: 17, location7_table_end: 20, location7_name: getTranslationByKey('head'), location7_hp_max_base_mod: 0,
        location8_table_start: 0, location8_table_end: 0, location8_name: " ", location8_hp_max_base_mod: '-',
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 0, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    serpentine: {
        location1_table_start: 1, location1_table_end: 3, location1_name: getTranslationByKey('tail_tip'), location1_hp_max_base_mod: 0,
        location2_table_start: 4, location2_table_end: 5, location2_name: getTranslationByKey('mid_end-length'), location2_hp_max_base_mod: 0,
        location3_table_start: 6, location3_table_end: 7, location3_name: getTranslationByKey('fore_end-length'), location3_hp_max_base_mod: 0,
        location4_table_start: 8, location4_table_end: 9, location4_name: getTranslationByKey('rear_mid-length'), location4_hp_max_base_mod: 1,
        location5_table_start: 10, location5_table_end: 12, location5_name: getTranslationByKey('mid_mid-length'), location5_hp_max_base_mod: 1,
        location6_table_start: 13, location6_table_end: 14, location6_name: getTranslationByKey('fore_mid-length'), location6_hp_max_base_mod: 1,
        location7_table_start: 15, location7_table_end: 16, location7_name: getTranslationByKey('rear_fore-length'), location7_hp_max_base_mod: 0,
        location8_table_start: 17, location8_table_end: 18, location8_name: getTranslationByKey('mid_fore-length'), location8_hp_max_base_mod: 0,
        location9_table_start: 19, location9_table_end: 20, location9_name: getTranslationByKey('head'), location9_hp_max_base_mod: 0,
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 0, location11_display: 0, location12_display: 0
    },
    tailed_arachnid: {
        location1_table_start: 1, location1_table_end: 2, location1_name: getTranslationByKey('tail'), location1_hp_max_base_mod: 0,
        location2_table_start: 3, location2_table_end: 3, location2_name: getTranslationByKey('rear_right_leg'), location2_hp_max_base_mod: -1,
        location3_table_start: 4, location3_table_end: 4, location3_name: getTranslationByKey('rear_left_leg'), location3_hp_max_base_mod: -1,
        location4_table_start: 5, location4_table_end: 5, location4_name: getTranslationByKey('mid_right_leg'), location4_hp_max_base_mod: -1,
        location5_table_start: 6, location5_table_end: 6, location5_name: getTranslationByKey('mid_left_leg'), location5_hp_max_base_mod: -1,
        location6_table_start: 7, location6_table_end: 7, location6_name: getTranslationByKey('fore_right_leg'), location6_hp_max_base_mod: -1,
        location7_table_start: 8, location7_table_end: 8, location7_name: getTranslationByKey('fore_left_leg'), location7_hp_max_base_mod: -1,
        location8_table_start: 9, location8_table_end: 12, location8_name: getTranslationByKey('thorax'), location8_hp_max_base_mod: 1,
        location9_table_start: 13, location9_table_end: 15, location9_name: getTranslationByKey('right_pincer'), location9_hp_max_base_mod: 0,
        location10_table_start: 16, location10_table_end: 18, location10_name: getTranslationByKey('left_pincer'), location10_hp_max_base_mod: 0,
        location11_table_start: 19, location11_table_end: 20, location11_name: getTranslationByKey('cephalothorax'), location11_hp_max_base_mod: 2,
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 1, location12_display: 0
    },
    tailed_biped: {
        location1_table_start: 1, location1_table_end: 3, location1_name: getTranslationByKey('tail'), location1_hp_max_base_mod: 0,
        location2_table_start: 4, location2_table_end: 5, location2_name: getTranslationByKey('right_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 6, location3_table_end: 7, location3_name: getTranslationByKey('left_leg'), location3_hp_max_base_mod: 0,
        location4_table_start: 8, location4_table_end: 10, location4_name: getTranslationByKey('abdomen'), location4_hp_max_base_mod: 1,
        location5_table_start: 11, location5_table_end: 14, location5_name: getTranslationByKey('chest'), location5_hp_max_base_mod: 2,
        location6_table_start: 15, location6_table_end: 16, location6_name: getTranslationByKey('right_arm'), location6_hp_max_base_mod: -1,
        location7_table_start: 17, location7_table_end: 18, location7_name: getTranslationByKey('left_arm'), location7_hp_max_base_mod: -1,
        location8_table_start: 19, location8_table_end: 20, location8_name: getTranslationByKey('head'), location8_hp_max_base_mod: 0,
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    tailed_quadruped: {
        location1_table_start: 1, location1_table_end: 3, location1_name: getTranslationByKey('tail'), location1_hp_max_base_mod: 0,
        location2_table_start: 4, location2_table_end: 5, location2_name: getTranslationByKey('rear_right_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 6, location3_table_end: 7, location3_name: getTranslationByKey('rear_left_leg'), location3_hp_max_base_mod: 0,
        location4_table_start: 8, location4_table_end: 10, location4_name: getTranslationByKey('hindquarters'), location4_hp_max_base_mod: 1,
        location5_table_start: 11, location5_table_end: 14, location5_name: getTranslationByKey('forequarters'), location5_hp_max_base_mod: 2,
        location6_table_start: 15, location6_table_end: 16, location6_name: getTranslationByKey('front_right_leg'), location6_hp_max_base_mod: -1,
        location7_table_start: 17, location7_table_end: 18, location7_name: getTranslationByKey('front_left_leg'), location7_hp_max_base_mod: -1,
        location8_table_start: 19, location8_table_end: 20, location8_name: getTranslationByKey('head'), location8_hp_max_base_mod: 0,
        location9_table_start: 0, location9_table_end: 0, location9_name: " ", location9_hp_max_base_mod: '-',
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 0, location10_display: 0, location11_display: 0, location12_display: 0
    },
    winged_biped: {
        location1_table_start: 1, location1_table_end: 3, location1_name: getTranslationByKey('right_leg'), location1_hp_max_base_mod: 0,
        location2_table_start: 4, location2_table_end: 6, location2_name: getTranslationByKey('left_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 7, location3_table_end: 9, location3_name: getTranslationByKey('abdomen'), location3_hp_max_base_mod: 1,
        location4_table_start: 10, location4_table_end: 10, location4_name: getTranslationByKey('chest'), location4_hp_max_base_mod: 2,
        location5_table_start: 11, location5_table_end: 12, location5_name: getTranslationByKey('right_wing'), location5_hp_max_base_mod: 0,
        location6_table_start: 13, location6_table_end: 14, location6_name: getTranslationByKey('left_wing'), location6_hp_max_base_mod: 0,
        location7_table_start: 15, location7_table_end: 16, location7_name: getTranslationByKey('right_arm'), location7_hp_max_base_mod: -1,
        location8_table_start: 17, location8_table_end: 18, location8_name: getTranslationByKey('left_arm'), location8_hp_max_base_mod: -1,
        location9_table_start: 19, location9_table_end: 20, location9_name: getTranslationByKey('head'), location9_hp_max_base_mod: 0,
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 0, location11_display: 0, location12_display: 0
    },
    winged_insect: {
        location1_table_start: 1, location1_table_end: 1, location1_name: getTranslationByKey('rear_right_leg'), location1_hp_max_base_mod: -1,
        location2_table_start: 2, location2_table_end: 2, location2_name: getTranslationByKey('rear_left_leg'), location2_hp_max_base_mod: -1,
        location3_table_start: 3, location3_table_end: 4, location3_name: getTranslationByKey('metathorax'), location3_hp_max_base_mod: 1,
        location4_table_start: 5, location4_table_end: 5, location4_name: getTranslationByKey('mid_right_leg'), location4_hp_max_base_mod: -1,
        location5_table_start: 6, location5_table_end: 6, location5_name: getTranslationByKey('mid_left_leg'), location5_hp_max_base_mod: -1,
        location6_table_start: 7, location6_table_end: 10, location6_name: getTranslationByKey('prothorax'), location6_hp_max_base_mod: 2,
        location7_table_start: 11, location7_table_end: 12, location7_name: getTranslationByKey('right_wing'), location7_hp_max_base_mod: -1,
        location8_table_start: 13, location8_table_end: 14, location8_name: getTranslationByKey('left_wing'), location8_hp_max_base_mod: -1,
        location9_table_start: 15, location9_table_end: 16, location9_name: getTranslationByKey('front_right_leg'), location9_hp_max_base_mod: -1,
        location10_table_start: 17, location10_table_end: 18, location10_name: getTranslationByKey('front_left_leg'), location10_hp_max_base_mod: -1,
        location11_table_start: 19, location11_table_end: 20, location11_name: getTranslationByKey('head'), location11_hp_max_base_mod: 0,
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 1, location11_display: 1, location12_display: 0
    },
    winged_quadruped: {
        location1_table_start: 1, location1_table_end: 2, location1_name: getTranslationByKey('rear_right_leg'), location1_hp_max_base_mod: 0,
        location2_table_start: 3, location2_table_end: 4, location2_name: getTranslationByKey('rear_left_leg'), location2_hp_max_base_mod: 0,
        location3_table_start: 5, location3_table_end: 7, location3_name: getTranslationByKey('hindquarters'), location3_hp_max_base_mod: 1,
        location4_table_start: 8, location4_table_end: 10, location4_name: getTranslationByKey('forequarters'), location4_hp_max_base_mod: 2,
        location5_table_start: 11, location5_table_end: 12, location5_name: getTranslationByKey('right_wing'), location5_hp_max_base_mod: -1,
        location6_table_start: 13, location6_table_end: 14, location6_name: getTranslationByKey('left_wing'), location6_hp_max_base_mod: -1,
        location7_table_start: 15, location7_table_end: 16, location7_name: getTranslationByKey('front_right_leg'), location7_hp_max_base_mod: 0,
        location8_table_start: 17, location8_table_end: 18, location8_name: getTranslationByKey('front_left_leg'), location8_hp_max_base_mod: 0,
        location9_table_start: 19, location9_table_end: 20, location9_name: getTranslationByKey('head'), location9_hp_max_base_mod: 0,
        location10_table_start: 0, location10_table_end: 0, location10_name: " ", location10_hp_max_base_mod: '-',
        location11_table_start: 0, location11_table_end: 0, location11_name: " ", location11_hp_max_base_mod: '-',
        location12_table_start: 0, location12_table_end: 0, location12_name: " ", location12_hp_max_base_mod: '-',
        location2to7_display: 1, location8_display: 1, location9_display: 1, location10_display: 0, location11_display: 0, location12_display: 0
    }
}



/* Character Tabs */
const charactertabs = ["all","core","abilities","equipment","background","notes","import"];
charactertabs.forEach(button => {
    on(`clicked:character_tab_${button}`, function() {
        console.log(`Setting attrs for character tab trigger`);
        setAttrs({
            character_tab: button
        });
    });
});

/* Conflict Mode */
const conflictmodes = ["none","combat","extended_conflict","spirit_combat","social_conflict"];
conflictmodes.forEach(button => {
    on(`clicked:conflict_mode_${button}`, function() {
        console.log(`Setting attrs for conflict mode trigger`);
        setAttrs({
            conflict_mode: button
        });
    });
});

/* Characteristics Functions */
/**
 * @param {string}  base   The characteristic's base value from getAttrs.
 * @param {string}  other  The characteristic's other value from getAttrs.
 * @param {string}  temp   The characteristic's temp value from getAttrs.
 * @return {int}    The total value of the characteristic.
 */
function calcChar(base, other, temp) {
    return parseInt(base) + parseInt(other) + parseInt(temp);
}

/**
 * @param {Object}  v   The values from the trigger's getAttrs call.
 * @return {Object}     Object containing all calculated chars.
 */
function buildCharObj(v) {
    let charObj = {};

    ["str", "dex", "siz", "con", "pow", "int", "cha"].forEach(char => {
        charObj[`${char}`] = calcChar(v[`${char}_base`], v[`${char}_other`], v[`${char}_temp`]);
    });

    // Special values
    charObj["21-int"] = 21 - charObj["int"];
    charObj['zero'] = 0;

    return charObj;
}



/* Atribute Functions */
/**
 * @param {Integer} con   The con value.
 * @param {Integer} siz   The siz value.
 * @param {Integer} pow   The pow value.
 * @param {Integer} str   The str value.
 * @param {String} hp_calc   The select value to determine how base HP is calculated.
 * @param {String} simplified_combat_enabled   The select value to determine if simplified combat is enabled.
 * @return {Integer}      Value of the base HP.
 */
function calcBaseHP(con, siz, pow, str, hp_calc, simplified_combat_enabled ) {
    let modifier = 5;
    if (simplified_combat_enabled === '1') {
        modifier = 2;
    }

    if (hp_calc === '1') {
       return Math.ceil((con + siz + pow)/modifier);
    } else if (hp_calc === '2') {
        return Math.ceil((con + siz + str)/modifier);
    } else {
        return Math.ceil((con + siz)/modifier);
    }
}

/**
 * @param {String} num   Number of the location being calculated.
 * @param {Integer} hp_max_base   The base HP.
 * @param {String} hp_max_base_mod   Unparsed base HP mod.
 * @param {String} hp_max_other   Unparsed HP other.
 * @param {Integer} all_hp_temp   Parsed HP temp.
 * @param {String} currentHP   Current HP.
 * @param {String} currentMax   Current max HP.
 * @return {Object}      Values of the location HP and location HP max.
 */
function calcLocationHP(num, hp_max_base, hp_max_base_mod, hp_max_other, all_hp_temp, currentHP, currentMax) {
    if (isNaN(parseInt(hp_max_base_mod))) {
        return {[`location${num}_hp`]: 0, [`location${num}_hp_max`]: 0};
    } else {
        const newMax = hp_max_base + parseInt(hp_max_base_mod) + parseInt(hp_max_other) + all_hp_temp;
        const diff = parseInt(currentHP) - parseInt(currentMax);
        return {[`location${num}_hp`]: newMax + diff, [`location${num}_hp_max`]: newMax};
    }
}

/**
 * @param {String} other_ap   Other armor
 * @param {String} armor_ap   AP from armor
 * @param {Integer} all_armor_temp   Parsed Temp armor
 * @param {String} equipped   Armor location
 * @return {Object}      Values of the location HP and location HP max.
 */
function calcLocationAP(other_ap, armor_ap, all_armor_temp, equipped) {
    if (equipped === '1') {
        return parseInt(armor_ap) + parseInt(other_ap) + all_armor_temp;
    } else {
        return parseInt(other_ap) + all_armor_temp;
    }
}

/* Skill Functions */
/**
 * @param {Array} ids   List of the standard skill ids to get attrs for.
 * @return {Array}      Array of the attrs to get for skill calc.
 */
function getStdSkillGetAttrs(ids) {
    let stdSkillGetAttrs = [];

    ids.forEach(id => {
        stdSkillGetAttrs.push(`${id}_other`)
    });

    return stdSkillGetAttrs;
}

/**
 * Calculates the value of multiple standard skills.
 *
 * @param {Array}   ids         List of standard skill ids to calculate values for.
 * @param {Object}  charObj     Pre-parsed char values.
 * @param {Array}  traditionIds   List of tradition ids to calculate referenced values for.
 * @param {Object}  v           Values from trigger's getAttrs.
 *
 * @return {Object} The calculated skill values.
 */
function calcStdSkills(ids, charObj, traditionIds, v) {
    let skillVals = {};
    let socialVals = {};
    let spiritDamageVals = {};
    let newRefVals = {}
    ids.forEach(id => {
        const skillValue = charObj[stdSkillChars[`${id}`][0]] + charObj[stdSkillChars[`${id}`][1]] + parseInt(v[`${id}_other`]);
        newRefVals = {...newRefVals,...calcReferencedIdTotals(id, skillValue, traditionIds, charObj['int'], charObj['pow'], charObj['cha'], v)}
        if (v['social_attack_id_value'].toUpperCase() === id.toUpperCase()) {
            socialVals = calcSocialDamage(v['social_damage_other'], v['social_damage_temp'], v['social_attack_id_value'], skillValue)
        }
        if (v['spirit_combat_skill_id'].toUpperCase() === id.toUpperCase()) {
            spiritDamageVals = calcSpiritDamage(v['spirit_damage_other'], v['spirit_damage_temp'], v['spirit_damage_calc'], v['spirit_combat_skill_id'], skillValue)
        }
        skillVals[`${id}_total`] = skillValue;
    });
    return {
        ...skillVals,
        ...socialVals,
        ...spiritDamageVals,
        ...newRefVals
    };
}

function calcProSkillOther(charObj, char1, char2, total) {
    let char1Val;
    let char2Val;
    switch(char1) {
        case '@{str}':
            char1Val = charObj['str'];
            break;
        case '@{dex}':
            char1Val = charObj['dex'];
            break;
        case '@{siz}':
            char1Val = charObj['siz'];
            break;
        case '@{con}':
            char1Val = charObj['con'];
            break;
        case '@{pow}':
            char1Val = charObj['pow'];
            break;
        case '@{int}':
            char1Val = charObj['int'];
            break;
        case '@{cha}':
            char1Val = charObj['cha'];
            break;
        case '(21-@{int})':
            char1Val = 21 - charObj['int'];
            break;
        default:
            char1Val = 0;
    }

    switch(char2) {
        case '@{str}':
            char2Val = charObj['str'];
            break;
        case '@{dex}':
            char2Val = charObj['dex'];
            break;
        case '@{siz}':
            char2Val = charObj['siz'];
            break;
        case '@{con}':
            char2Val = charObj['con'];
            break;
        case '@{pow}':
            char2Val = charObj['pow'];
            break;
        case '@{int}':
            char2Val = charObj['int'];
            break;
        case '@{cha}':
            char2Val = charObj['cha'];
            break;
        default:
            char2Val = 0;
    }

    return total - char1Val - char2Val;
}

function calcProSkillTotal(charObj, char1, char2, other) {
    let char1Val;
    let char2Val;
    switch(char1) {
        case '@{str}':
            char1Val = charObj['str'];
            break;
        case '@{dex}':
            char1Val = charObj['dex'];
            break;
        case '@{siz}':
            char1Val = charObj['siz'];
            break;
        case '@{con}':
            char1Val = charObj['con'];
            break;
        case '@{pow}':
            char1Val = charObj['pow'];
            break;
        case '@{int}':
            char1Val = charObj['int'];
            break;
        case '@{cha}':
            char1Val = charObj['cha'];
            break;
        case '(21-@{int})':
            char1Val = 21 - charObj['int'];
            break;
        default:
            char1Val = 0;
    }

    switch(char2) {
        case '@{str}':
            char2Val = charObj['str'];
            break;
        case '@{dex}':
            char2Val = charObj['dex'];
            break;
        case '@{siz}':
            char2Val = charObj['siz'];
            break;
        case '@{con}':
            char2Val = charObj['con'];
            break;
        case '@{pow}':
            char2Val = charObj['pow'];
            break;
        case '@{int}':
            char2Val = charObj['int'];
            break;
        case '@{cha}':
            char2Val = charObj['cha'];
            break;
        default:
            char2Val = 0;
    }

    return char1Val + char2Val + parseInt(other);
}

function calcReferencedIdTotals(skillId, skillTotal, traditionIds, int, pow, cha, v) {
    let newAttrs = {};
    let fullTraditionId = '';
    traditionIds.forEach(traditionId => {
        fullTraditionId = `repeating_tradition_${traditionId}`;
        if (skillId.toUpperCase() === v[`${fullTraditionId}_rolled_skill_id`].toUpperCase()) {
            newAttrs[`${fullTraditionId}_rolled_skill_total`] = skillTotal;
            newAttrs[`${fullTraditionId}_summary`] = calcTraditionSummary(traditionId, v[`${fullTraditionId}_type`],
                parseInt(v[`${fullTraditionId}_tradition_rank`]), v[`${fullTraditionId}_rolled_skill_name`], skillTotal,
                v[`${fullTraditionId}_other_skill_name`], parseInt(v[`${fullTraditionId}_other_skill_total`]), int, pow, cha);
        }

        if (skillId.toUpperCase() === v[`${fullTraditionId}_other_skill_id`].toUpperCase()) {
            newAttrs[`${fullTraditionId}_other_skill_total`] = skillTotal;
            newAttrs[`${fullTraditionId}_summary`] = calcTraditionSummary(traditionId, v[`${fullTraditionId}_type`],
                parseInt(v[`${fullTraditionId}_tradition_rank`]), v[`${fullTraditionId}_rolled_skill_name`],
                parseInt(v[`${fullTraditionId}_rolled_skill_total`]), v[`${fullTraditionId}_other_skill_name`], skillTotal, int,
                pow, cha);
        }
    });

    if (skillId.toUpperCase() === v['spirit_combat_skill_id'].toUpperCase()) {
        newAttrs[`spirit_combat_skill_total`] = skillTotal;
    }

    if (skillId.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
        newAttrs[`social_attack_total`] = skillTotal;
    }

    if (skillId.toUpperCase() === v['social_defense_id_value'].toUpperCase()) {
        newAttrs[`social_defense_total`] = skillTotal;
    }

    return newAttrs;
}

function calcProSkillEncumbered(char1, char2) {
    let char1bool = false;
    let char2bool = false;

    if (char1 === '@{str}' || char1 === '@{dex}') {
        char1bool = true;
    }
    if (char2 === '@{str}' || char2 === '@{dex}') {
        char2bool = true;
    }

    if (char1bool || char2bool) {
        return 1;
    } else {
        return 0;
    }
}

function calcProSkills(type, ids, charObj, traditionIds, v) {
    let skillVals = {};
    let socialDamageVals = {};
    let spiritDamageVals = {};
    let newRefVals = {}
    ids.forEach(id => {
        const skillId = `repeating_${type}_${id}`;
        const skillValue = calcProSkillTotal(charObj, v[`${skillId}_char1`], v[`${skillId}_char2`], v[`${skillId}_other`]);

        newRefVals = calcReferencedIdTotals(skillId, skillValue, traditionIds, charObj['int'], charObj['pow'], charObj['cha'], v);

        if (v['social_attack_id_value'].toUpperCase() === id.toUpperCase()) {
            socialDamageVals = calcSocialDamage(v['social_damage_other'], v['social_damage_temp'], v['social_attack_id_value'], skillValue)
        }

        if (v['spirit_combat_skill_id'].toUpperCase() === id.toUpperCase()) {
            spiritDamageVals = calcSpiritDamage(v['spirit_damage_other'], v['spirit_damage_temp'], v['spirit_damage_calc'], v['spirit_combat_skill_id'], skillValue)
        }

        skillVals[`${skillId}_total`] = skillValue;
        skillVals[`${skillId}_encumbered`] = calcProSkillEncumbered(v[`${skillId}_char1`], v[`${skillId}_char2`]);
    });
    return {
        ...newRefVals,
        ...skillVals,
        ...socialDamageVals
    };
}

function calcArmorEncAndPenalty(v) {
    let newVals = {};
    let wornArmorEnc = 0;
    let packArmorEnc = 0;
    let effectiveArmorEncMod = 2;
    if (v['half_effective_armor_enc'] === '1') {
        effectiveArmorEncMod = 4;
    }

    ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'].forEach(location => {
        const locationEquipped = v[`location${location}_armor_equipped`];
        const locationEnc = parseFloat(v[`location${location}_armor_enc`]);
        if (locationEquipped === '1') {
            wornArmorEnc = wornArmorEnc + locationEnc;
        } else if (locationEquipped === '0') {
            packArmorEnc = packArmorEnc + locationEnc;
        }
    });
    const armorPenalty = 0-Math.ceil(wornArmorEnc / 5);
    newVals['armor_enc'] = parseFloat(wornArmorEnc.toFixed(2));
    newVals['effective_armor_enc'] = parseFloat(Math.ceil(wornArmorEnc / effectiveArmorEncMod).toFixed(2));
    newVals['armor_enc_carried'] = parseFloat(packArmorEnc.toFixed(2));
    newVals['armor_penalty'] = armorPenalty;
    return newVals;
}

/*function calcWeaponEnc(weaponIds, v) {
    let newVals = {};
    let wornWeaponEnc = 0;
    let packWeaponEnc = 0;
    weaponIds.forEach(id => {
        const weaponId = `repeating_weapon_${id}`;
        const weaponLocation = v[`${weaponId}_location`];
        const weaponEnc = parseFloat(v[`${weaponId}_enc`]);
        const weaponAmmoEnc = parseFloat(v[`${weaponId}_ammo`]) * parseInt(v[`${weaponId}_ammo_enc`]);
        const weaponClipEnc = parseFloat(v[`${weaponId}_clips`]) * parseInt(v[`${weaponId}_clip_enc`]);
        if (weaponLocation === 'worn') {
            wornWeaponEnc = wornWeaponEnc + weaponEnc + weaponAmmoEnc + weaponClipEnc;
        } else if (weaponLocation === 'pack') {
            packWeaponEnc = packWeaponEnc + weaponEnc + weaponAmmoEnc + weaponClipEnc;
        }
    });
    newVals['weapons_enc'] = parseFloat(wornWeaponEnc.toFixed(2));
    newVals['weapons_enc_carried'] = parseFloat(packWeaponEnc.toFixed(2));
    return newVals;
}*/

function calcGenericRepeatingEnc(ids, fieldName, v) {
    let newVals = {};
    let wornEnc = 0;
    let packEnc = 0;
    ids.forEach(id => {
        const itemId = `repeating_${fieldName}_${id}`;
        const location = v[`${itemId}_location`];
        const enc = parseFloat(v[`${itemId}_enc`]);
        const qty = parseInt(v[`${itemId}_quantity`]);
        if (location === 'loadout') {
            wornEnc = wornEnc + (enc * qty);
        } else if (location === 'pack') {
            packEnc = packEnc + (enc * qty);
        }
    });
    newVals[`${fieldName}_enc`] = parseFloat(wornEnc.toFixed(2));
    newVals[`${fieldName}_enc_carried`] = parseFloat(packEnc.toFixed(2));
    return newVals;
}

function calcEnc(str, v) {
    const wornEnc = parseFloat(v['effective_armor_enc']) + parseFloat(v['meleeweapon_enc']) +
        parseFloat(v['rangedweapon_enc']) + parseFloat(v['equipment_enc']) + parseFloat(v['currency_enc']);
    const packEnc = (parseFloat(v['armor_enc_carried']) + parseFloat(v['meleeweapon_enc_carried']) +
        parseFloat(v['rangedweapon_enc_carried']) + parseFloat(v['equipment_enc_carried']) +
        parseFloat(v['currency_enc_carried'])) * parseInt(v['pack_equipped']);
    const enc = parseFloat(((wornEnc + packEnc + parseFloat(v['encumbrance_temp']) ) * (parseInt(v['avg_species_siz']) / 13)).toFixed(2));
    const burdened = str * 2;
    const overloaded = str * 3;
    const enc_max = str * 4;

    if (enc > enc_max) {
        return {
            encumbrance_load: "3",
            encumbrance_skills: "3",
            burdened_enc: burdened,
            overloaded_enc: overloaded,
            encumbrance_current: enc,
            encumbrance_current_max: enc_max,
            movement_rate_enc: "*0"
        };
    } else if (enc > overloaded) {
        return {
            encumbrance_load: "2",
            encumbrance_skills: "2",
            burdened_enc: burdened,
            overloaded_enc: overloaded,
            encumbrance_current: enc,
            encumbrance_current_max: enc_max,
            movement_rate_enc: "*.5"
        };
    } else if (enc > burdened) {
        return {
            encumbrance_load: "1",
            encumbrance_skills: "1",
            burdened_enc: burdened,
            overloaded_enc: overloaded,
            encumbrance_current: enc,
            encumbrance_current_max: enc_max,
            movement_rate_enc: "-2"
        };
    } else {
        return {
            encumbrance_load: "0",
            encumbrance_skills: "0",
            burdened_enc: burdened,
            overloaded_enc: overloaded,
            encumbrance_current: enc,
            encumbrance_current_max: enc_max,
            movement_rate_enc: "+0"
        };
    }
}

function calcFatigueRecovery(fatigue, healing_rate) {
    let recovery = '∞';
    let recoveryUnit = "hours-l";
    if (fatigueTable[fatigue][4] !== '-') {
        recovery = parseFloat((fatigueTable[fatigue][4] / healing_rate).toFixed(2));

        if (recovery < 1 && recovery > 0) {
            recovery = Math.ceil(recovery * 60);
            recoveryUnit = "minutes-abrv-l";
        }
    }

    return {fatigue_recovery: recovery, fatigue_recovery_unit: recoveryUnit};
}

function calcFatigue(fatigue, healing_rate) {
    return {
        fatigue_skills: fatigueTable[fatigue][0],
        action_points_fatigue: fatigueTable[fatigue][1],
        initiative_bonus_fatigue: fatigueTable[fatigue][2],
        movement_rate_fatigue: fatigueTable[fatigue][3],
        ...calcFatigueRecovery(fatigue, healing_rate)
    };
}

function calcActionPoints(dex, int, action_points_other, action_points_temp, action_points_calc, fatigue, action_points, action_points_max) {
    let base_value;
    if (action_points_calc === "set_2") {
        base_value = 2;
    } else if (action_points_calc === "set_3") {
        base_value = 3;
    } else {
        base_value = Math.ceil((int + dex) / 12);
    }

    let new_action_points_max = base_value + parseInt(action_points_other) + parseInt(action_points_temp) + parseInt(fatigueTable[fatigue][1]);
    if (new_action_points_max < 0) {
        new_action_points_max = 0;
    }
    const diff_action_points_max = new_action_points_max - parseInt(action_points_max);

    return {
        action_points_base: base_value,
        action_points_max: new_action_points_max,
        action_points: parseInt(action_points) + diff_action_points_max
    };
}

function findDamageStep(value) {
    return Math.floor(value % 5);
}

function damageTable(step, damage_mod=false) {
    const stepAbs = Math.abs(step);
    const die_steps = [0, '1d2','1d4','1d6','1d8'];
    const d10s = Math.floor(stepAbs/5);
    const damageModd10s = Math.floor((stepAbs-1)/5);
    const notd10s = stepAbs % 5; // % calculates remainder after division.
    const notDamageModd10s = (stepAbs-1) % 5; // % calculates remainder after division.
    let mod;
    if (damage_mod) {
        // Damage mod table has an extra step with 1d12 others don't have for some reason
        if (stepAbs <= 5) {
            mod = (d10s ? `${d10s}d10` : '') + (d10s && notd10s ? '+' : '') + (notd10s ? die_steps[notd10s] : (d10s ? '' : 0));
        } else if (stepAbs === 6) {
            mod = '1d12';
        } else if (stepAbs === 7) {
            mod = '2d6';
        } else if (stepAbs === 8) {
            mod = '1d8+1d6';
        } else if (stepAbs === 9) {
            mod = '2d8';
        } else if (stepAbs === 10) {
            mod = '1d10+1d8';
        } else {
            mod = (damageModd10s ? `${damageModd10s}d10` : '') + (damageModd10s && notDamageModd10s ? '+' : '') + (notDamageModd10s ? die_steps[notDamageModd10s] : (damageModd10s ? '' : 0));
        }
    } else {
        // Damage table for spirit damage, wrack and other things which skip the 1d12
        if (stepAbs === 6) {
            mod = '2d6';
        } else if (stepAbs === 7) {
            mod = '1d8+1d6';
        } else if (stepAbs === 8) {
            mod = '2d8';
        } else if (stepAbs === 9) {
            mod = '1d10+1d8';
        } else {
            mod = (d10s ? `${d10s}d10` : '') + (d10s && notd10s ? '+' : '') + (notd10s ? die_steps[notd10s] : (d10s ? '' : 0));
        }
    }

    if (step >= 0) {
        return mod;
    } else {
        return '-' + mod;
    }
}

function calcDamageMod(str, siz, con, pow, damage_mod_calc, damage_mod_other, damage_mod_temp) {
    let damage_mod_table_value;
    if (damage_mod_calc === '1') {
        damage_mod_table_value = str + siz + pow;
    } else if (damage_mod_calc === '2') {
        damage_mod_table_value = str + siz + con;
    } else {
        damage_mod_table_value = str + siz;
    }

    const base_damage_mod_step = Math.ceil(damage_mod_table_value / 5) - 5;
    const base_damage_mod_value = damageTable(base_damage_mod_step, true);

    return {
        damage_mod_base: base_damage_mod_value,
        damage_mod: damageTable(base_damage_mod_step + parseInt(damage_mod_other) + parseInt(damage_mod_temp), true)
    };
}

function calcExpMod(cha, int, experience_mod_calc, experience_mod_other, experience_mod_temp) {
    let base_value;
    if(experience_mod_calc === '1') {
        base_value = Math.ceil(int/6)-2;
    } else {
        base_value = Math.ceil(cha/6)-2;
    }

    return {
        experience_mod_base: base_value,
        experience_mod: base_value + parseInt(experience_mod_other) + parseInt(experience_mod_temp)
    };
}

function calcHealingRate(con, pow, healing_rate_calc, healing_rate_other, healing_rate_temp, healing_rate_double) {
    let base_multiplier;
    let base_value;
    if (healing_rate_double === '1') {
        base_multiplier = 2;
    } else {
        base_multiplier = 1;
    }

    if (healing_rate_calc === '1') {
        base_value = Math.ceil(Math.ceil(con+(pow/2))/6) * base_multiplier;
    } else {
        base_value = Math.ceil(con/6) * base_multiplier;
    }

    return {
        healing_rate_base: base_value,
        healing_rate: base_value + parseInt(healing_rate_other) + parseInt(healing_rate_temp)
    };
}

function calcInitiativeBonus(int, dex, initiative_bonus_other, initiative_bonus_temp, armor_penalty, initiative_bonus_fatigue, athletics_total, initiative_add_one_tenth_athletics) {
    let athletics_bonus = 0;
    if (initiative_add_one_tenth_athletics === '1') {
        athletics_bonus = Math.ceil(athletics_total/10);
    }
    const base_value = Math.ceil((int + dex) / 2);

    return {
        initiative_bonus_base: base_value,
        initiative_bonus: base_value + parseInt(initiative_bonus_other) + parseInt(initiative_bonus_temp) +
            armor_penalty + athletics_bonus + initiative_bonus_fatigue
    };
}

function calcLuckPoints(pow, cha, luck_points_calc, luck_points_other, luck_points_temp, luck_points_rank, rank, luck_points, luck_points_max) {
    let base_value;
    if (luck_points_calc === '1') {
        base_value = Math.ceil(Math.ceil(cha+(pow/2))/6) + (parseInt(luck_points_rank) * parseInt(rank));
    } else {
        base_value = Math.ceil(pow/6) + (parseInt(luck_points_rank) * parseInt(rank));
    }

    const new_luck_points_max = base_value + parseInt(luck_points_temp) + parseInt(luck_points_other);
    const diff_luck_points_max = new_luck_points_max - parseInt(luck_points_max);

    return {
        luck_points_base: base_value,
        luck_points_max: new_luck_points_max,
        luck_points: parseInt(luck_points) + diff_luck_points_max
    };
}

function calcMagicPoints(pow, magic_points_other, magic_points_temp, magic_points, magic_points_max) {
    const new_magic_points_max = pow + parseInt(magic_points_other) + parseInt(magic_points_temp);
    const diff_magic_points_max = new_magic_points_max - parseInt(magic_points_max);

    return {
        magic_points_base: pow,
        magic_points_max: new_magic_points_max,
        magic_points: parseInt(magic_points) + diff_magic_points_max
    };
}

function calcTenacity(pow, tenacity_other, tenacity_temp, tenacity, tenacity_max, tenacity_dependencies) {
    const new_magic_points_max = pow + parseInt(tenacity_other) + parseInt(tenacity_temp) + tenacity_dependencies;
    const diff_magic_points_max = new_magic_points_max - parseInt(tenacity_max);

    return {
        tenacity_base: pow,
        tenacity_max: new_magic_points_max,
        tenacity: parseInt(tenacity) + diff_magic_points_max
    };
}

function applyMovementMod(value, modifier) {
    if (modifier === '-1') {
        return value - 1;
    } else if (modifier === '-2') {
        return value - 2;
    } else if (modifier === '*.5') {
        return Math.ceil(value / 2);
    } else if (modifier === '*0') {
        return 0;
    } else {
        return value;
    }
}

function calcMoveRate(movement_rate_species, movement_rate_other, movement_rate_temp, movement_rate_fatigue, movement_rate_enc) {
    const base_value = parseInt(movement_rate_species) + parseInt(movement_rate_other) + parseInt(movement_rate_temp);
    const moveAfterFatigue = applyMovementMod(base_value, movement_rate_fatigue);
    const moveAfterEnc = applyMovementMod(moveAfterFatigue, movement_rate_enc);

    if (moveAfterEnc < 0) {
        return {movement_rate: 0};
    }

    return {movement_rate: applyMovementMod(moveAfterFatigue, movement_rate_enc)};
}

function calcSpiritAP(pow, int, spirit_ap_other, spirit_ap_temp, action_points_calc, spirit_ap, spirit_ap_max) {
    let base_value;
    if (action_points_calc === "set_2") {
        base_value = 2;
    } else if (action_points_calc === "set_3") {
        base_value = 3;
    } else {
        base_value = Math.ceil((int + pow) / 12);
    }

    let new_spirit_ap_max = base_value + parseInt(spirit_ap_other) + parseInt(spirit_ap_temp);
    if (new_spirit_ap_max < 0) {
        new_spirit_ap_max = 0;
    }
    const diff_spirit_ap_max = new_spirit_ap_max - parseInt(spirit_ap_max);

    return {
        spirit_ap_base: base_value,
        spirit_ap_max: new_spirit_ap_max,
        spirit_ap: parseInt(spirit_ap) + diff_spirit_ap_max
    };
}

function calcSpiritIntensity(pow) {
    return {spirit_intensity: Math.ceil(parseInt(pow)/6)}
}

function calcSpiritDamage(spirit_damage_other, spirit_damage_temp, spirit_damage_calc, spirit_combat_skill_id, spirit_combat_skill_total) {
    if (spirit_combat_skill_id === '') {
        return {
            spirit_damage_base: 0,
            spirit_damage: 0
        }
    } else {
        const modifier = parseFloat(spirit_damage_calc);
        if (typeof spirit_combat_skill_total === 'undefined') {
            // I see no way around using the 2nd getAttrs and setAttrs in this case
            getAttrs([`${spirit_combat_skill_id}_total`], function(v){
                const skill_total = parseInt(v[`${spirit_combat_skill_id}_total`]);
                const base_steps = Math.ceil((skill_total * modifier)/20);
                console.log(`Setting attrs for spirit damage function trigger`);
                setAttrs({
                    spirit_damage_base: damageTable(base_steps),
                    spirit_damage: damageTable(base_steps + parseInt(spirit_damage_other) + parseInt(spirit_damage_temp))
                });
            });
            return {};
        } else {
            const skill_total = parseInt(spirit_combat_skill_total)
            const base_steps = Math.ceil((skill_total * modifier)/20);
            return {
                spirit_damage_base: damageTable(base_steps),
                spirit_damage: damageTable(base_steps + parseInt(spirit_damage_other) + parseInt(spirit_damage_temp))
            }
        }
    }
}

function calcSocialDamage(social_damage_other, social_damage_temp, social_attack_id_value, social_attack_total) {
    let base_steps;
    if (social_attack_id_value === '') {
        return {
            social_damage_base: 0,
            social_damage: 0
        }
    } else {
        if (typeof social_attack_total === 'undefined') {
            // I see no way around using the 2nd getAttrs and setAttrs in this case
            getAttrs([`${social_attack_id_value}_total`], function(v){
                base_steps = Math.ceil(parseInt(v[`${social_attack_id_value}_total`])/20);
                console.log(`Setting attrs for social damage function trigger`);
                setAttrs({
                    social_damage_base: damageTable(base_steps),
                    social_damage: damageTable(base_steps + parseInt(social_damage_other) + parseInt(social_damage_temp))
                });
            });
            return {};
        } else {
            base_steps = Math.ceil(parseInt(social_attack_total)/20);
            return {
                social_damage_base: damageTable(base_steps),
                social_damage: damageTable(base_steps + parseInt(social_damage_other) + parseInt(social_damage_temp))
            }
        }
    }
}

function calcSpiritInitiative(int, cha, spirit_ib_other, spirit_ib_temp) {
    const base_value = Math.ceil((int + cha) / 2);

    return {
        spirit_ib_base: base_value,
        spirit_ib: base_value + parseInt(spirit_ib_other) + parseInt(spirit_ib_temp)
    };
}

function calcSocialInitiative(int, cha, social_initiative_other, social_initiative_temp) {
    const base_value = Math.ceil((int + cha) / 2);

    return {
        social_initiative_base: base_value,
        social_initiative: base_value + parseInt(social_initiative_other) + parseInt(social_initiative_temp)
    };
}

function calcConfidence(willpower, confidence_other, confidence_temp) {
    const base_value = Math.floor(willpower/20);

    return {
        confidence_base: base_value,
        confidence: base_value + parseInt(confidence_other) + parseInt(confidence_temp)
    };
}

function calcComposure(pow, composure_other, composure_temp, current, currentMax) {
    const base_value = Math.ceil(pow/3);
    const newMax = base_value + parseInt(composure_other) + parseInt(composure_temp);
    const diff = parseInt(current) - parseInt(currentMax);

    return {
        composure_base: base_value,
        composure: newMax + diff,
        composure_max: newMax
    };
}

function calcIntegrity(cha, integrity_other, integrity_temp, current, currentMax) {
    const base_value = Math.ceil(cha/3);
    const newMax = base_value + parseInt(integrity_other) + parseInt(integrity_temp);
    const diff = parseInt(current) - parseInt(currentMax);

    return {
        integrity_base: base_value,
        integrity: newMax + diff,
        integrity_max: base_value + parseInt(integrity_other) + parseInt(integrity_temp)
    };
}

function calcResolve(int, resolve_other, resolve_temp, current, currentMax) {
    const base_value = Math.ceil(int/3);
    const newMax = base_value + parseInt(resolve_other) + parseInt(resolve_temp);
    const diff = parseInt(current) - parseInt(currentMax);

    return {
        resolve_base: base_value,
        resolve: newMax + diff,
        resolve_max: base_value + parseInt(resolve_other) + parseInt(resolve_temp)
    };
}

function calcAugmentation(sourceAttr, combatStyleIds, proSkillIds, passionIds) {
    let newVals = {};
    passionIds.forEach(id => {
        newVals[`repeating_passion_${id}_augment`] = 0;
    });
    proSkillIds.forEach(id => {
        newVals[`repeating_professionalskill_${id}_augment`] = 0;
    });
    combatStyleIds.forEach(id => {
        newVals[`repeating_combatstyle_${id}_augment`] = 0;
    });
    if (sourceAttr.startsWith('repeating_')) {
        targetVal = sourceAttr.replace('_augment', '_total');
        newVals['skill_augment'] = '@{skill_augment_value}';
        newVals[sourceAttr] = '1';
        newVals['skill_augment_value'] = `ceil(@{${targetVal}}/5)`;
    }

    return newVals;
}

function calcSocialAttack(sourceAttr, combatStyleIds, proSkillIds, passionIds, v) {
    const social_attack_id = v['social_attack_id'];
    const social_damage_other = v['social_damage_other'];
    const social_damage_temp = v['social_damage_temp'];
    let newVals = {};
    passionIds.forEach(id => {
        newVals[`repeating_passion_${id}_social_attack`] = 0;
    });
    proSkillIds.forEach(id => {
        newVals[`repeating_professionalskill_${id}_social_attack`] = 0;
    });
    combatStyleIds.forEach(id => {
        newVals[`repeating_combatstyle_${id}_social_attack`] = 0;
    });
    let socialDamageVals;
    if (sourceAttr.startsWith('repeating_')) {
        targetVal = sourceAttr.replace('_social_attack', '');
        newVals['social_attack_id'] = '${social_attack_id_value}';
        newVals['social_attack_id_value'] = `${targetVal}`;
        newVals[sourceAttr] = '1';
        newVals['social_attack_name'] = v[`${targetVal}_name`];
        newVals['social_attack_total'] = v[`${targetVal}_total`];
        newVals['social_attack_encumbered'] = v[`${targetVal}_encumbered`];
        newVals['social_attack_notes'] = v[`${targetVal}_notes`];
        socialDamageVals = calcSocialDamage(social_damage_other, social_damage_temp, `${targetVal}`);
    } else {
        newVals['social_attack_id_value'] = `${social_attack_id}`;
        newVals['social_attack_name'] = getTranslationByKey(`${social_attack_id}`);
        newVals['social_attack_total'] = v[`${social_attack_id}_total`];
        newVals['social_attack_encumbered'] = v[`${social_attack_id}_encumbered`];
        newVals['social_attack_notes'] = v[`${social_attack_id}_notes`];
        socialDamageVals = calcSocialDamage(social_damage_other, social_damage_temp, social_attack_id);
    }

    return {
        ...newVals,
        ...socialDamageVals
    };
}

function calcSocialDefense(sourceAttr, combatStyleIds, proSkillIds, passionIds, v) {
    const social_defense_id = v['social_defense_id'];
    let newVals = {};
    passionIds.forEach(id => {
        newVals[`repeating_passion_${id}_social_defense`] = 0;
    });
    proSkillIds.forEach(id => {
        newVals[`repeating_professionalskill_${id}_social_defense`] = 0;
    });
    combatStyleIds.forEach(id => {
        newVals[`repeating_combatstyle_${id}_social_defense`] = 0;
    });
    if (sourceAttr.startsWith('repeating_')) {
        targetVal = sourceAttr.replace('_social_defense', '');
        newVals['social_defense_id'] = '${social_defense_id_value}';
        newVals['social_defense_id_value'] = `${targetVal}`;
        newVals[sourceAttr] = '1';
        newVals['social_defense_name'] = v[`${targetVal}_name`];
        newVals['social_defense_total'] = v[`${targetVal}_total`];
        newVals['social_defense_encumbered'] = v[`${targetVal}_encumbered`];
        newVals['social_defense_notes'] = v[`${targetVal}_notes`];
    } else {
        newVals['social_defense_id_value'] = `${social_defense_id}`;
        newVals['social_defense_name'] = getTranslationByKey(`${social_defense_id}`);
        newVals['social_defense_total'] = v[`${social_defense_id}_total`];
        newVals['social_defense_encumbered'] = v[`${social_defense_id}_encumbered`];
        newVals['social_defense_notes'] = v[`${social_defense_id}_notes`];
    }

    return newVals;
}

/* # Traditions */
/* ## Tradition Constants */
const traditionTypeSettings = {
    "alchemy_assabian": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": {
                "conditions": "standard",
                "combine": "standard",
                "doses": "standard",
                "magnitude": "standard",
                "shelf_life": "standard"
            }
        }
    },
    "alchemy_sorandib": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "animism": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "arcane_magic_bard": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": true,
            "armor_penalty": true,
            "components": false
        }
    },
    "arcane_magic_high": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": true,
            "armor_penalty": true,
            "components": false
        }
    },
    "artifice": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": {
                "combine": "standard",
                "duration": "standard",
                "magnitude": "standard",
                "range": "standard",
                "targets": "standard"
            }
        }
    },
    "divine_magic_bard": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": true,
            "armor_penalty": false,
            "components": false
        }
    },
    "divine_magic_high": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": true,
            "armor_penalty": false,
            "components": false
        }
    },
    "divine_magic_low": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": true,
            "armor_penalty": false,
            "components": false
        }
    },
    "fae_powers": {
        "DEFAULT": {
            "other_skill": false,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "fairy_magic": {
        "DEFAULT": {
            "other_skill": false,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "folk_magic": {
        "DEFAULT": {
            "other_skill": false,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "incantations": {
        "DEFAULT": {
            "other_skill": false,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "mysticism": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": true,
            "armor_penalty": false,
            "components": false
        }
    },
    "psychic_powers": {
        "DEFAULT": {
            "other_skill": false,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "sandestin_magic": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": {
                "area": "sandestin",
                "combine": "sandestin",
                "fortune": "sandestin",
                "range": "standard",
                "services": "sandestin",
                "swiftness": "sandestin",
                "terms": "sandestin"
            }
        }
    },
    "sorcery": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": {
                "combine": "standard",
                "duration": "standard",
                "magnitude": "standard",
                "range": "standard",
                "targets": "standard"
            }
        },
        "after_the_vampire_wars": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": {
                "combine": "standard",
                "duration": "both",
                "magnitude": "standard",
                "range": "both",
                "targets": "standard"
            }
        },
        "perceforest": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": {
                "combine": "standard",
                "duration": "standard",
                "magnitude": "standard",
                "range": "standard",
                "targets": "standard",
                "wonders": "standard"
            }
        }
    },
    "sorcery_mythic_babylon":{
        "DEFAULT": {
            "other_skill": false,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "theism": {
        "DEFAULT": {
            "other_skill": true,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
    "work_songs": {
        "DEFAULT": {
            "other_skill": false,
            "dynamic_intensity": false,
            "armor_penalty": false,
            "components": false
        }
    },
}
/* ## Tradition Functions */
function calcTraditionTypeSettings(traditionId, type, magicSystems) {
    if (type === "custom") { return {}; }

    /* set everything to the default values */
    let newAttrs = {
        [`${traditionId}_other_skill_enabled`]: "",
        [`${traditionId}_dynamic_intensity_enabled`]: "",
        [`${traditionId}_armor_penalty_enabled`]: "",
        [`${traditionId}_components_enabled`]: ""
    };
    /* Make sure all components are disabled by default */
    ['ablation', 'area', 'combine', 'conditions', 'doses', 'duration', 'focus', 'focus', 'magnitude', 'precision',
        'range', 'services', 'shelf_life', 'swiftness', 'targets', 'terms', 'wonders'].forEach(component => {
        newAttrs[`${traditionId}_${component}_component`] = '';
    })
    /* Determine if we should use the DEFAULT or a setting variant of the rules */
    let systems = "DEFAULT";
    if (magicSystems in traditionTypeSettings[type]) {
        systems = magicSystems;
    }
    /* assign tradition type settings from the lookup table */
    if (!traditionTypeSettings[type][systems]["other_skill"]) { newAttrs[`${traditionId}_other_skill_enabled`] = 0 }
    if (traditionTypeSettings[type][systems]["dynamic_intensity"]) { newAttrs[`${traditionId}_dynamic_intensity_enabled`]
        = "@{dynamic_intensity_trait}" }
    if (traditionTypeSettings[type][systems]["armor_penalty"]) { newAttrs[`${traditionId}_armor_penalty_enabled`]
        = "@{armor_penalty_trait}" }
    if (traditionTypeSettings[type][systems]["components"] &&
        Object.keys(traditionTypeSettings[type][systems]["components"]).length > 0) {
        newAttrs[`${traditionId}_components_enabled`] = 1;
        for (const [key, value] of Object.entries(traditionTypeSettings[type][systems]["components"])) {
            if (key === "area" || key === "range") {
                newAttrs[`${traditionId}_${key}_component`] = `@{${key}_component_${value}_metric_trait}`;
            } else {
                newAttrs[`${traditionId}_${key}_component`] = `@{${key}_component_${value}_trait}`;
            }
        }
    }

    return newAttrs;
}

function calcTraditionPool(traditionId, traditionType, traditionRank) {
    if (traditionType === "custom") { return {}; }

    let poolLimit = '';
    if (traditionType === "theism") {
        if (traditionRank === 2) {
            poolLimit = "ceil(@{pow}*.25)";
        } else if (traditionRank === 3) {
            poolLimit = "ceil(@{pow}*.5)";
        } else if (traditionRank === 4) {
            poolLimit = "ceil(@{pow}*.75)";
        } else if (traditionRank === 5) {
            poolLimit = "@{pow}";
        } else {
            poolLimit = ""; /* set to pool default of none */
        }
    }
    return { [`${traditionId}_pool_limit`]: poolLimit};
}

function calcTraditionRolledAttrs(traditionId, skillId, v) {
    let skillMacro = `${skillId}_roll`;
    let skillName = '';
    let skillTotal = 0;

    if (skillId && !skillId.startsWith('repeating_')) {
        skillName = getTranslationByKey(`${skillId}`);
    } else if (v[`${skillId}_name`]) {
        skillName = v[`${skillId}_name`];
    }

    if (v[`${skillId}_total`]) {
        skillTotal = v[`${skillId}_total`]
    }

    return {
        [`${traditionId}_rolled_skill_name`]: skillName,
        [`${traditionId}_rolled_skill_total`]: skillTotal,
        [`${traditionId}_rolled_skill_macro`]: skillMacro
    }
}

function calcTraditionSummary(traditionId, traditionType, traditionRank, rolledSkillName, rolledSkillTotal, otherSkillName, otherSkillTotal, int, pow, cha) {
    let summary = "-";
    let maxSpellBase = 0;

    switch(traditionType) {
        case 'alchemy_assabian':
            summary = `${getTranslationByKey('intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('shaping_points')}: ${Math.ceil(otherSkillTotal / 10)}`;
            break;
        case 'alchemy_sorandib':
            summary = `${getTranslationByKey('intensity')}: ${Math.ceil(otherSkillTotal / 10)}, ${getTranslationByKey('mundane_intensity')}: ${Math.ceil(otherSkillTotal / 20)}`;
            break;
        case 'animism':
            let max_spirits = cha;
            if (traditionRank < 4) {
                max_spirits = Math.ceil(cha * (traditionRank * .25));
            }
            summary = `${getTranslationByKey('max_spirits')}: ${max_spirits}, ${getTranslationByKey('max_spirit_pow')}: ${Math.ceil((rolledSkillTotal / 10) * 3)}, ${getTranslationByKey('spirit_attributes')}: ${getTranslationByKey('see_spirit_combat')}`;
            if (traditionRank === 1) {
                summary = summary + `\r\n ${getTranslationByKey('trance_time')} (${getTranslationByKey('observe')}: 1 ${getTranslationByKey('hour-l')})`;
            } else if (traditionRank === 2) {
                summary = summary + `\r\n ${getTranslationByKey('trance_time')} (${getTranslationByKey('observe')}: 1 ${getTranslationByKey('minute-l')}, ${getTranslationByKey('converse')}: 1 ${getTranslationByKey('hour-l')})`;
            } else if (traditionRank === 3) {
                summary = summary + `\r\n ${getTranslationByKey('trance_time')} (${getTranslationByKey('observe')}: 1 ${getTranslationByKey('round-l')}, ${getTranslationByKey('converse')}: 1 ${getTranslationByKey('minute-l')}, ${getTranslationByKey('project_or_draw')}: 1 ${getTranslationByKey('hour-l')})`;
            } else if (traditionRank >= 4) {
                summary = summary + `\r\n ${getTranslationByKey('trance_time')} (${getTranslationByKey('observe')}: 1 ${getTranslationByKey('action-l')}, ${getTranslationByKey('converse')}: 1 ${getTranslationByKey('round-l')}, ${getTranslationByKey('project_or_draw')}: 1 ${getTranslationByKey('minute-l')}, ${getTranslationByKey('drag')}: 1 ${getTranslationByKey('hour-l')})`;
            }
            break;
        case 'arcane_magic_bard':
            maxSpellBase = Math.ceil(int/6);
            summary = `${getTranslationByKey('max_intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('magnitude')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('cantrips_known')}: ${Math.ceil(otherSkillTotal / 5)}`;
            if (traditionRank === 1) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 2) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+1}, ${getTranslationByKey('cost_reduction')}: -1)`;
            } else if (traditionRank === 3) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 4) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+3}, ${getTranslationByKey('cost_reduction')}: -3)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+1}, ${getTranslationByKey('cost_reduction')}: -1)`;
            } else if (traditionRank === 5) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            }
            break;
        case 'arcane_magic_high':
            maxSpellBase = Math.ceil(int/4);
            summary = `${getTranslationByKey('max_intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('magnitude')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('cantrips_known')}: ${Math.ceil(otherSkillTotal / 5)}`;
            if (traditionRank === 1) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 2) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 3) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 4) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+6}, ${getTranslationByKey('cost_reduction')}: -6)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_4_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase}, ${getTranslationByKey('difficulty')}: ${getTranslationByKey('hard')})`;
            } else if (traditionRank === 5) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+8}, ${getTranslationByKey('cost_reduction')}: -8)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+6}, ${getTranslationByKey('cost_reduction')}: -6)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_4_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2, ${getTranslationByKey('difficulty')}: ${getTranslationByKey('hard')})`;
                summary = summary + `\r\n${getTranslationByKey('rank_5_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase}, ${getTranslationByKey('difficulty')}: ${getTranslationByKey('formidable')})`;
            }
            break;
        case 'artifice':
            summary = `${getTranslationByKey('max_complexity')}: ${Math.ceil(rolledSkillTotal / 20)}, ${getTranslationByKey('task_rounds')}: ${Math.ceil(otherSkillTotal / 10)}, ${getTranslationByKey('intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('shaping_points')}: ${Math.ceil(otherSkillTotal / 10)}`;
            break;
        case 'divine_magic_bard':
            maxSpellBase = Math.ceil(int/6);
            summary = `${getTranslationByKey('max_intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('magnitude')}: ${Math.ceil(otherSkillTotal / 10)}`;
            if (traditionRank === 1) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 2) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+1}, ${getTranslationByKey('cost_reduction')}: -1)`;
            } else if (traditionRank === 3) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 4) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+3}, ${getTranslationByKey('cost_reduction')}: -3)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+1}, ${getTranslationByKey('cost_reduction')}: -1)`;
            } else if (traditionRank === 5) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            }
            break;
        case 'divine_magic_high':
            maxSpellBase = Math.ceil(int/4);
            summary = `${getTranslationByKey('max_intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('magnitude')}: ${Math.ceil(otherSkillTotal / 10)}`;
            if (traditionRank === 1) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 2) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 3) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 4) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+6}, ${getTranslationByKey('cost_reduction')}: -6)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_4_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase}, ${getTranslationByKey('difficulty')}: ${getTranslationByKey('hard')})`;
            } else if (traditionRank === 5) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+8}, ${getTranslationByKey('cost_reduction')}: -8)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+6}, ${getTranslationByKey('cost_reduction')}: -6)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+4}, ${getTranslationByKey('cost_reduction')}: -4)`;
                summary = summary + `\r\n${getTranslationByKey('rank_4_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2, ${getTranslationByKey('difficulty')}: ${getTranslationByKey('hard')})`;
                summary = summary + `\r\n${getTranslationByKey('rank_5_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase}, ${getTranslationByKey('difficulty')}: ${getTranslationByKey('formidable')})`;
            }
            break;
        case 'divine_magic_low':
            maxSpellBase = Math.ceil(int/6);
            summary = `${getTranslationByKey('max_intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('magnitude')}: ${Math.ceil(otherSkillTotal / 10)}`;
            if (traditionRank === 3) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 4) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+1}, ${getTranslationByKey('cost_reduction')}: -1)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            } else if (traditionRank === 5) {
                summary = summary + `\r\n${getTranslationByKey('rank_1_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+2}, ${getTranslationByKey('cost_reduction')}: -2)`;
                summary = summary + `\r\n${getTranslationByKey('rank_2_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase+1}, ${getTranslationByKey('cost_reduction')}: -1)`;
                summary = summary + `\r\n${getTranslationByKey('rank_3_spells')} (${getTranslationByKey('max_known')}: ${maxSpellBase})`;
            }
            break;
        case 'fae_powers':
            summary = `${getTranslationByKey('intensity')}: ${Math.ceil(rolledSkillTotal / 20)}, ${getTranslationByKey('max_active_powers')}: ${Math.ceil(rolledSkillTotal / 40)}`;
            break;
        case 'folk_magic':
            summary = `${getTranslationByKey('intensity')}: 1, ${getTranslationByKey('magnitude')}: 1, ${rolledSkillName}: ${rolledSkillTotal}%`;
            break;
        case 'mysticism':
            summary = `${getTranslationByKey('max_intensity')}: ${Math.ceil(rolledSkillTotal / 20)}, ${getTranslationByKey('max_cumulative_intensity')}: ${Math.ceil(otherSkillTotal / 10)}, ${getTranslationByKey('max_practiced_talents')}: ${Math.ceil(pow / 2)}`;
            break;
        case 'psychic_powers':
            summary = `${getTranslationByKey('intensity')}: ${Math.ceil(rolledSkillTotal / 20)}, ${getTranslationByKey('max_active_talents')}: ${Math.ceil(rolledSkillTotal / 40)}`;
            break;
        case 'sandestin_magic':
            summary = `${getTranslationByKey('coercion_points')}: ${Math.ceil(otherSkillTotal / 10)}`;
            break;
        case 'sorcery':
            summary = `${getTranslationByKey('intensity')}: ${Math.ceil(rolledSkillTotal / 10)}, ${getTranslationByKey('shaping_points')}: ${Math.ceil(otherSkillTotal / 10)}, ${getTranslationByKey('max_memorized_spells')}: ${int}`;
            break;
        case 'theism':
            summary = `${getTranslationByKey('intensity')}: ${Math.ceil(otherSkillTotal / 10)}, ${getTranslationByKey('magnitude')}: ${Math.ceil(otherSkillTotal / 10)}`;
            break;
        case 'work_songs':
            summary = `${getTranslationByKey('intensity')}: 1, ${getTranslationByKey('magnitude')}: 1`;
            break;
        default:
            if (otherSkillTotal > 0) {
                summary = `${rolledSkillName} ${rolledSkillTotal}%, ${otherSkillName} ${otherSkillTotal}%`;
            } else {
                summary = `${rolledSkillName} ${rolledSkillTotal}%`;
            }
    }

    return summary;
}

/* ## Tradition Triggers */
on("change:repeating_tradition:type", function(event) {
    const traditionId = "repeating_tradition_" + event.sourceAttribute.split('_')[2];

    getAttrs([`${traditionId}_type`, `${traditionId}_tradition_rank`, `${traditionId}_rolled_skill_name`,
        `${traditionId}_rolled_skill_total`, `${traditionId}_other_skill_name`, `${traditionId}_other_skill_total`,
        'int', 'pow', 'cha', 'magic_systems'], function(v) {
        const traditionRank = parseInt(v[`${traditionId}_tradition_rank`]);
        setAttrs({
            ...calcTraditionTypeSettings(traditionId, v[`${traditionId}_type`], v['magic_systems']),
            ...calcTraditionPool(traditionId, v[`${traditionId}_type`], traditionRank),
            [`${traditionId}_summary`]: calcTraditionSummary(traditionId, v[`${traditionId}_type`], traditionRank,
                v[`${traditionId}_rolled_skill_name`], parseInt(v[`${traditionId}_rolled_skill_total`]),
                v[`${traditionId}_other_skill_name`], parseInt(v[`${traditionId}_other_skill_total`]),
                parseInt(v['int']), parseInt(v['pow']), parseInt(v['cha']))
        });
    });
});

on("change:repeating_tradition:tradition_rank", function(event) {
    const traditionId = "repeating_tradition_" + event.sourceAttribute.split('_')[2];

    getAttrs([`${traditionId}_type`, `${traditionId}_tradition_rank`, `${traditionId}_rolled_skill_name`,
        `${traditionId}_rolled_skill_total`, `${traditionId}_other_skill_name`, `${traditionId}_other_skill_total`,
        'int', 'pow', 'cha'], function(v) {
        const traditionRank = parseInt(v[`${traditionId}_tradition_rank`]);
        setAttrs({
            ...calcTraditionPool(traditionId, v[`${traditionId}_type`], traditionRank),
            [`${traditionId}_summary`]: calcTraditionSummary(traditionId, v[`${traditionId}_type`], traditionRank,
                v[`${traditionId}_rolled_skill_name`], parseInt(v[`${traditionId}_rolled_skill_total`]),
                v[`${traditionId}_other_skill_name`], parseInt(v[`${traditionId}_other_skill_total`]),
                parseInt(v['int']), parseInt(v['pow']), parseInt(v['cha']))
        });
    });
});

on("change:repeating_tradition:rolled_skill_id", function(event) {
    const traditionId = "repeating_tradition_" + event.sourceAttribute.split('_')[2];
    let skillGetAttrs = [];
    if (!event.newValue) {
    } else if (event.newValue && event.newValue.startsWith('repeating_')) {
        skillGetAttrs.push(`${event.newValue}_name`, `${event.newValue}_total`);
    } else {
        skillGetAttrs.push(`${event.newValue}_total`);
    }
    getAttrs(skillGetAttrs.concat([`${traditionId}_type`, `${traditionId}_rank`]), function(v) {
        console.log(`Setting attrs for tradition ${traditionId} rolled_skill_id trigger`);
        setAttrs(calcTraditionRolledAttrs(traditionId, event.newValue, v));
    });
});

on("change:repeating_tradition:other_skill_id", function(event) {
    const id = event.sourceAttribute.split('_')[2];
    let skillGetAttrs = [];
    if (!event.newValue) {
    } else if (event.newValue && event.newValue.startsWith('repeating_')) {
        skillGetAttrs.push(`${event.newValue}_name`, `${event.newValue}_total`);
    } else {
        skillGetAttrs.push(`${event.newValue}_total`);
    }
    getAttrs(skillGetAttrs, function(v) {
        let skillName = '';
        let skillTotal = 0;
        if (event.newValue && !event.newValue.startsWith('repeating_')) {
            skillName = getTranslationByKey(`${event.newValue}`);
        } else if (v[`${event.newValue}_name`]) {
            skillName = v[`${event.newValue}_name`];
        }

        if (v[`${event.newValue}_total`]) {
            skillTotal = v[`${event.newValue}_total`]
        }

        console.log(`Setting attrs for tradition ${id} other_skill_id trigger`);
        setAttrs({
            [`repeating_tradition_${id}_other_skill_name`]: skillName,
            [`repeating_tradition_${id}_other_skill_total`]: skillTotal
        });
    });
});

/* Reset tradition rolls when character_name changes */
/*
on("change:character_name", function(event) {
    getSectionIDs("repeating_tradition", function(traditionIds) {
        let skillIdAttrs = [];
        traditionIds.forEach(id => {
            skillIdAttrs.push(`repeating_tradition_${id}_rolled_skill_id`);
        });

        getAttrs(skillIdAttrs.concat(['character_name']), function(v) {
            const characterName = v['character_name'];
            let newAttrs = {};

            traditionIds.forEach(id => {
                // Don't set for tradition with no skill id set
                if (v[`repeating_tradition_${id}_rolled_skill_id`]) {
                    const skillId = v[`repeating_tradition_${id}_rolled_skill_id`];
                    newAttrs[`repeating_tradition_${id}_rolled_skill_macro`] = `${characterName}|${skillId}_roll`;
                }
            });

            console.log(`Setting attrs for character_name trigger`);
            setAttrs(newAttrs);
        });
    });
});
 */


/* Import  Functions */
/**
 * Sanitizes a name from import data to avoid bugs with buttons and macros in the sheet (removes parenthesis) and will
 * set the name to the characters actual name is a major character import or type if minor character import
 * @param importName
 * @param importType
 * @returns {string}
 */
function getImportName(importName, importType) {
    if (importName.includes('(')) {
        if (importType === 'major') {
            return importName.split('(')[0].replace(/[()]/g, '').trim();
        } else {
            let [start, ...end] = importName.split('(');
            end = end.join("(");
            return end.replace(/[()]/g, '').trim();
        }
    } else {
        return importName.replace(/[()]/g, '').trim();
    }
}

/**
 * Imports JSON data reflecting a character or characters from the Mythras Encounter Generator
 * @param v, data collected from the sheet
 * @param import_type, either 'major' or 'minor' denoting the type of character to import
 */
function importCharacter(v, import_type, luck_points_rank) {
    try {
        console.log("json data = " + v['import_json_data']);
        const jsonData = JSON.parse(v['import_json_data']);
        const import_character = parseInt(v['import_character']);
        if (import_character > jsonData.length) {
            setAttrs({
                import_errors: "Error: The import data contains " + jsonData.length + " character(s) but you requested number " + import_character + "."
            });
            return;
        }
        const characterData = jsonData[parseInt(v['import_character']) - 1];
        let calc_armor_penalty = false;
        let newAttrs = {
            rank: 0,
            str_base: 0,
            con_base: 0,
            siz_base: 0,
            dex_base: 0,
            int_base: 0,
            pow_base: 0,
            cha_base: 0
        };
        let charObj = {
            str: 0,
            con: 0,
            siz: 0,
            dex: 0,
            int: 0,
            pow: 0,
            cha: 0,
            '21-int': 0,
            zero: 0
        }

        console.log("Importing Info");
        /* Import Info */
        /* Due to differences in parsing we will import name and species after sheet type */

        if (characterData["cults"] !== 'undefined') {
            if (typeof characterData["cults"][0] !== []) {
                if (typeof characterData["cults"][0] !== 'undefined') {
                    let cults = "";
                    for (let i=0; i < characterData["cults"].length; i++) {
                        cults = cults + " * " + characterData["cults"][i] + "\r\n";
                    }
                    newAttrs['cult_notes'] = cults;
                }
            }
        }

        if (typeof characterData["cult_rank"] !== 'undefined' && luck_points_rank === '1') {
            if (characterData["cult_rank"].toLowerCase() in cultRankMap) {
                newAttrs['rank'] = cultRankMap[characterData["cult_rank"].toLowerCase()];
            }
        }

        if (typeof characterData["notes"] !== 'undefined') {
            newAttrs['sheet_notes'] = characterData["notes"];
        }

        console.log("Importing Characteristics");
        /* Import Stats */
        characterData["stats"].forEach(stat => {
            const statKey = Object.keys(stat)[0];
            const statValue = stat[statKey];

            switch (statKey) {
                case 'STR':
                    newAttrs['str_base'] = statValue;
                    charObj['str'] = statValue;
                    break;
                case 'CON':
                    newAttrs['con_base'] = statValue;
                    charObj['con'] = statValue;
                    break;
                case 'SIZ':
                    newAttrs['siz_base'] = statValue;
                    charObj['siz'] = statValue;
                    break;
                case 'DEX':
                    newAttrs['dex_base'] = statValue;
                    charObj['dex'] = statValue;
                    break;
                case 'INT':
                    newAttrs['int_base'] = statValue;
                    charObj['int'] = statValue;
                    charObj['21-int'] = 21 - statValue;
                    break;
                case 'POW':
                    newAttrs['pow_base'] = statValue;
                    charObj['pow'] = statValue;
                    break;
                case 'CHA':
                    newAttrs['cha_base'] = statValue;
                    charObj['cha'] = statValue;
                    break;
            }
        });

        console.log("Detect Sheet type");
        /* Detect Sheet Character Type, Species, and name */
        if (newAttrs['str_base'] === 0 && newAttrs['con_base'] === 0 && newAttrs['siz_base'] === 0 && newAttrs['dex_base'] === 0) {
            newAttrs['type'] = 'spirit';
            newAttrs['character_name'] = getImportName(characterData['name'], 'minor');
            newAttrs['conflict_mode'] = "spirit_combat";
        } else if (import_type === 'major') {
            newAttrs['type'] = 'character';
            newAttrs['character_name'] = getImportName(characterData['name'], import_type)
        } else {
            newAttrs['type'] = 'creature';
            newAttrs['character_name'] = getImportName(characterData['name'], import_type)
        }

        console.log("Importing Attributes");
        /* Import Attributes */
        if (typeof characterData["attributes"]["movement"] !== 'undefined') {
            const moveInt = parseInt(characterData["attributes"]["movement"]);
            if (Number.isInteger(moveInt) && moveInt > 0) {
                newAttrs['movement_rate_species'] = moveInt;
            } else {
                newAttrs['movement_rate_calc'] = 'custom';
                newAttrs['custom_movement'] = characterData["attributes"]["movement"];
            }
        }

        let initiativeData = "";
        if (typeof characterData["attributes"]["strike_rank"] !== 'undefined') {
            initiativeData = characterData["attributes"]["strike_rank"];
        } else if (typeof characterData["attributes"]["initiative_bonus"] !== 'undefined') {
            initiativeData = characterData["attributes"]["initiative_bonus"];
        } else if (typeof characterData["attributes"]["initiative"] !== 'undefined') {
            initiativeData = characterData["attributes"]["initiative"];
        }
        if (initiativeData.includes("-")) {
            /* if a penalty is present we will add ENC later when we do hit locations */
            calc_armor_penalty = true;
        }

        console.log("Importing Hit Locations");
        /* Import Hit Locations */
        if (parseInt(v['simplified_combat_enabled']) === 1) {
            newAttrs['hit_locations'] = "simplified";
            let encTotal = 0;
            let apTotal = 0;
            characterData["hit_locations"].forEach(location => {
                let locationAP = location['ap'];
                if (locationAP > 0) {
                    encTotal = encTotal + (locationAP - 1);
                    apTotal = apTotal + locationAP;
                }
            });
            /* Apply total armor ENC to one location for simplified combat */
            if (calc_armor_penalty) {
                newAttrs['location1_armor_enc'] = encTotal;
            }
            /* Get the average ap value as a rough conversion to simplified combat */
            newAttrs['location1_armor_ap'] = Math.round(apTotal / characterData["hit_locations"].length);
        } else {
            /* Determine number of hit locations and set custom form to proper amount */
            if (characterData["hit_locations"].length === 12) {
                newAttrs['hit_locations'] = "custom";
            } else {
                newAttrs['hit_locations'] = "custom" + characterData["hit_locations"].length;
            }

            const base_hp = Math.ceil((newAttrs['con_base']+newAttrs['siz_base'])/5);

            for (let i=0; i < characterData["hit_locations"].length; i++) {
                let location = i + 1;
                let locationEnc = 0;

                let table = characterData["hit_locations"][i]["range"].split("-");
                newAttrs[`location${location}_table_start`] = parseInt(table[0]);
                if (!table[1]) {
                    newAttrs[`location${location}_table_end`] = parseInt(table[0]);
                } else {
                    newAttrs[`location${location}_table_end`] = parseInt(table[1]);
                }

                newAttrs[`location${location}_name`] = characterData["hit_locations"][i]["name"];

                let locationAP = characterData["hit_locations"][i]['ap'];
                if (calc_armor_penalty && locationAP > 0) {
                    locationEnc = locationAP - 1;
                }
                newAttrs[`location${location}_armor_ap`] = locationAP;
                newAttrs[`location${location}_armor_enc`] = locationEnc;
                newAttrs[`location${location}_hp_max_base_mod`] = parseInt(characterData["hit_locations"][i]["hp"]) - base_hp;
            }
        }

        console.log("Importing Combat Styles and Weapons");
        /* Import Combat Styles and Weapons */
        if (typeof characterData["combat_styles"] !== 'undefined') {
            characterData["combat_styles"].forEach(combat_style => {
                const combatstyleid = generateRowID();
                const base_combatstyle = newAttrs['str_base'] + newAttrs['dex_base'];
                newAttrs["repeating_combatstyle_" + combatstyleid + "_name"] = combat_style["name"];
                newAttrs["repeating_combatstyle_" + combatstyleid + "_other"] = combat_style["value"] - base_combatstyle;
                newAttrs["repeating_combatstyle_" + combatstyleid + "_details"] = 0;

                    combat_style["weapons"].forEach(weapon => {
                    const weaponid = generateRowID();

                    if (weapon["type"] === "ranged") {
                        newAttrs["repeating_rangedweapon_" + weaponid + "_name"] = weapon["name"];
                        newAttrs["repeating_rangedweapon_" + weaponid + "_force"] = weapon["size"];
                        newAttrs["repeating_rangedweapon_" + weaponid + "_impale_size"] = weapon["size"];
                        newAttrs["repeating_rangedweapon_" + weaponid + "_range"] = weapon["range"];
                        if (weapon["add_damage_modifier"] === true) {
                            newAttrs["repeating_rangedweapon_" + weaponid + "_damage_mod_toggle"] = "@{damage_mod}";
                        } else {
                            newAttrs["repeating_rangedweapon_" + weaponid + "_damage_mod_toggle"] = 0;
                        }
                        newAttrs["repeating_rangedweapon_" + weaponid + "_damage"] = weapon["damage"];
                        newAttrs["repeating_rangedweapon_" + weaponid + "_ap"] = weapon["ap"];
                        newAttrs["repeating_rangedweapon_" + weaponid + "_hp"] = weapon["hp"];
                        newAttrs["repeating_rangedweapon_" + weaponid + "_hp_max"] = weapon["hp"];
                        newAttrs["repeating_rangedweapon_" + weaponid + "_notes"] = weapon["effects"];
                        // Must set favored as string
                        newAttrs["repeating_rangedweapon_" + weaponid + "_favored"] = '1';
                        if(newAttrs['type'] !== 'character') {
                            newAttrs["repeating_rangedweapon_" + weaponid + "_details"] = 0;

                        }
                    } else {
                        newAttrs["repeating_meleeweapon_" + weaponid + "_name"] = weapon["name"];
                        newAttrs["repeating_meleeweapon_" + weaponid + "_size"] = weapon["size"];
                        newAttrs["repeating_meleeweapon_" + weaponid + "_reach"] = weapon["reach"];
                        if (weapon["add_damage_modifier"] === true) {
                            newAttrs["repeating_meleeweapon_" + weaponid + "_damage_mod_toggle"] = "@{damage_mod}";
                        } else {
                            newAttrs["repeating_meleeweapon_" + weaponid + "_damage_mod_toggle"] = 0;
                        }
                        newAttrs["repeating_meleeweapon_" + weaponid + "_damage"] = weapon["damage"];
                        newAttrs["repeating_meleeweapon_" + weaponid + "_ap"] = weapon["ap"];
                        newAttrs["repeating_meleeweapon_" + weaponid + "_hp"] = weapon["hp"];
                        newAttrs["repeating_meleeweapon_" + weaponid + "_hp_max"] = weapon["hp"];
                        newAttrs["repeating_meleeweapon_" + weaponid + "_notes"] = weapon["effects"];
                        // Must set favored as string
                        newAttrs["repeating_meleeweapon_" + weaponid + "_favored"] = '1';
                        if(newAttrs['type'] !== 'character') {
                            newAttrs["repeating_meleeweapon_" + weaponid + "_details"] = 0;
                        }
                    }
                });
            });
        }

        console.log("Importing skills");
        /* Import Skills */
        let magicSkillIds = {};
        if (typeof characterData["skills"] !== 'undefined') {
            characterData["skills"].forEach(skill => {
                const skillKey = Object.keys(skill)[0];
                const skillValue = skill[skillKey];
                const skillSearchableKey = skillKey.replace(/ /g,"_").toLowerCase();

                if (
                    (newAttrs['type'] === 'character' && allStdSkillIds.includes(skillSearchableKey)) ||
                    (newAttrs['type'] === 'creature' && ['brawn', 'endurance', 'evade', 'willpower', 'unarmed'].includes(skillSearchableKey)) ||
                    (newAttrs['type'] === 'spirit' && ['willpower', 'spectral_combat'].includes(skillSearchableKey))
                ) {
                    const char1 = charObj[stdSkillChars[skillSearchableKey][0]];
                    const char2 = charObj[stdSkillChars[skillSearchableKey][1]];
                    newAttrs[`${skillSearchableKey}_other`] = skillValue - char1 - char2;
                    if (skillSearchableKey === 'willpower' || skillSearchableKey === 'spectral_combat') {
                        magicSkillIds[skillSearchableKey] = {
                            /* don't need to store name and id for standard skills */
                            value: skillValue
                        };
                    }
                } else if (newAttrs['type'] !== 'character' && allStdSkillIds.includes(skillSearchableKey)) {
                    /* if a minor character import remaining standard skills as professional skills instead */
                    const skillid = generateRowID();
                    const char1name = stdSkillChars[skillSearchableKey][0];
                    const char1 = charObj[char1name];
                    const char2name = stdSkillChars[skillSearchableKey][1];
                    const char2 = charObj[char2name];

                    newAttrs[`repeating_professionalskill_${skillid}_name`] = skillKey;
                    newAttrs[`repeating_professionalskill_${skillid}_char1`] = `@{${char1name}}`;
                    newAttrs[`repeating_professionalskill_${skillid}_char2`] = `@{${char2name}}`;
                    newAttrs[`repeating_professionalskill_${skillid}_other`] = skillValue - char1 - char2;
                } else if (allNonSpecialtyProSkillIds.includes(skillSearchableKey)) {
                    /* Import known professional skills as such */
                    const skillid = generateRowID();
                    const char1name = nonSpecialtyProSkillChars[skillSearchableKey][0];
                    const char1 = charObj[char1name];
                    const char2name = nonSpecialtyProSkillChars[skillSearchableKey][1];
                    const char2 = charObj[char2name];

                    if (megMagicSkillIds.includes(skillSearchableKey)) {
                        magicSkillIds[skillSearchableKey] = {
                            id: `repeating_professionalskill_${skillid}`,
                            name: skillKey,
                            value: skillValue
                        };
                    }

                    newAttrs[`repeating_professionalskill_${skillid}_name`] = skillKey;
                    newAttrs[`repeating_professionalskill_${skillid}_char1`] = `@{${char1name}}`;
                    newAttrs[`repeating_professionalskill_${skillid}_char2`] = `@{${char2name}}`;
                    newAttrs[`repeating_professionalskill_${skillid}_other`] = skillValue - char1 - char2;
                } else if (skillSearchableKey.startsWith('passion')) {
                    newAttrs[`repeating_passion_${skillid}_name`] = skillKey;
                    newAttrs[`repeating_passion_${skillid}_type`] = 'passion';
                    newAttrs[`repeating_passion_${skillid}_total`] = skillValue;
                } else if (skillSearchableKey.startsWith('dependency')) {
                    newAttrs[`repeating_passion_${skillid}_name`] = skillKey;
                    newAttrs[`repeating_passion_${skillid}_type`] = 'dependency';
                    newAttrs[`repeating_passion_${skillid}_total`] = skillValue;
                } else if (skillSearchableKey.startsWith('peculiarity')) {
                    newAttrs[`repeating_passion_${skillid}_name`] = skillKey;
                    newAttrs[`repeating_passion_${skillid}_type`] = 'peculiarity';
                    newAttrs[`repeating_passion_${skillid}_total`] = skillValue;
                } else {
                    const skillid = generateRowID();

                    // Try to identify it as a known specialty skill, else treat as unknown skill
                    let knownSpecialtySkill = false;
                    allSpecialtyProSkillIds.find(specialtyId => {
                        if (skillSearchableKey.startsWith(specialtyId)) {
                            const char1name = specialtyProSkillChars[specialtyId][0];
                            const char1 = charObj[char1name];
                            const char2name = specialtyProSkillChars[specialtyId][1];
                            const char2 = charObj[char2name];

                            if (megMagicSkillIds.includes(skillSearchableKey)) {
                                magicSkillIds[skillSearchableKey] = {
                                    id: `repeating_professionalskill_${skillid}`,
                                    name: skillKey,
                                    value: skillValue
                                };
                            }

                            newAttrs[`repeating_professionalskill_${skillid}_name`] = skillKey;
                            newAttrs[`repeating_professionalskill_${skillid}_char1`] = `@{${char1name}}`;
                            newAttrs[`repeating_professionalskill_${skillid}_char2`] = `@{${char2name}}`;
                            newAttrs[`repeating_professionalskill_${skillid}_other`] = skillValue - char1 - char2;

                            knownSpecialtySkill = true;
                            return true;
                        }
                        return false;
                    });

                    if(!knownSpecialtySkill) {
                        newAttrs[`repeating_passion_${skillid}_name`] = skillKey;
                        newAttrs[`repeating_passion_${skillid}_other`] = skillValue;
                    }
                }
            });
        }

        console.log("Importing Folk Magic");
        /* Import Folk Magic */
        const folkMagicTraditionId = 'repeating_tradition_' + generateRowID();
        if (magicSkillIds.hasOwnProperty('folk_magic')) {
            newAttrs[`${folkMagicTraditionId}_name`] = getTranslationByKey('folk_magic');
            newAttrs[`${folkMagicTraditionId}_type`] = "folk_magic";
            if (characterData["cult_rank"].toLowerCase() in cultRankMap) {
                newAttrs[`${folkMagicTraditionId}_tradition_rank`] = cultRankMap[characterData["cult_rank"].toLowerCase()];
            }
            newAttrs[`${folkMagicTraditionId}_rolled_skill_id`] = magicSkillIds['folk_magic']['id'];
            newAttrs[`${folkMagicTraditionId}_rolled_skill_name`] = magicSkillIds['folk_magic']['name'];
            newAttrs[`${folkMagicTraditionId}_rolled_skill_value`] = magicSkillIds['folk_magic']['value'];
            newAttrs[`${folkMagicTraditionId}_rolled_skill_macro`] = `${magicSkillIds['folk_magic']['id']}_roll`;
            newAttrs[`${folkMagicTraditionId}_details`] = 0;
        }

        if (typeof characterData["folk_spells"] !== 'undefined') {
            characterData["folk_spells"].forEach(spellName => {
                const spellId = 'repeating_power_' + generateRowID();
                newAttrs[`${spellId}_name`] = spellName;
                newAttrs[`${spellId}_type`] = getTranslationByKey('folk_magic');
                newAttrs[`${spellId}_tradition_id`] = folkMagicTraditionId;
                newAttrs[`${spellId}_details`] = 0;
            });
        }

        console.log("Importing Animism");
        /* Import Animism */
        const animismTraditionId = 'repeating_tradition_' + generateRowID();
        if (magicSkillIds.hasOwnProperty('binding') && magicSkillIds.hasOwnProperty('trance')) {
            newAttrs[`${animismTraditionId}_name`] = getTranslationByKey('animism');
            newAttrs[`${animismTraditionId}_type`] = "animism";
            if (characterData["cult_rank"].toLowerCase() in cultRankMap) {
                newAttrs[`${animismTraditionId}_tradition_rank`] = cultRankMap[characterData["cult_rank"].toLowerCase()];
            }
            newAttrs[`${animismTraditionId}_rolled_skill_id`] = magicSkillIds['binding']['id'];
            newAttrs[`${animismTraditionId}_rolled_skill_name`] = magicSkillIds['binding']['name'];
            newAttrs[`${animismTraditionId}_rolled_skill_value`] = magicSkillIds['binding']['value'];
            newAttrs[`${animismTraditionId}_rolled_skill_macro`] = `${magicSkillIds['binding']['id']}_roll`;
            newAttrs[`${animismTraditionId}_other_skill_id`] = magicSkillIds['trance']['id'];
            newAttrs[`${animismTraditionId}_other_skill_name`] = magicSkillIds['trance']['name'];
            newAttrs[`${animismTraditionId}_other_skill_value`] = magicSkillIds['trance']['value'];
            newAttrs[`${animismTraditionId}_details`] = 0;
        }

        /* Import Spirits TODO: enhance with in sheet spirits?*/
        if (typeof characterData["spirits"] !== 'undefined') {
            characterData["spirits"].forEach(spirit => {
                const spiritId = generateRowID();
                newAttrs[`repeating_fetish_${spiritId}_name`] = spirit["name"];
                newAttrs[`repeating_fetish_${spiritId}_fetish_json`] = JSON.stringify([spirit]);
            });
        }

        console.log("Configuring spirit combat")
        /* Configure Spirit Combat */
        /* ancestor spirits may have binding and spectral combat in which case we choose the largest of the two */
        /* in addition willpower may potentially be the most effective if more than twice the others */
        let binding_value = 0;
        if (magicSkillIds.hasOwnProperty('binding')) {
            binding_value = magicSkillIds['binding']['value'];
        }

        if ((newAttrs['type'] === 'spirit')) {
            /* if a spirit we know spectral-combat is better than willpower so use largest of binding or spectral_combat */
            let spectral_combat_value = magicSkillIds['spectral_combat']['value'];

            if (binding_value >= spectral_combat_value) {
                newAttrs["spirit_combat_skill_id"] = magicSkillIds['binding']['id'];
            } else {
                newAttrs["spirit_combat_skill_id"] = "spectral_combat";
            }
            newAttrs["spirit_damage_calc"] = 1;
        } else {
            /* not a spirit so use largest of effective willpower or binding */
            let effective_willpower = charObj['pow']; /* Only half the base */
            if (magicSkillIds.hasOwnProperty('willpower')) {
                effective_willpower = Math.ceil(magicSkillIds['willpower']['value'] / 2);
            }

            if (binding_value >= effective_willpower) {
                newAttrs["spirit_combat_skill_id"] = magicSkillIds['binding']['id'];
                newAttrs["spirit_damage_calc"] = 1;
            }
            /* willpower is the default so no else required */
        }

        console.log("Importing Mysticism");
        /* Import Mysticism */
        const mysticismTraditionId = 'repeating_tradition_' + generateRowID();
        if (magicSkillIds.hasOwnProperty('meditation') && magicSkillIds.hasOwnProperty('path')) {
            newAttrs[`${mysticismTraditionId}_name`] = getTranslationByKey('mysticism');
            newAttrs[`${mysticismTraditionId}_type`] = "mysticism";
            if (characterData["cult_rank"].toLowerCase() in cultRankMap) {
                newAttrs[`${mysticismTraditionId}_tradition_rank`] = cultRankMap[characterData["cult_rank"].toLowerCase()];
            }
            newAttrs[`${mysticismTraditionId}_rolled_skill_id`] = magicSkillIds['path']['id'];
            newAttrs[`${mysticismTraditionId}_rolled_skill_name`] = magicSkillIds['path']['name'];
            newAttrs[`${mysticismTraditionId}_rolled_skill_value`] = magicSkillIds['path']['value'];
            newAttrs[`${mysticismTraditionId}_rolled_skill_macro`] = `${magicSkillIds['path']['id']}_roll`;
            newAttrs[`${mysticismTraditionId}_other_skill_id`] = magicSkillIds['meditation']['id'];
            newAttrs[`${mysticismTraditionId}_other_skill_name`] = magicSkillIds['meditation']['name'];
            newAttrs[`${mysticismTraditionId}_other_skill_value`] = magicSkillIds['meditation']['value'];
            newAttrs[`${mysticismTraditionId}_details`] = 0;
        }


        if (typeof characterData["mysticism_spells"] !== 'undefined') {
            characterData["mysticism_spells"].forEach(talentName => {
                const talentId = 'repeating_power_' + generateRowID();
                newAttrs[`${talentId}_name`] = talentName;
                newAttrs[`${talentId}_type`] = getTranslationByKey('mysticism');
                newAttrs[`${talentId}_tradition_id`] = mysticismTraditionId;
                newAttrs[`${talentId}_details`] = 0;
            });
        }

        console.log("Importing Sorcery");
        /* Import Sorcery */
        const sorceryTraditionId = 'repeating_tradition_' + generateRowID();
        if (magicSkillIds.hasOwnProperty('invocation') && magicSkillIds.hasOwnProperty('shaping')) {
            newAttrs[`${sorceryTraditionId}_name`] = getTranslationByKey('sorcery');
            newAttrs[`${sorceryTraditionId}_type`] = "sorcery";
            if (characterData["cult_rank"].toLowerCase() in cultRankMap) {
                newAttrs[`${sorceryTraditionId}_tradition_rank`] = cultRankMap[characterData["cult_rank"].toLowerCase()];
            }
            newAttrs[`${sorceryTraditionId}_rolled_skill_id`] = magicSkillIds['invocation']['id'];
            newAttrs[`${sorceryTraditionId}_rolled_skill_name`] = magicSkillIds['invocation']['name'];
            newAttrs[`${sorceryTraditionId}_rolled_skill_value`] = magicSkillIds['invocation']['value'];
            newAttrs[`${sorceryTraditionId}_rolled_skill_macro`] = `${magicSkillIds['invocation']['id']}_roll`;
            newAttrs[`${sorceryTraditionId}_other_skill_id`] = magicSkillIds['shaping']['id'];
            newAttrs[`${sorceryTraditionId}_other_skill_name`] = magicSkillIds['shaping']['name'];
            newAttrs[`${sorceryTraditionId}_other_skill_value`] = magicSkillIds['shaping']['value'];
            newAttrs[`${sorceryTraditionId}_details`] = 0;
        }

        if (typeof characterData["sorcery_spells"] !== 'undefined') {
            characterData["sorcery_spells"].forEach(spellName => {
                const spellId = 'repeating_power_' + generateRowID();
                newAttrs[`${spellId}_name`] = spellName;
                newAttrs[`${spellId}_type`] = getTranslationByKey('sorcery');
                newAttrs[`${spellId}_tradition_id`] = sorceryTraditionId;
                newAttrs[`${spellId}_details`] = 0;
            });
        }

        console.log("Importing Theism");
        /* Import Theism */
        const theismTraditionId = 'repeating_tradition_' + generateRowID();
        if (magicSkillIds.hasOwnProperty('exhort') && magicSkillIds.hasOwnProperty('devotion')) {
            newAttrs[`${theismTraditionId}_name`] = getTranslationByKey('theism');
            newAttrs[`${theismTraditionId}_type`] = "theism";
            if (characterData["cult_rank"].toLowerCase() in cultRankMap) {
                newAttrs[`${theismTraditionId}_tradition_rank`] = cultRankMap[characterData["cult_rank"].toLowerCase()];
            }
            newAttrs[`${theismTraditionId}_rolled_skill_id`] = magicSkillIds['exhort']['id'];
            newAttrs[`${theismTraditionId}_rolled_skill_name`] = magicSkillIds['exhort']['name'];
            newAttrs[`${theismTraditionId}_rolled_skill_value`] = magicSkillIds['exhort']['value'];
            newAttrs[`${theismTraditionId}_rolled_skill_macro`] = `${magicSkillIds['exhort']['id']}_roll`;
            newAttrs[`${theismTraditionId}_other_skill_id`] = magicSkillIds['devotion']['id'];
            newAttrs[`${theismTraditionId}_other_skill_name`] = magicSkillIds['devotion']['name'];
            newAttrs[`${theismTraditionId}_other_skill_value`] = magicSkillIds['devotion']['value'];
            newAttrs[`${theismTraditionId}_details`] = 0;
        }

        if (typeof characterData["theism_spells"] !== 'undefined') {
            characterData["theism_spells"].forEach(miracleName => {
                const miracleId = 'repeating_power_' + generateRowID();
                newAttrs[`${miracleId}_name`] = miracleName;
                newAttrs[`${miracleId}_type`] = getTranslationByKey('theism');
                newAttrs[`${miracleId}_tradition_id`] = theismTraditionId;
                newAttrs[`${miracleId}_details`] = 0;
            });
        }

        console.log("Importing Features");
        /* Import Features */
        if (typeof characterData["features"] !== 'undefined') {

        }
        /* TODO: feature imports */
        /* Example template to work from https://mythras.skoll.xyz/generate_enemies_json/?id=6206&amount=2 */

        /* Set import data blank to free space and clear any previous errors*/
        newAttrs['import_json_data'] = '';
        newAttrs['import_errors'] = '';

        console.log(newAttrs);
        setAttrs(newAttrs);
    } catch (error) {
        setAttrs({
            import_errors: error.toString()
        });
    }
}

/* Characteristic Triggers */
/* STR */
on('change:str_base change:str_other change:str_temp', function() {
    const stdSkillGetAttrs = getStdSkillGetAttrs(charStdSkillIds['str']);

    getSectionIDs("repeating_professionalskill", function(proSkillIds) {
        getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
            getSectionIDs("repeating_tradition", function(traditionIds) {
                let proSkillGetAttrs = [];
                proSkillIds.forEach(id => {
                    proSkillGetAttrs.push(`repeating_professionalskill_${id}_char1`, `repeating_professionalskill_${id}_char2`, `repeating_professionalskill_${id}_other`)
                });
                let combatStyleGetAttrs = [];
                combatStyleIds.forEach(id => {
                    combatStyleGetAttrs.push(`repeating_combatstyle_${id}_char1`, `repeating_combatstyle_${id}_char2`, `repeating_combatstyle_${id}_other`)
                });
                let traditionGetAttrs = [];
                traditionIds.forEach(traditionId => {
                    traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                        `repeating_tradition_${traditionId}_other_skill_id`,
                        `repeating_tradition_${traditionId}_rolled_skill_total`,
                        `repeating_tradition_${traditionId}_other_skill_total`,
                        `repeating_tradition_${traditionId}_rolled_skill_name`,
                        `repeating_tradition_${traditionId}_other_skill_name`,
                        `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
                });

                getAttrs(allCharGetAttrs.concat(stdSkillGetAttrs, proSkillGetAttrs, combatStyleGetAttrs, encGetAttrs, hitPointGetAttrs, traditionGetAttrs,
                    ['damage_mod_calc', 'damage_mod_other', 'damage_mod_temp', 'fatigue'],
                    ['initiative_bonus_other', 'initiative_bonus_temp', 'armor_penalty', 'athletics_total',
                        'initiative_add_one_tenth_athletics'],
                    ['movement_rate_species', 'movement_rate_other', 'movement_rate_temp', 'movement_rate_fatigue'],
                    ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                    ['social_damage_temp', 'social_damage_other', 'social_attack_id_value', 'social_defense_id_value']), function(v) {
                    const charObj = buildCharObj(v);
                    const standardSkillVals = calcStdSkills(charStdSkillIds['str'], charObj, traditionIds, v);
                    const hp_max_base = calcBaseHP(charObj['con'], charObj['siz'], charObj['pow'], charObj['str'],
                        v['hp_calc'], v['simplified_combat_enabled']);
                    const all_hp_temp = parseInt(v['all_hp_temp']);
                    const initiative_bonus_fatigue = parseInt(fatigueTable[v['fatigue']][2]);
                    const newEncVals = calcEnc(charObj['str'], v);

                    console.log("Setting attrs for str trigger");
                    setAttrs({
                        str: charObj['str'],
                        ...standardSkillVals,
                        ...calcProSkills("professionalskill", proSkillIds, charObj, traditionIds, v),
                        ...calcProSkills("combatstyle", combatStyleIds, charObj, traditionIds, v),
                        ...newEncVals,
                        ...calcInitiativeBonus(charObj['int'], charObj['dex'], v['initiative_bonus_other'],
                            v['initiative_bonus_temp'], parseInt(v['armor_penalty']), initiative_bonus_fatigue, standardSkillVals['athletics_total'],
                            v['initiative_add_one_tenth_athletics']),
                        ...calcDamageMod(charObj['str'], charObj['siz'], charObj['con'], charObj['pow'], v['damage_mod_calc'],
                            v['damage_mod_other'], v['damage_mod_temp']),
                        hp_max_base: hp_max_base,
                        ...calcLocationHP('1', hp_max_base, v['location1_hp_max_base_mod'], v['location1_hp_max_other'],
                            all_hp_temp, v['location1_hp'], v['location1_hp_max']),
                        ...calcLocationHP('2', hp_max_base, v['location2_hp_max_base_mod'], v['location2_hp_max_other'],
                            all_hp_temp, v['location2_hp'], v['location2_hp_max']),
                        ...calcLocationHP('3', hp_max_base, v['location3_hp_max_base_mod'], v['location3_hp_max_other'],
                            all_hp_temp, v['location3_hp'], v['location3_hp_max']),
                        ...calcLocationHP('4', hp_max_base, v['location4_hp_max_base_mod'], v['location4_hp_max_other'],
                            all_hp_temp, v['location4_hp'], v['location4_hp_max']),
                        ...calcLocationHP('5', hp_max_base, v['location5_hp_max_base_mod'], v['location5_hp_max_other'],
                            all_hp_temp, v['location5_hp'], v['location5_hp_max']),
                        ...calcLocationHP('6', hp_max_base, v['location6_hp_max_base_mod'], v['location6_hp_max_other'],
                            all_hp_temp, v['location6_hp'], v['location6_hp_max']),
                        ...calcLocationHP('7', hp_max_base, v['location7_hp_max_base_mod'], v['location7_hp_max_other'],
                            all_hp_temp, v['location7_hp'], v['location7_hp_max']),
                        ...calcLocationHP('8', hp_max_base, v['location8_hp_max_base_mod'], v['location8_hp_max_other'],
                            all_hp_temp, v['location8_hp'], v['location8_hp_max']),
                        ...calcLocationHP('9', hp_max_base, v['location9_hp_max_base_mod'], v['location9_hp_max_other'],
                            all_hp_temp, v['location9_hp'], v['location9_hp_max']),
                        ...calcLocationHP('10', hp_max_base, v['location10_hp_max_base_mod'], v['location10_hp_max_other'],
                            all_hp_temp, v['location10_hp'], v['location10_hp_max']),
                        ...calcLocationHP('11', hp_max_base, v['location11_hp_max_base_mod'], v['location11_hp_max_other'],
                            all_hp_temp, v['location11_hp'], v['location11_hp_max']),
                        ...calcLocationHP('12', hp_max_base, v['location12_hp_max_base_mod'], v['location12_hp_max_other'],
                            all_hp_temp, v['location12_hp'], v['location12_hp_max'])
                    });
                });
            });
        });
    });
});

/* CON */
on('change:con_base change:con_other change:con_temp', function() {
    const stdSkillGetAttrs = getStdSkillGetAttrs(charStdSkillIds['con']);

    getSectionIDs("repeating_professionalskill", function(proSkillIds) {
        getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
            getSectionIDs("repeating_tradition", function(traditionIds) {
                let proSkillGetAttrs = [];
                proSkillIds.forEach(id => {
                    proSkillGetAttrs.push(`repeating_professionalskill_${id}_char1`, `repeating_professionalskill_${id}_char2`, `repeating_professionalskill_${id}_other`)
                });
                let combatStyleGetAttrs = [];
                combatStyleIds.forEach(id => {
                    combatStyleGetAttrs.push(`repeating_combatstyle_${id}_char1`, `repeating_combatstyle_${id}_char2`, `repeating_combatstyle_${id}_other`)
                });
                let traditionGetAttrs = []
                traditionIds.forEach(traditionId => {
                    traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                        `repeating_tradition_${traditionId}_other_skill_id`,
                        `repeating_tradition_${traditionId}_rolled_skill_total`,
                        `repeating_tradition_${traditionId}_other_skill_total`,
                        `repeating_tradition_${traditionId}_rolled_skill_name`,
                        `repeating_tradition_${traditionId}_other_skill_name`,
                        `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
                });

                getAttrs(allCharGetAttrs.concat(stdSkillGetAttrs, proSkillGetAttrs, combatStyleGetAttrs, hitPointGetAttrs, traditionGetAttrs,
                    ['damage_mod_calc', 'damage_mod_other', 'damage_mod_temp', 'fatigue'],
                    ['healing_rate_calc', 'healing_rate_other', 'healing_rate_temp', 'healing_rate_double'],
                    ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                    ['social_damage_temp', 'social_damage_other', 'social_attack_id_value', 'social_defense_id_value']), function (v) {
                    const charObj = buildCharObj(v);
                    const hp_max_base = calcBaseHP(charObj['con'], charObj['siz'], charObj['pow'], charObj['str'],
                        v['hp_calc'], v['simplified_combat_enabled']);
                    const all_hp_temp = parseInt(v['all_hp_temp']);
                    const healingRateVals = calcHealingRate(charObj['con'], charObj['pow'], v['healing_rate_calc'], v['healing_rate_other'],
                        v['healing_rate_temp'], v['healing_rate_double']);

                    console.log("Setting attrs for con trigger");
                    setAttrs({
                        con: charObj['con'],
                        ...calcStdSkills(charStdSkillIds['con'], charObj, traditionIds, v),
                        ...calcProSkills("professionalskill", proSkillIds, charObj, traditionIds, v),
                        ...calcProSkills("combatstyle", combatStyleIds, charObj, traditionIds, v),
                        ...calcDamageMod(charObj['str'], charObj['siz'], charObj['con'], charObj['pow'], v['damage_mod_calc'],
                            v['damage_mod_other'], v['damage_mod_temp']),
                        ...healingRateVals,
                        ...calcFatigueRecovery(v['fatigue'], healingRateVals['healing_rate']),
                        hp_max_base: hp_max_base,
                        ...calcLocationHP('1', hp_max_base, v['location1_hp_max_base_mod'], v['location1_hp_max_other'],
                            all_hp_temp, v['location1_hp'], v['location1_hp_max']),
                        ...calcLocationHP('2', hp_max_base, v['location2_hp_max_base_mod'], v['location2_hp_max_other'],
                            all_hp_temp, v['location2_hp'], v['location2_hp_max']),
                        ...calcLocationHP('3', hp_max_base, v['location3_hp_max_base_mod'], v['location3_hp_max_other'],
                            all_hp_temp, v['location3_hp'], v['location3_hp_max']),
                        ...calcLocationHP('4', hp_max_base, v['location4_hp_max_base_mod'], v['location4_hp_max_other'],
                            all_hp_temp, v['location4_hp'], v['location4_hp_max']),
                        ...calcLocationHP('5', hp_max_base, v['location5_hp_max_base_mod'], v['location5_hp_max_other'],
                            all_hp_temp, v['location5_hp'], v['location5_hp_max']),
                        ...calcLocationHP('6', hp_max_base, v['location6_hp_max_base_mod'], v['location6_hp_max_other'],
                            all_hp_temp, v['location6_hp'], v['location6_hp_max']),
                        ...calcLocationHP('7', hp_max_base, v['location7_hp_max_base_mod'], v['location7_hp_max_other'],
                            all_hp_temp, v['location7_hp'], v['location7_hp_max']),
                        ...calcLocationHP('8', hp_max_base, v['location8_hp_max_base_mod'], v['location8_hp_max_other'],
                            all_hp_temp, v['location8_hp'], v['location8_hp_max']),
                        ...calcLocationHP('9', hp_max_base, v['location9_hp_max_base_mod'], v['location9_hp_max_other'],
                            all_hp_temp, v['location9_hp'], v['location9_hp_max']),
                        ...calcLocationHP('10', hp_max_base, v['location10_hp_max_base_mod'], v['location10_hp_max_other'],
                            all_hp_temp, v['location10_hp'], v['location10_hp_max']),
                        ...calcLocationHP('11', hp_max_base, v['location11_hp_max_base_mod'], v['location11_hp_max_other'],
                            all_hp_temp, v['location11_hp'], v['location11_hp_max']),
                        ...calcLocationHP('12', hp_max_base, v['location12_hp_max_base_mod'], v['location12_hp_max_other'],
                            all_hp_temp, v['location12_hp'], v['location12_hp_max'])
                    });
                });
            });
        });
    });
});

/* DEX */
on('change:dex_base change:dex_other change:dex_temp', function() {
    const stdSkillGetAttrs = getStdSkillGetAttrs(charStdSkillIds['dex']);

    getSectionIDs("repeating_professionalskill", function(proSkillIds) {
        getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
            getSectionIDs("repeating_tradition", function(traditionIds) {
                let proSkillGetAttrs = [];
                proSkillIds.forEach(id => {
                    proSkillGetAttrs.push(`repeating_professionalskill_${id}_char1`, `repeating_professionalskill_${id}_char2`, `repeating_professionalskill_${id}_other`)
                });
                let combatStyleGetAttrs = [];
                combatStyleIds.forEach(id => {
                    combatStyleGetAttrs.push(`repeating_combatstyle_${id}_char1`, `repeating_combatstyle_${id}_char2`, `repeating_combatstyle_${id}_other`)
                });
                let traditionGetAttrs = []
                traditionIds.forEach(traditionId => {
                    traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                        `repeating_tradition_${traditionId}_other_skill_id`,
                        `repeating_tradition_${traditionId}_rolled_skill_total`,
                        `repeating_tradition_${traditionId}_other_skill_total`,
                        `repeating_tradition_${traditionId}_rolled_skill_name`,
                        `repeating_tradition_${traditionId}_other_skill_name`,
                        `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
                });

                getAttrs(allCharGetAttrs.concat(stdSkillGetAttrs, proSkillGetAttrs, combatStyleGetAttrs, traditionGetAttrs,
                    ['action_points_other', 'action_points_temp', 'action_points_calc', 'action_points', 'action_points_max', 'fatigue'],
                    ['initiative_bonus_other', 'initiative_bonus_temp', 'armor_penalty', 'athletics_total', 'initiative_add_one_tenth_athletics'],
                    ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                    ['social_damage_temp', 'social_damage_other', 'social_attack_id_value', 'social_defense_id_value']), function(v) {
                    const charObj = buildCharObj(v);
                    const standardSkillVals = calcStdSkills(charStdSkillIds['dex'], charObj, traditionIds, v);
                    const initiative_bonus_fatigue = parseInt(fatigueTable[v['fatigue']][2]);

                    console.log("Setting attrs for dex trigger");
                    setAttrs({
                        dex: charObj['dex'],
                        ...standardSkillVals,
                        ...calcProSkills("professionalskill", proSkillIds, charObj, traditionIds, v),
                        ...calcProSkills("combatstyle", combatStyleIds, charObj, traditionIds, v),
                        ...calcActionPoints(charObj['dex'], charObj['int'], v['action_points_other'], v['action_points_temp'],
                            v['action_points_calc'], v['fatigue'], v['action_points'], v['action_points_max']),
                        ...calcInitiativeBonus(charObj['int'], charObj['dex'], v['initiative_bonus_other'],
                            v['initiative_bonus_temp'], parseInt(v['armor_penalty']), initiative_bonus_fatigue, standardSkillVals['athletics_total'],
                            v['initiative_add_one_tenth_athletics'])
                    });
                });
            });
        });
    });
});

/* SIZ */
on('change:siz_base change:siz_other change:siz_temp', function() {
    const stdSkillGetAttrs = getStdSkillGetAttrs(charStdSkillIds['siz']);

    getSectionIDs("repeating_professionalskill", function(proSkillIds) {
        getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
            getSectionIDs("repeating_tradition", function(traditionIds) {
                let proSkillGetAttrs = [];
                proSkillIds.forEach(id => {
                    proSkillGetAttrs.push(`repeating_professionalskill_${id}_char1`, `repeating_professionalskill_${id}_char2`, `repeating_professionalskill_${id}_other`)
                });
                let combatStyleGetAttrs = [];
                combatStyleIds.forEach(id => {
                    combatStyleGetAttrs.push(`repeating_combatstyle_${id}_char1`, `repeating_combatstyle_${id}_char2`, `repeating_combatstyle_${id}_other`)
                });
                let traditionGetAttrs = []
                traditionIds.forEach(traditionId => {
                    traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                        `repeating_tradition_${traditionId}_other_skill_id`,
                        `repeating_tradition_${traditionId}_rolled_skill_total`,
                        `repeating_tradition_${traditionId}_other_skill_total`,
                        `repeating_tradition_${traditionId}_rolled_skill_name`,
                        `repeating_tradition_${traditionId}_other_skill_name`,
                        `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
                });

                getAttrs(allCharGetAttrs.concat(stdSkillGetAttrs, proSkillGetAttrs, combatStyleGetAttrs, hitPointGetAttrs, traditionGetAttrs,
                    ['damage_mod_calc', 'damage_mod_other', 'damage_mod_temp'],
                    ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                    ['social_damage_temp', 'social_damage_other', 'social_attack_id_value', 'social_defense_id_value']), function(v) {
                    const charObj = buildCharObj(v);
                    const hp_max_base = calcBaseHP(charObj['con'], charObj['siz'], charObj['pow'], charObj['str'],
                        v['hp_calc'], v['simplified_combat_enabled']);
                    const all_hp_temp = parseInt(v['all_hp_temp']);

                    console.log("Setting attrs for size trigger");
                    setAttrs({
                        siz: charObj['siz'],
                        ...calcStdSkills(charStdSkillIds['siz'], charObj, traditionIds, v),
                        ...calcProSkills("professionalskill", proSkillIds, charObj, traditionIds, v),
                        ...calcProSkills("combatstyle", combatStyleIds, charObj, traditionIds, v),
                        ...calcDamageMod(charObj['str'], charObj['siz'], charObj['con'], charObj['pow'], v['damage_mod_calc'],
                            v['damage_mod_other'], v['damage_mod_temp']),
                        hp_max_base: hp_max_base,
                        ...calcLocationHP('1', hp_max_base, v['location1_hp_max_base_mod'], v['location1_hp_max_other'],
                            all_hp_temp, v['location1_hp'], v['location1_hp_max']),
                        ...calcLocationHP('2', hp_max_base, v['location2_hp_max_base_mod'], v['location2_hp_max_other'],
                            all_hp_temp, v['location2_hp'], v['location2_hp_max']),
                        ...calcLocationHP('3', hp_max_base, v['location3_hp_max_base_mod'], v['location3_hp_max_other'],
                            all_hp_temp, v['location3_hp'], v['location3_hp_max']),
                        ...calcLocationHP('4', hp_max_base, v['location4_hp_max_base_mod'], v['location4_hp_max_other'],
                            all_hp_temp, v['location4_hp'], v['location4_hp_max']),
                        ...calcLocationHP('5', hp_max_base, v['location5_hp_max_base_mod'], v['location5_hp_max_other'],
                            all_hp_temp, v['location5_hp'], v['location5_hp_max']),
                        ...calcLocationHP('6', hp_max_base, v['location6_hp_max_base_mod'], v['location6_hp_max_other'],
                            all_hp_temp, v['location6_hp'], v['location6_hp_max']),
                        ...calcLocationHP('7', hp_max_base, v['location7_hp_max_base_mod'], v['location7_hp_max_other'],
                            all_hp_temp, v['location7_hp'], v['location7_hp_max']),
                        ...calcLocationHP('8', hp_max_base, v['location8_hp_max_base_mod'], v['location8_hp_max_other'],
                            all_hp_temp, v['location8_hp'], v['location8_hp_max']),
                        ...calcLocationHP('9', hp_max_base, v['location9_hp_max_base_mod'], v['location9_hp_max_other'],
                            all_hp_temp, v['location9_hp'], v['location9_hp_max']),
                        ...calcLocationHP('10', hp_max_base, v['location10_hp_max_base_mod'], v['location10_hp_max_other'],
                            all_hp_temp, v['location10_hp'], v['location10_hp_max']),
                        ...calcLocationHP('11', hp_max_base, v['location11_hp_max_base_mod'], v['location11_hp_max_other'],
                            all_hp_temp, v['location11_hp'], v['location11_hp_max']),
                        ...calcLocationHP('12', hp_max_base, v['location12_hp_max_base_mod'], v['location12_hp_max_other'],
                            all_hp_temp, v['location12_hp'], v['location12_hp_max'])
                    });
                });
            });
        });
    });
});

/* INT */
on('change:int_base change:int_other change:int_temp', function() {
    const stdSkillGetAttrs = getStdSkillGetAttrs(charStdSkillIds['int']);

    getSectionIDs("repeating_professionalskill", function(proSkillIds) {
        getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
            getSectionIDs("repeating_tradition", function(traditionIds) {
                let proSkillGetAttrs = [];
                proSkillIds.forEach(id => {
                    proSkillGetAttrs.push(`repeating_professionalskill_${id}_char1`, `repeating_professionalskill_${id}_char2`, `repeating_professionalskill_${id}_other`)
                });
                let combatStyleGetAttrs = [];
                combatStyleIds.forEach(id => {
                    combatStyleGetAttrs.push(`repeating_combatstyle_${id}_char1`, `repeating_combatstyle_${id}_char2`, `repeating_combatstyle_${id}_other`)
                });
                let traditionGetAttrs = []
                traditionIds.forEach(traditionId => {
                    traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                        `repeating_tradition_${traditionId}_other_skill_id`,
                        `repeating_tradition_${traditionId}_rolled_skill_total`,
                        `repeating_tradition_${traditionId}_other_skill_total`,
                        `repeating_tradition_${traditionId}_rolled_skill_name`,
                        `repeating_tradition_${traditionId}_other_skill_name`,
                        `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
                });

                getAttrs(allCharGetAttrs.concat(stdSkillGetAttrs, proSkillGetAttrs, combatStyleGetAttrs, traditionGetAttrs,
                    ['action_points_other', 'action_points_temp', 'action_points_calc', 'fatigue', 'action_points', 'action_points_max'],
                    ['experience_mod_calc', 'experience_mod_other', 'experience_mod_temp'],
                    ['initiative_bonus_other', 'initiative_bonus_temp', 'armor_penalty', 'athletics_total', 'initiative_add_one_tenth_athletics'],
                    ['spirit_ap_other', 'spirit_ap_temp', 'spirit_ap', 'spirit_ap_max'], ['spirit_ib_other', 'spirit_ib_temp'],
                    ['social_initiative_other', 'social_initiative_temp'], ['resolve_other', 'resolve_temp', 'resolve', 'resolve_max'],
                    ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                    ['social_damage_temp', 'social_damage_other', 'social_attack_id_value', 'social_defense_id_value']), function(v) {
                    const charObj = buildCharObj(v);
                    const initiative_bonus_fatigue = parseInt(fatigueTable[v['fatigue']][2]);

                    console.log("Setting attrs for int trigger");
                    setAttrs({
                        int: charObj['int'],
                        ...calcStdSkills(charStdSkillIds['int'], charObj, traditionIds, v),
                        ...calcProSkills("professionalskill", proSkillIds, charObj, traditionIds, v),
                        ...calcProSkills("combatstyle", combatStyleIds, charObj, traditionIds, v),
                        ...calcActionPoints(charObj['dex'], charObj['int'], v['action_points_other'], v['action_points_temp'],
                            v['action_points_calc'], v['fatigue'], v['action_points'], v['action_points_max']),
                        ...calcExpMod(charObj['cha'], charObj['int'], v['experience_mod_calc'], v['experience_mod_other'],
                            v['experience_mod_temp']),
                        ...calcInitiativeBonus(charObj['int'], charObj['dex'], v['initiative_bonus_other'],
                            v['initiative_bonus_temp'], parseInt(v['armor_penalty']), initiative_bonus_fatigue, parseInt(v['athletics_total']),
                            v['initiative_add_one_tenth_athletics']),
                        ...calcSpiritAP(charObj['pow'], charObj['int'], v['spirit_ap_other'], v['spirit_ap_temp'],
                            v['action_points_calc'], v['spirit_ap'], v['spirit_ap_max']),
                        ...calcSpiritInitiative(charObj['int'], charObj['cha'], v['spirit_ib_other'], v['spirit_ib_temp']),
                        ...calcSocialInitiative(charObj['int'], charObj['cha'], v['social_initiative_other'], v['social_initiative_temp']),
                        ...calcResolve(charObj['int'], v['resolve_other'], v['resolve_temp'], v['resolve'], v['resolve_max'])
                    });
                });
            });
        });
    });
});

/* POW */
on('change:pow_base change:pow_other change:pow_temp', function() {
    const stdSkillGetAttrs = getStdSkillGetAttrs(charStdSkillIds['pow']);

    getSectionIDs("repeating_professionalskill", function(proSkillIds) {
        getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
            getSectionIDs("repeating_tradition", function(traditionIds) {
                let proSkillGetAttrs = [];
                proSkillIds.forEach(id => {
                    proSkillGetAttrs.push(`repeating_professionalskill_${id}_char1`, `repeating_professionalskill_${id}_char2`, `repeating_professionalskill_${id}_other`)
                });
                let combatStyleGetAttrs = [];
                combatStyleIds.forEach(id => {
                    combatStyleGetAttrs.push(`repeating_combatstyle_${id}_char1`, `repeating_combatstyle_${id}_char2`, `repeating_combatstyle_${id}_other`)
                });
                let traditionGetAttrs = []
                traditionIds.forEach(traditionId => {
                    traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                        `repeating_tradition_${traditionId}_other_skill_id`,
                        `repeating_tradition_${traditionId}_rolled_skill_total`,
                        `repeating_tradition_${traditionId}_other_skill_total`,
                        `repeating_tradition_${traditionId}_rolled_skill_name`,
                        `repeating_tradition_${traditionId}_other_skill_name`,
                        `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
                });

                getAttrs(allCharGetAttrs.concat(stdSkillGetAttrs, proSkillGetAttrs, combatStyleGetAttrs, hitPointGetAttrs, traditionGetAttrs,
                    ['damage_mod_calc', 'damage_mod_other', 'damage_mod_temp', 'fatigue'],
                    ['healing_rate_calc', 'healing_rate_other', 'healing_rate_temp', 'healing_rate_double'],
                    ['luck_points_other', 'luck_points_temp', 'luck_points_calc', 'luck_points_rank', 'rank', 'luck_points',
                        'luck_points_max'],
                    ['magic_points_other', 'magic_points_temp', 'magic_points', 'magic_points_max'],
                    ['spirit_ap_other', 'spirit_ap_temp', 'spirit_ap', 'spirit_ap_max', 'action_points_calc'],
                    ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                    ['social_initiative_other', 'social_initiative_temp'], ['confidence_other', 'confidence_temp'],
                    ['composure_other', 'composure_temp', 'composure', 'composure_max'],
                    ['social_damage_temp', 'social_damage_other', 'social_attack_id_value', 'social_defense_id_value'],
                    ['tenacity_other', 'tenacity_temp', 'tenacity_dependencies', 'tenacity', 'tenacity_max']), function(v) {
                    const charObj = buildCharObj(v);
                    const hp_max_base = calcBaseHP(charObj['con'], charObj['siz'], charObj['pow'], charObj['str'],
                        v['hp_calc'], v['simplified_combat_enabled']);
                    const all_hp_temp = parseInt(v['all_hp_temp']);
                    const healingRateVals = calcHealingRate(charObj['con'], charObj['pow'], v['healing_rate_calc'], v['healing_rate_other'],
                        v['healing_rate_temp'], v['healing_rate_double']);
                    const standardSkillVals = calcStdSkills(charStdSkillIds['pow'], charObj, traditionIds, v);

                    console.log("Setting attrs for pow trigger");
                    setAttrs({
                        pow: charObj['pow'],
                        ...calcSpiritIntensity(charObj['pow']),
                        ...standardSkillVals,
                        ...calcProSkills("professionalskill", proSkillIds, charObj, traditionIds, v),
                        ...calcProSkills("combatstyle", combatStyleIds, charObj, traditionIds, v),
                        ...calcDamageMod(charObj['str'], charObj['siz'], charObj['con'], charObj['pow'], v['damage_mod_calc'],
                            v['damage_mod_other'], v['damage_mod_temp']),
                        ...healingRateVals,
                        ...calcFatigueRecovery(v['fatigue'], healingRateVals['healing_rate']),
                        ...calcLuckPoints(charObj['pow'], charObj['cha'], v['luck_points_calc'], v['luck_points_other'],
                            v['luck_points_temp'], v['luck_points_rank'], v['rank'], v['luck_points'], v['luck_points_max']),
                        ...calcSpiritAP(charObj['pow'], charObj['int'], v['spirit_ap_other'], v['spirit_ap_temp'],
                            v['action_points_calc'], v['spirit_ap'], v['spirit_ap_max']),
                        ...calcSocialInitiative(charObj['int'], charObj['cha'], v['social_initiative_other'], v['social_initiative_temp']),
                        hp_max_base: hp_max_base,
                        ...calcMagicPoints(charObj['pow'], v['magic_points_other'], v['magic_points_temp'], v['magic_points'], v['magic_points_max']),
                        ...calcTenacity(charObj['pow'], v['tenacity_other'], v['tenacity_temp'], v['tenacity'], v['tenacity_max'], parseInt(v['tenacity_dependencies'])),
                        ...calcLocationHP('1', hp_max_base, v['location1_hp_max_base_mod'], v['location1_hp_max_other'],
                            all_hp_temp, v['location1_hp'], v['location1_hp_max']),
                        ...calcLocationHP('2', hp_max_base, v['location2_hp_max_base_mod'], v['location2_hp_max_other'],
                            all_hp_temp, v['location2_hp'], v['location2_hp_max']),
                        ...calcLocationHP('3', hp_max_base, v['location3_hp_max_base_mod'], v['location3_hp_max_other'],
                            all_hp_temp, v['location3_hp'], v['location3_hp_max']),
                        ...calcLocationHP('4', hp_max_base, v['location4_hp_max_base_mod'], v['location4_hp_max_other'],
                            all_hp_temp, v['location4_hp'], v['location4_hp_max']),
                        ...calcLocationHP('5', hp_max_base, v['location5_hp_max_base_mod'], v['location5_hp_max_other'],
                            all_hp_temp, v['location5_hp'], v['location5_hp_max']),
                        ...calcLocationHP('6', hp_max_base, v['location6_hp_max_base_mod'], v['location6_hp_max_other'],
                            all_hp_temp, v['location6_hp'], v['location6_hp_max']),
                        ...calcLocationHP('7', hp_max_base, v['location7_hp_max_base_mod'], v['location7_hp_max_other'],
                            all_hp_temp, v['location7_hp'], v['location7_hp_max']),
                        ...calcLocationHP('8', hp_max_base, v['location8_hp_max_base_mod'], v['location8_hp_max_other'],
                            all_hp_temp, v['location8_hp'], v['location8_hp_max']),
                        ...calcLocationHP('9', hp_max_base, v['location9_hp_max_base_mod'], v['location9_hp_max_other'],
                            all_hp_temp, v['location9_hp'], v['location9_hp_max']),
                        ...calcLocationHP('10', hp_max_base, v['location10_hp_max_base_mod'], v['location10_hp_max_other'],
                            all_hp_temp, v['location10_hp'], v['location10_hp_max']),
                        ...calcLocationHP('11', hp_max_base, v['location11_hp_max_base_mod'], v['location11_hp_max_other'],
                            all_hp_temp, v['location11_hp'], v['location11_hp_max']),
                        ...calcLocationHP('12', hp_max_base, v['location12_hp_max_base_mod'], v['location12_hp_max_other'],
                            all_hp_temp, v['location12_hp'], v['location12_hp_max']),
                        ...calcConfidence(standardSkillVals['willpower_total'], v['confidence_other'], v['confidence_temp']),
                        ...calcComposure(charObj['pow'], v['composure_other'], v['composure_temp'], v['composure'], v['composure_max'])
                    });
                });
            });
        });
    });
});

/* CHA */
on('change:cha_base change:cha_other change:cha_temp', function() {
    const stdSkillGetAttrs = getStdSkillGetAttrs(charStdSkillIds['cha']);

    getSectionIDs("repeating_professionalskill", function(proSkillIds) {
        getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
            getSectionIDs("repeating_tradition", function(traditionIds) {
                let proSkillGetAttrs = [];
                proSkillIds.forEach(id => {
                    proSkillGetAttrs.push(`repeating_professionalskill_${id}_char1`, `repeating_professionalskill_${id}_char2`, `repeating_professionalskill_${id}_other`)
                });
                let combatStyleGetAttrs = [];
                combatStyleIds.forEach(id => {
                    combatStyleGetAttrs.push(`repeating_combatstyle_${id}_char1`, `repeating_combatstyle_${id}_char2`, `repeating_combatstyle_${id}_other`)
                });
                let traditionGetAttrs = []
                traditionIds.forEach(traditionId => {
                    traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                        `repeating_tradition_${traditionId}_other_skill_id`,
                        `repeating_tradition_${traditionId}_rolled_skill_total`,
                        `repeating_tradition_${traditionId}_other_skill_total`,
                        `repeating_tradition_${traditionId}_rolled_skill_name`,
                        `repeating_tradition_${traditionId}_other_skill_name`,
                        `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
                });

                getAttrs(allCharGetAttrs.concat(stdSkillGetAttrs, proSkillGetAttrs, combatStyleGetAttrs, traditionGetAttrs,
                    ['experience_mod_calc', 'experience_mod_other', 'experience_mod_temp'],
                    ['luck_points_other', 'luck_points_temp', 'luck_points_calc', 'luck_points_rank', 'rank', 'luck_points', 'luck_points_max'],
                    ['spirit_ib_other', 'spirit_ib_temp'], ['social_initiative_other', 'social_initiative_temp'],
                    ['integrity_other', 'integrity_temp', 'integrity', 'integrity_max'],
                    ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                    ['social_damage_temp', 'social_damage_other', 'social_attack_id_value', 'social_defense_id_value']), function(v) {
                    const charObj = buildCharObj(v);

                    console.log("Setting attrs for cha trigger");
                    setAttrs({
                        cha: charObj['cha'],
                        ...calcStdSkills(charStdSkillIds['cha'], charObj, traditionIds, v),
                        ...calcProSkills("professionalskill", proSkillIds, charObj, traditionIds, v),
                        ...calcProSkills("combatstyle", combatStyleIds, charObj, traditionIds, v),
                        ...calcExpMod(charObj['cha'], charObj['int'], v['experience_mod_calc'], v['experience_mod_other'],
                            v['experience_mod_temp']),
                        ...calcLuckPoints(charObj['pow'], charObj['cha'], v['luck_points_calc'], v['luck_points_other'],
                            v['luck_points_temp'], v['luck_points_rank'], v['rank'], v['luck_points'], v['luck_points_max']),
                        ...calcSpiritInitiative(charObj['int'], charObj['cha'], v['spirit_ib_other'], v['spirit_ib_temp']),
                        ...calcSocialInitiative(charObj['int'], charObj['cha'], v['social_initiative_other'], v['social_initiative_temp']),
                        ...calcIntegrity(charObj['cha'], v['integrity_other'], v['integrity_temp'], v['integrity'], v['integrity_max'])
                    });
                });
            });
        });
    });
});

/* Attribute Triggers */
/* Action Point Triggers */
on('change:action_points_other change:action_points_temp', function() {
    getAttrs(['dex', 'int', 'action_points_other', 'action_points_temp', 'action_points_calc', 'fatigue', 'action_points', 'action_points_max'], function(v) {
        console.log("Setting attrs for action points trigger");
        setAttrs( calcActionPoints(parseInt(v['dex']), parseInt(v['int']), v['action_points_other'], v['action_points_temp'],
            v['action_points_calc'], v['fatigue'], v['action_points'], v['action_points_max']));
    });
});
on('change:action_points_calc', function() {
    getAttrs(['dex', 'int', 'action_points_other', 'action_points_temp', 'action_points_calc', 'fatigue', 'action_points',
        'action_points_max'].concat(['pow', 'spirit_ap_other', 'spirit_ap_temp', 'spirit_ap', 'spirit_ap_max']), function(v) {
        console.log("Setting attrs for action points calc trigger");
        setAttrs({
            ...calcActionPoints(parseInt(v['dex']), parseInt(v['int']), v['action_points_other'], v['action_points_temp'],
                v['action_points_calc'], v['fatigue'], v['action_points'], v['action_points_max']),
            ...calcSpiritAP(parseInt(v['pow']), parseInt(v['int']), v['spirit_ap_other'], v['spirit_ap_temp'],
                v['action_points_calc'], v['spirit_ap'], v['spirit_ap_max'])
        });
    });
});

/* Damage Mod Triggers */
on('change:damage_mod_calc change:damage_mod_other change:damage_mod_temp', function() {
    getAttrs(['str', 'siz', 'con', 'pow', 'damage_mod_calc', 'damage_mod_other', 'damage_mod_temp'], function(v) {
        console.log("Setting attrs for damage mod triggers trigger");
        setAttrs( calcDamageMod(parseInt(v['str']), parseInt(v['siz']), parseInt(v['con']), parseInt(v['pow']),
            v['damage_mod_calc'], v['damage_mod_other'], v['damage_mod_temp']));
    });
});

/* Experience Mod Triggers */
on('change:experience_mod_calc change:experience_mod_other change:experience_mod_temp', function() {
    getAttrs(['cha', 'int', 'experience_mod_calc', 'experience_mod_other', 'experience_mod_temp'], function(v) {
        console.log("Setting attrs for xp mod trigger");
        setAttrs( calcExpMod(parseInt(v['cha']), parseInt(v['int']), v['experience_mod_calc'], v['experience_mod_other'],
            v['experience_mod_temp']));
    });
});

/* Healing Rate Triggers */
on('change:healing_rate_calc change:healing_rate_other change:healing_rate_temp change:healing_rate_double', function() {
    getAttrs(['con', 'pow', 'healing_rate_calc', 'healing_rate_other', 'healing_rate_temp', 'healing_rate_double', 'fatigue'], function(v) {
        const healingRateVals = calcHealingRate(parseInt(v['con']), parseInt(v['pow']), v['healing_rate_calc'], v['healing_rate_other'],
            v['healing_rate_temp'], v['healing_rate_double']);
        console.log("Setting attrs for healing rate trigger");
        setAttrs({
            ...healingRateVals,
            ...calcFatigueRecovery(v['fatigue'], healingRateVals['healing_rate'])
        });
    });
});

/* Initiative Triggers */
on('change:initiative_bonus_other change:initiative_bonus_temp change:initiative_add_one_tenth_athletics', function() {
    getAttrs(['int', 'dex', 'initiative_bonus_other', 'initiative_bonus_temp', 'armor_penalty', 'fatigue', 'athletics_total',
        'initiative_add_one_tenth_athletics'], function(v) {
        const initiative_bonus_fatigue = parseInt(fatigueTable[v['fatigue']][2])
        console.log("Setting attrs for initiative trigger");
        setAttrs({
            ...calcInitiativeBonus(parseInt(v['int']), parseInt(v['dex']), v['initiative_bonus_other'],
                v['initiative_bonus_temp'], parseInt(v['armor_penalty']), initiative_bonus_fatigue, parseInt(v['athletics_total']),
                v['initiative_add_one_tenth_athletics'])
        });
    });
});

/* Luck Point Triggers */
on('change:luck_points_other change:luck_points_temp change:luck_points_calc change:luck_points_rank change:rank', function() {
    getAttrs(['pow', 'cha', 'luck_points_other', 'luck_points_temp', 'luck_points_calc', 'luck_points_rank', 'rank',
        'luck_points', 'luck_points_max'], function(v) {
        console.log("Setting attrs for luck trigger");
        setAttrs({
            ...calcLuckPoints(parseInt(v['pow']), parseInt(v['cha']), v['luck_points_calc'], v['luck_points_other'],
                v['luck_points_temp'], v['luck_points_rank'], v['rank'], v['luck_points'], v['luck_points_max'])
        });
    });
});

/* Magic Point Triggers */
on('change:magic_points_other change:magic_points_temp', function() {
    getAttrs(['pow', 'magic_points_other', 'magic_points_temp', 'magic_points', 'magic_points_max'], function(v) {
        console.log("Setting attrs for magic points trigger");
        setAttrs({
            ...calcMagicPoints(parseInt(v['pow']), v['magic_points_other'], v['magic_points_temp'], v['magic_points'], v['magic_points_max'])
        });
    });
});

/* Tenacity Triggers */
on('change:tenacity_other change:tenacity_temp', function() {
    getAttrs(['pow', 'tenacity_other', 'tenacity_temp', 'tenacity', 'tenacity_max', 'tenacity_dependencies'], function(v) {
        console.log("Setting attrs for tenacity trigger");
        setAttrs({
            ...calcTenacity(parseInt(v['pow']), v['tenacity_other'], v['tenacity_temp'], v['tenacity'], v['tenacity_max'], parseInt(v['tenacity_dependencies']))
        });
    });
});

/* Movement Rate Triggers */
on('change:movement_rate_species change:movement_rate_other change:movement_rate_temp', function() {
    getAttrs(['movement_rate_species', 'movement_rate_other', 'movement_rate_temp', 'movement_rate_fatigue', 'movement_rate_enc'], function(v) {
        setAttrs({
            ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                v['movement_rate_fatigue'], v['movement_rate_enc'])
        });
    });
});

/* Spirit Action Points Triggers */
on('change:spirit_ap_other change:spirit_ap_temp', function() {
    getAttrs(['int', 'pow', 'spirit_ap_other', 'spirit_ap_temp', 'action_points_calc', 'spirit_ap', 'spirit_ap_max'], function(v) {
        console.log("Setting attrs for spirit ap trigger");
        setAttrs({
            ...calcSpiritAP(parseInt(v['pow']), parseInt(v['int']), v['spirit_ap_other'], v['spirit_ap_temp'],
                v['action_points_calc'], v['spirit_ap'], v['spirit_ap_max'])
        });
    });
});

/* Spirit Combat Skill Triggers */
on('change:spirit_combat_skill_id', function(event) {
    let skillGetAttrs = [];
    if (event.newValue){
        skillGetAttrs.push(`${event.newValue}_total`, `${event.newValue}_encumbered`, `${event.newValue}_notes`);
        if (event.newValue.startsWith('repeating_')) {
            skillGetAttrs.push(`${event.newValue}_name`);
        }
    } else {
        skillGetAttrs.push('willpower_total', 'willpower_notes');
    }

    getAttrs(skillGetAttrs.concat(['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id']), function(v) {
        let newVals = {};
        const spirit_combat_skill_id = v['spirit_combat_skill_id'];
        if (v[`${spirit_combat_skill_id}_name`] && spirit_combat_skill_id.startsWith('repeating_')) {
            newVals['spirit_combat_skill_name'] = v[`${spirit_combat_skill_id}_name`];
        } else if (!spirit_combat_skill_id.startsWith('repeating_')) {
            newVals['spirit_combat_skill_name'] = getTranslationByKey(`${spirit_combat_skill_id}`);
        } else {
            newVals['spirit_combat_skill_name'] = getTranslationByKey('willpower');
        }

        if (v[`${spirit_combat_skill_id}_total`]) {
            newVals['spirit_combat_skill_total'] = v[`${spirit_combat_skill_id}_total`];
        } else {
            newVals['spirit_combat_skill_total'] = v['willpower_total'];
        }

        if (v[`${spirit_combat_skill_id}_encumbered`]) {
            newVals['spirit_combat_skill_encumbered'] = v[`${spirit_combat_skill_id}_encumbered`];
        } else {
            newVals['spirit_combat_skill_encumbered'] = 0;
        }

        if (v[`${spirit_combat_skill_id}_notes`]) {
            newVals['spirit_combat_skill_notes'] = v[`${spirit_combat_skill_id}_notes`];
        } else {
            newVals['spirit_combat_skill_notes'] = v['willpower_notes'];
        }
        console.log("Setting attrs for spirit_combat_skill_id trigger");
        setAttrs({
            ...newVals,
            ...calcSpiritDamage(v['spirit_damage_other'], v['spirit_damage_temp'], v['spirit_damage_calc'], v['spirit_combat_skill_id'])
        });
    });
});

/* Spirit Damage Triggers */
on('change:spirit_damage_other change:spirit_damage_temp change:spirit_damage_calc', function() {
    getAttrs(['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'], function(v) {
        console.log("Setting attrs for spirit_damage trigger");
        setAttrs({
            ...calcSpiritDamage(v['spirit_damage_other'], v['spirit_damage_temp'], v['spirit_damage_calc'], v['spirit_combat_skill_id'])
        });
    });
});

/* Social Damage Triggers */
on('change:social_damage_other change:social_damage_temp', function() {
    getAttrs(['social_damage_other', 'social_damage_temp', 'social_attack_id_value'], function(v) {
        console.log("Setting attrs for social damage trigger");
        setAttrs({
            ...calcSocialDamage(v['social_damage_other'], v['social_damage_temp'], v['social_attack_id_value'])
        });
    });
});

/* Spirit Initiative Triggers */
on('change:spirit_ib_other change:spirit_ib_temp', function() {
    getAttrs(['int', 'cha', 'spirit_ib_other', 'spirit_ib_temp'], function(v) {
        console.log("Setting attrs for spirit initiative trigger");
        setAttrs({
            ...calcSpiritInitiative(parseInt(v['int']), parseInt(v['cha']), v['spirit_ib_other'], v['spirit_ib_temp'])
        });
    });
});

/* Confidence Triggers */
on('change:confidence_other change:confidence_temp', function() {
    getAttrs(['willpower_total', 'confidence_other', 'confidence_temp'], function(v) {
        console.log("Setting attrs for confidence trigger");
        setAttrs({
            ...calcConfidence(parseInt(v['willpower_total']), v['confidence_other'], v['confidence_temp'])
        });
    });
});

/* Social Initiative Triggers */
on('change:social_initiative_other change:social_initiative_temp', function() {
    getAttrs(['int', 'cha', 'social_initiative_other', 'social_initiative_temp'], function(v) {
        console.log("Setting attrs for social initiative trigger");
        setAttrs({
            ...calcSocialInitiative(parseInt(v['int']), parseInt(v['cha']), v['social_initiative_other'], v['social_initiative_temp'])
        });
    });
});

/* Composure Triggers */
on('change:composure_other change:composure_temp', function() {
    getAttrs(['pow', 'composure_other', 'composure_temp', 'composure', 'composure_max'], function(v) {
        console.log("Setting attrs for composure trigger");
        setAttrs({
            ...calcComposure(parseInt(v['pow']), v['composure_other'], v['composure_temp'], v['composure'], v['composure_max'])
        });
    });
});

/* Integrity Triggers */
on('change:integrity_other change:integrity_temp', function() {
    getAttrs(['cha', 'integrity_other', 'integrity_temp', 'integrity', 'integrity_max'], function(v) {
        console.log("Setting attrs for integrity trigger");
        setAttrs({
            ...calcIntegrity(parseInt(v['cha']), v['integrity_other'], v['integrity_temp'], v['integrity'], v['integrity_max'])
        });
    });
});

/* Resolve Triggers */
on('change:resolve_other change:resolve_temp', function() {
    getAttrs(['int', 'resolve_other', 'resolve_temp', 'resolve', 'resolve_max'], function(v) {
        console.log("Setting attrs for resolve trigger");
        setAttrs({
            ...calcResolve(parseInt(v['int']), v['resolve_other'], v['resolve_temp'], v['resolve'], v['resolve_max'])
        });
    });
});


/* Hit Locations */
on('change:hit_locations', function(event) {
    console.log("Setting attrs for hit locations trigger");
    setAttrs( hitLocationTable[event.newValue] );
});

/* Locational Hit Points */
['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'].forEach(num => {
    on(`change:location${num}_hp_max_base_mod change:location${num}_hp_max_other`, function() {
        getAttrs(['hp_max_base', `location${num}_hp_max_base_mod`, `location${num}_hp_max_other`, 'all_hp_temp',
            `location${num}_hp`, `location${num}_hp_max`], function(v) {
            console.log(`Setting attrs for location ${num} hp trigger`);
            setAttrs( calcLocationHP(num, parseInt(v['hp_max_base']), v[`location${num}_hp_max_base_mod`], v[`location${num}_hp_max_other`],
                parseInt(v['all_hp_temp']), v[`location${num}_hp`], v[`location${num}_hp_max`]) );
        });
    });
});

/* All Hit Points */
on('change:hp_calc change:all_hp_temp change:simplified_combat_enabled', function() {
    getAttrs(['str', 'con', 'siz', 'pow'].concat(hitPointGetAttrs), function(v) {
        const hp_max_base = calcBaseHP(parseInt(v['con']), parseInt(v['siz']), parseInt(v['pow']), parseInt(v['str']),
            v['hp_calc'], v['simplified_combat_enabled']);
        const all_hp_temp = parseInt(v['all_hp_temp']);
        let baseAttrs = {};
        if (v['simplified_combat_enabled'] === '1') {
            baseAttrs = {hit_locations: "custom1", ...hitLocationTable['simplified']};
        }
        console.log(`Setting attrs for all locations trigger`);
        setAttrs({
            hp_max_base: hp_max_base, ...baseAttrs,
            ...calcLocationHP('1', hp_max_base, v['location1_hp_max_base_mod'], v['location1_hp_max_other'],
                all_hp_temp, v['location1_hp'], v['location1_hp_max']),
            ...calcLocationHP('2', hp_max_base, v['location2_hp_max_base_mod'], v['location2_hp_max_other'],
                all_hp_temp, v['location2_hp'], v['location2_hp_max']),
            ...calcLocationHP('3', hp_max_base, v['location3_hp_max_base_mod'], v['location3_hp_max_other'],
                all_hp_temp, v['location3_hp'], v['location3_hp_max']),
            ...calcLocationHP('4', hp_max_base, v['location4_hp_max_base_mod'], v['location4_hp_max_other'],
                all_hp_temp, v['location4_hp'], v['location4_hp_max']),
            ...calcLocationHP('5', hp_max_base, v['location5_hp_max_base_mod'], v['location5_hp_max_other'],
                all_hp_temp, v['location5_hp'], v['location5_hp_max']),
            ...calcLocationHP('6', hp_max_base, v['location6_hp_max_base_mod'], v['location6_hp_max_other'],
                all_hp_temp, v['location6_hp'], v['location6_hp_max']),
            ...calcLocationHP('7', hp_max_base, v['location7_hp_max_base_mod'], v['location7_hp_max_other'],
                all_hp_temp, v['location7_hp'], v['location7_hp_max']),
            ...calcLocationHP('8', hp_max_base, v['location8_hp_max_base_mod'], v['location8_hp_max_other'],
                all_hp_temp, v['location8_hp'], v['location8_hp_max']),
            ...calcLocationHP('9', hp_max_base, v['location9_hp_max_base_mod'], v['location9_hp_max_other'],
                all_hp_temp, v['location9_hp'], v['location9_hp_max']),
            ...calcLocationHP('10', hp_max_base, v['location10_hp_max_base_mod'], v['location10_hp_max_other'],
                all_hp_temp, v['location10_hp'], v['location10_hp_max']),
            ...calcLocationHP('11', hp_max_base, v['location11_hp_max_base_mod'], v['location11_hp_max_other'],
                all_hp_temp, v['location11_hp'], v['location11_hp_max']),
            ...calcLocationHP('12', hp_max_base, v['location12_hp_max_base_mod'], v['location12_hp_max_other'],
                all_hp_temp, v['location12_hp'], v['location12_hp_max'])
        });
    });
});

/* Locational Armor Points */
['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'].forEach(num => {
    on(`change:location${num}_other_ap change:location${num}_armor_ap`, function() {
        getAttrs([`location${num}_other_ap`, `location${num}_armor_ap`, 'all_armor_temp', `location${num}_armor_equipped`], function(v) {
            console.log(`Setting attrs for location ${num} ap trigger`);
            setAttrs({[`location${num}_ap`]: calcLocationAP(v[`location${num}_other_ap`], v[`location${num}_armor_ap`], parseInt(v['all_armor_temp']), v[`location${num}_armor_equipped`]) });
        });
    });
});

/* All Armor Points */
on('change:all_armor_temp', function() {
    getAttrs(armorLocGetAttrs, function(v) {
        const all_armor_temp = parseInt(v['all_armor_temp']);
        console.log(`Setting attrs for all location ap trigger`);
        setAttrs({
            location1_ap: calcLocationAP(v['location1_other_ap'], v['location1_armor_ap'], all_armor_temp, v['location1_armor_equipped']),
            location2_ap: calcLocationAP(v['location2_other_ap'], v['location2_armor_ap'], all_armor_temp, v['location2_armor_equipped']),
            location3_ap: calcLocationAP(v['location3_other_ap'], v['location3_armor_ap'], all_armor_temp, v['location3_armor_equipped']),
            location4_ap: calcLocationAP(v['location4_other_ap'], v['location4_armor_ap'], all_armor_temp, v['location4_armor_equipped']),
            location5_ap: calcLocationAP(v['location5_other_ap'], v['location5_armor_ap'], all_armor_temp, v['location5_armor_equipped']),
            location6_ap: calcLocationAP(v['location6_other_ap'], v['location6_armor_ap'], all_armor_temp, v['location6_armor_equipped']),
            location7_ap: calcLocationAP(v['location7_other_ap'], v['location7_armor_ap'], all_armor_temp, v['location7_armor_equipped']),
            location8_ap: calcLocationAP(v['location8_other_ap'], v['location8_armor_ap'], all_armor_temp, v['location8_armor_equipped']),
            location9_ap: calcLocationAP(v['location9_other_ap'], v['location9_armor_ap'], all_armor_temp, v['location9_armor_equipped']),
            location10_ap: calcLocationAP(v['location10_other_ap'], v['location10_armor_ap'], all_armor_temp, v['location10_armor_equipped']),
            location11_ap: calcLocationAP(v['location11_other_ap'], v['location11_armor_ap'], all_armor_temp, v['location11_armor_equipped']),
            location12_ap: calcLocationAP(v['location12_other_ap'], v['location12_armor_ap'], all_armor_temp, v['location12_armor_equipped'])
        });
    });
});



/* Skill Triggers */
/* Standard Skill Totals */
allStdSkillIds.forEach(skillId => {
    on(`change:${skillId}_other change:${skillId}_total`, function(event) {
        // Only players should be allowed to trigger reverse calculation to avoid running this function multiple times
        if (event.sourceAttribute.endsWith("_total") && event.sourceType === 'sheetworker') {
            return;
        }
        getSectionIDs("repeating_tradition", function(traditionIds) {
            let traditionGetAttrs = []
            traditionIds.forEach(traditionId => {
                traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                    `repeating_tradition_${traditionId}_other_skill_id`,
                    `repeating_tradition_${traditionId}_rolled_skill_total`,
                    `repeating_tradition_${traditionId}_other_skill_total`,
                    `repeating_tradition_${traditionId}_rolled_skill_name`,
                    `repeating_tradition_${traditionId}_other_skill_name`,
                    `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
            });

            getAttrs(allCharGetAttrs.concat([`${skillId}_other`], ['initiative_bonus_other', 'initiative_bonus_temp',
                'armor_penalty', 'initiative_add_one_tenth_athletics', 'fatigue'], traditionGetAttrs,
            ['spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
            ['confidence_other', 'confidence_temp', 'social_damage_other', 'social_damage_temp', 'social_attack_id_value', 'social_defense_id_value'],
            ['int', 'pow', 'cha']), function(v) {
                let charObj = buildCharObj(v);
                let char1 = charObj[stdSkillChars[`${skillId}`][0]];
                let char2 = charObj[stdSkillChars[`${skillId}`][1]];

                let skillValue = 0;
                let primaryNewValue = {};
                if (event.sourceAttribute.endsWith("_total")) {
                    skillValue = parseInt(event.newValue);
                    primaryNewValue[`${skillId}_other`] = skillValue - char1 - char2;
                } else {
                    skillValue = char1 + char2 + parseInt(v[`${skillId}_other`]);
                    primaryNewValue[`${skillId}_total`] = skillValue;
                }

                let socialDamageValues = {};
                console.log(v['social_attack_id_value'] + '&' + skillId);
                if (`${skillId}`.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
                    const socialAttackTotal = char1 + char2 + parseInt(v[`${skillId}_other`]);
                    socialDamageValues = {
                        ...calcSocialDamage(v['social_damage_other'], v['social_damage_temp'], v['social_attack_id_value'], socialAttackTotal)
                    };
                }

                let spiritValues = {};
                if (`${skillId}`.toUpperCase() === v['spirit_combat_skill_id'].toUpperCase()) {
                    spiritValues = {
                        ...calcSpiritDamage(v['spirit_damage_other'], v['spirit_damage_other'], v['spirit_damage_calc'], v['spirit_combat_skill_id'], skillValue)
                    };
                }

                let specialValues = {};
                if (`${skillId}` === 'athletics') {
                    const initiative_bonus_fatigue = parseInt(fatigueTable[v['fatigue']][2]);
                    const athletics_total = char1 + char2 + parseInt(v[`${skillId}_other`]);

                    specialValues = {
                        ...calcInitiativeBonus(charObj['int'], charObj['dex'], v['initiative_bonus_other'],
                            v['initiative_bonus_temp'], parseInt(v['armor_penalty']), initiative_bonus_fatigue, athletics_total,
                            v['initiative_add_one_tenth_athletics'])
                    };
                } else if (`${skillId}` === 'willpower') {
                    const willpower_total = char1 + char2 + parseInt(v[`${skillId}_other`]);

                    specialValues = {
                        ...calcConfidence(willpower_total, v['confidence_other'], v['confidence_temp'])
                    };
                }

                console.log(`Setting attrs for standard skill ${skillId} trigger`);
                setAttrs({
                    ...primaryNewValue,
                    ...socialDamageValues,
                    ...spiritValues,
                    ...specialValues,
                    ...calcReferencedIdTotals(skillId, skillValue, traditionIds, parseInt(v['int']), parseInt(v['pow']), parseInt(v['cha']), v)
                });
            });
        });
    });
});

/* Standard Skill Notes */
allStdSkillIds.forEach(skillId => {
    on(`change:${skillId}_notes`, function() {
        getAttrs([`${skillId}_notes`, 'spirit_combat_skill_id', 'social_attack_id_value', 'social_defense_id_value'], function(v) {
            let newValues = {};
            if (`${skillId}`.toUpperCase() === v['spirit_combat_skill_id'].toUpperCase()) {
                newValues['spirit_combat_skill_notes'] = v[`${skillId}_notes`];
            }

            if (`${skillId}`.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
                newValues['social_attack_notes'] = v[`${skillId}_notes`];
            }

            if (`${skillId}`.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
                newValues['social_defense_notes'] = v[`${skillId}_notes`];
            }

            console.log(`Setting attrs for standard skill ${skillId} notes trigger`);
            setAttrs(newValues);
        });
    });
});

/* Passion Triggers */
on("change:repeating_passion:total change:repeating_passion:type", function(event) {
    const sourceId = event.sourceAttribute.split('_')[2];

    getSectionIDs("repeating_passion", function(passionIds) {
        getSectionIDs("repeating_tradition", function(traditionIds) {
            let passionGetAttrs = [];
            passionIds.forEach(id => {
                passionGetAttrs.push(`repeating_passion_${id}_total`, `repeating_passion_${id}_type`)
            });
            let traditionGetAttrs = []
            traditionIds.forEach(traditionId => {
                traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                    `repeating_tradition_${traditionId}_other_skill_id`,
                    `repeating_tradition_${traditionId}_rolled_skill_total`,
                    `repeating_tradition_${traditionId}_other_skill_total`,
                    `repeating_tradition_${traditionId}_rolled_skill_name`,
                    `repeating_tradition_${traditionId}_other_skill_name`,
                    `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
            });

            getAttrs(passionGetAttrs.concat(traditionGetAttrs,
                ['willpower_total', 'spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
                ['social_damage_other', 'social_damage_temp', 'social_attack_id_value', 'social_defense_id_value'],
                ['pow', 'tenacity_other', 'tenacity_temp', 'tenacity', 'tenacity_max', 'tenacity_dependencies', 'int', 'pow', 'cha']), function(v) {
                const passionTotal = parseInt(v[`repeating_passion_${sourceId}_total`]);

                const referencedIdTotals = calcReferencedIdTotals(`repeating_passion_${sourceId}`, parseInt(v[`repeating_passion_${sourceId}_total`]), traditionIds, parseInt(v['int']), parseInt(v['pow']), parseInt(v['cha']), v)

                let socialVals = {};
                if (`repeating_passion_${sourceId}`.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
                    socialVals = calcSocialDamage(v['social_damage_other'], v['social_damage_temp'], v['social_attack_id_value'], passionTotal);
                }

                let spiritDamageVals = {};
                if (`repeating_passion_${sourceId}`.toUpperCase() === v['spirit_combat_skill_id'].toUpperCase()) {
                    spiritDamageVals = calcSpiritDamage(v['spirit_damage_other'], v['spirit_damage_temp'], v['spirit_damage_calc'], v['spirit_combat_skill_id'], passionTotal);
                }

                let dependenciesTotal = 0;
                passionIds.forEach(id => {
                    if(v[`repeating_passion_${id}_type`] === 'dependency') {
                        dependenciesTotal = dependenciesTotal +  parseInt(v[`repeating_passion_${id}_total`])
                    }
                });

                const tenacityPenalty = 0 - Math.floor(dependenciesTotal/20);

                console.log(`Setting attrs for passion ${sourceId} trigger`);
                setAttrs({
                    ...calcTenacity(parseInt(v['pow']), v['tenacity_other'], v['tenacity_temp'], v['tenacity'], v['tenacity_max'], tenacityPenalty),
                    tenacity_dependencies: tenacityPenalty,
                    ...spiritDamageVals,
                    ...socialVals,
                    ...referencedIdTotals
                });
            });
        });
    });
});

/* Professional Skill, Passion & Combat Style Name */
on("change:repeating_professionalskill:name change:repeating_combatstyle:name change:repeating_passion:name", function(event) {
    const type = event.sourceAttribute.split('_')[1];
    const id = event.sourceAttribute.split('_')[2];

    getSectionIDs("repeating_tradition", function(traditionIds) {
        let traditionGetAttrs = []
        traditionIds.forEach(traditionId => {
            traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                `repeating_tradition_${traditionId}_other_skill_id`,
                `repeating_tradition_${traditionId}_rolled_skill_total`,
                `repeating_tradition_${traditionId}_other_skill_total`,
                `repeating_tradition_${traditionId}_rolled_skill_name`,
                `repeating_tradition_${traditionId}_other_skill_name`,
                `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
        });
        getAttrs(traditionGetAttrs.concat(['spirit_combat_skill_id', 'social_attack_id_value', 'social_defense_id_value']), function(v) {
            let newAttrs = {};
            traditionIds.forEach(traditionId => {
                if (`repeating_${type}_${id}`.toUpperCase() === v[`repeating_tradition_${traditionId}_rolled_skill_id`].toUpperCase()) {
                    newAttrs[`repeating_tradition_${traditionId}_rolled_skill_name`] = event.newValue;
                }

                if (`repeating_${type}_${id}`.toUpperCase() === v[`repeating_tradition_${traditionId}_other_skill_id`].toUpperCase()) {
                    newAttrs[`repeating_tradition_${traditionId}_other_skill_name`] = event.newValue;
                }
            });

            if (`repeating_${type}_${id}`.toUpperCase() === v['spirit_combat_skill_id'].toUpperCase()) {
                newAttrs['spirit_combat_skill_name'] = event.newValue;
            }

            if (`repeating_${type}_${id}`.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
                newAttrs['social_attack_name'] = event.newValue;
            }

            if (`repeating_${type}_${id}`.toUpperCase() === v['social_defense_id_value'].toUpperCase()) {
                newAttrs['social_defense_name'] = event.newValue;
            }

            console.log(`Setting attrs for ${type} ${id} trigger`);
            setAttrs(newAttrs);
        });
    });
});

/* Professional Skill, Passion & Combat Style Notes */
on("change:repeating_professionalskill:notes change:repeating_combatstyle:notes change:repeating_passion:notes", function(event) {
    const type = event.sourceAttribute.split('_')[1];
    const id = event.sourceAttribute.split('_')[2];

    getSectionIDs("repeating_tradition", function(traditionIds) {
        getAttrs(['spirit_combat_skill_id', 'social_attack_id_value', 'social_defense_id_value'], function(v) {
            let newAttrs = {};

            if (`repeating_${type}_${id}`.toUpperCase() === v['spirit_combat_skill_id'].toUpperCase()) {
                newAttrs['spirit_combat_skill_notes'] = event.newValue;
            }

            if (`repeating_${type}_${id}`.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
                newAttrs['social_attack_notes'] = event.newValue;
            }

            if (`repeating_${type}_${id}`.toUpperCase() === v['social_defense_id_value'].toUpperCase()) {
                newAttrs['social_defense_notes'] = event.newValue;
            }

            console.log(`Setting attrs for ${type} ${id} notes trigger`);
            setAttrs(newAttrs);
        });
    });
});

/* Professional Skill & Combat Style Total and Encumbered */
on("change:repeating_professionalskill:char1 change:repeating_professionalskill:char2 " +
    "change:repeating_professionalskill:other change:repeating_professionalskill:total change:repeating_professionalskill:encumbered " +
    "change:repeating_combatstyle:char1 change:repeating_combatstyle:char2 " +
    "change:repeating_combatstyle:other change:repeating_combatstyle:total change:repeating_combatstyle:encumbered", function(event) {
    // Only players should be allowed to trigger reverse calculation to avoid running this function multiple times
    if (event.sourceAttribute.endsWith("_total") && event.sourceType === 'sheetworker') {
        return;
    }
    const type = event.sourceAttribute.split('_')[1];
    const id = event.sourceAttribute.split('_')[2];
    const skillId = `repeating_${type}_${id}`

    getSectionIDs("repeating_tradition", function(traditionIds) {
        let traditionGetAttrs = []
        traditionIds.forEach(traditionId => {
            traditionGetAttrs.push(`repeating_tradition_${traditionId}_rolled_skill_id`,
                `repeating_tradition_${traditionId}_other_skill_id`,
                `repeating_tradition_${traditionId}_rolled_skill_total`,
                `repeating_tradition_${traditionId}_other_skill_total`,
                `repeating_tradition_${traditionId}_rolled_skill_name`,
                `repeating_tradition_${traditionId}_other_skill_name`,
                `repeating_tradition_${traditionId}_type`, `repeating_tradition_${traditionId}_tradition_rank`)
        });

        getAttrs(allCharGetAttrs.concat([`repeating_${type}_${id}_char1`, `repeating_${type}_${id}_char2`, `repeating_${type}_${id}_other`],
            ['willpower_total', 'spirit_damage_other', 'spirit_damage_temp', 'spirit_damage_calc', 'spirit_combat_skill_id'],
            ['social_damage_other', 'social_damage_temp', 'social_attack_id_value', 'social_defense_id_value', 'int', 'pow', 'cha'], traditionGetAttrs), function(v) {
            const charObj = buildCharObj(v);
            let skillTotal = 0;
            let primaryNewValue = {};
            if (event.sourceAttribute.endsWith("_total")) {
                skillTotal = parseInt(event.newValue);
                primaryNewValue[`${skillId}_other`] = calcProSkillOther(charObj, v[`repeating_${type}_${id}_char1`], v[`repeating_${type}_${id}_char2`], skillTotal);
            } else {
                skillTotal = calcProSkillTotal(charObj, v[`repeating_${type}_${id}_char1`], v[`repeating_${type}_${id}_char2`], v[`repeating_${type}_${id}_other`]);
                primaryNewValue[`${skillId}_total`] = skillTotal;
            }
            const referencedIdTotals = calcReferencedIdTotals(skillId, skillTotal, traditionIds, parseInt(v['int']), parseInt(v['pow']), parseInt(v['cha']), v)
            const skillEncumbered = calcProSkillEncumbered(v[`repeating_${type}_${id}_char1`], v[`repeating_${type}_${id}_char2`]);

            let socialVals = {};
            if (`repeating_${type}_${id}`.toUpperCase() === v['social_attack_id_value'].toUpperCase()) {
                socialVals = calcSocialDamage(v['social_damage_other'], v['social_damage_temp'], v['social_attack_id_value'], skillTotal);
                socialVals['social_attack_encumbered'] = skillEncumbered;
                socialVals['social_attack_total'] = skillTotal;
            }
            if (`repeating_${type}_${id}`.toUpperCase() === v['social_defense_id_value'].toUpperCase()) {
                socialVals['social_defense_encumbered'] = skillEncumbered;
                socialVals['social_defense_total'] = skillTotal;
            }

            let spiritDamageVals = {};
            let newSpiritRefValues = {};
            if (`repeating_${type}_${id}`.toUpperCase() === v['spirit_combat_skill_id'].toUpperCase()) {
                spiritDamageVals = calcSpiritDamage(v['spirit_damage_other'], v['spirit_damage_temp'], v['spirit_damage_calc'], v['spirit_combat_skill_id'], skillTotal);
                newSpiritRefValues['spirit_combat_skill_encumbered'] = skillEncumbered;
                newSpiritRefValues['spirit_combat_skill_total'] = skillTotal;
            }

            console.log(`Setting attrs for ${type} ${id} total/enc trigger`);
            setAttrs({
                ...primaryNewValue,
                [`repeating_${type}_${id}_encumbered`]: skillEncumbered,
                ...newSpiritRefValues,
                ...referencedIdTotals,
                ...spiritDamageVals,
                ...socialVals
            });
        });
    });
});

/* Skill Augmentation Triggers */
on("change:skill_augment change:repeating_passion:augment change:repeating_professionalskill:augment change:repeating_combatstyle:augment", function(event) {
    const sourceAttr = event.sourceAttribute;
    if (event.sourceType !== 'sheetworker') {
        getSectionIDs("repeating_passion", function(passionIds) {
            getSectionIDs("repeating_professionalskill", function(proSkillIds) {
                getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
                    console.log(`Setting attrs for augmentation trigger`);
                    setAttrs(calcAugmentation(sourceAttr, combatStyleIds, proSkillIds, passionIds));
                });
            });
        });
    }
});

/* Social Attack ID Triggers */
on("change:social_attack_id change:repeating_passion:social_attack change:repeating_professionalskill:social_attack change:repeating_combatstyle:social_attack", function(event) {
    console.log("social attack triggered by = " + event.sourceAttribute);
    const sourceAttr = event.sourceAttribute;
    if (event.sourceType !== 'sheetworker') {
        getSectionIDs("repeating_passion", function(passionIds) {
            getSectionIDs("repeating_professionalskill", function(proSkillIds) {
                getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
                    let targetVal = event.newValue;
                    if (sourceAttr.startsWith('repeating_')) {
                        targetVal = sourceAttr.replace('_social_attack', '');
                    }
                    getAttrs(['social_attack_id', 'social_damage_other', 'social_damage_temp', `${targetVal}_name`, `${targetVal}_encumbered`, `${targetVal}_total`,`${targetVal}_notes`], function (v) {
                        console.log(`Setting attrs for social_attack_id trigger`);
                        setAttrs(calcSocialAttack(sourceAttr, combatStyleIds, proSkillIds, passionIds, v));
                    });
                });
            });
        });
    }
});

/* Social Defense ID Triggers */
on("change:social_defense_id change:repeating_passion:social_defense change:repeating_professionalskill:social_defense change:repeating_combatstyle:social_defense", function(event) {
    console.log("social defense triggered by = " + event.sourceAttribute);
    const sourceAttr = event.sourceAttribute;
    if (event.sourceType !== 'sheetworker') {
        getSectionIDs("repeating_passion", function(passionIds) {
            getSectionIDs("repeating_professionalskill", function(proSkillIds) {
                getSectionIDs("repeating_combatstyle", function(combatStyleIds) {
                    getAttrs(['social_defense_id'], function(v) {
                        let targetVal = event.newValue;
                        if (sourceAttr.startsWith('repeating_')) {
                            targetVal = sourceAttr.replace('_social_defense', '');
                        }
                        getAttrs(['social_defense_id', `${targetVal}_name`, `${targetVal}_encumbered`, `${targetVal}_total`,`${targetVal}_notes`], function (v) {
                            console.log(`Setting attrs for social defense id trigger`);
                            setAttrs(calcSocialDefense(sourceAttr, combatStyleIds, proSkillIds, passionIds, v));
                        });
                    });
                });
            });
        });
    }
});

/* Encumbrance Triggers */
/* Armor ENC and Armor Penalty*/
on("change:location12_armor_enc change:location11_armor_enc change:location10_armor_enc change:half_effective_armor_enc change:location9_armor_enc change:location8_armor_enc change:location7_armor_enc change:location6_armor_enc change:location5_armor_enc change:location4_armor_enc change:location3_armor_enc change:location2_armor_enc change:location1_armor_enc change:half_effective_armor_enc", function() {
    getAttrs(armorEncGetAttrs.concat(encGetAttrs, ['int', 'dex', 'initiative_bonus_other', 'initiative_bonus_temp', 'armor_penalty',
        'athletics_total', 'initiative_add_one_tenth_athletics', 'fatigue'],
        ['str', 'movement_rate_species', 'movement_rate_other', 'movement_rate_temp']), function(v) {
        const armorAttrs = calcArmorEncAndPenalty(v);
        v['effective_armor_enc'] = armorAttrs['effective_armor_enc'];
        v['armor_enc_carried'] = armorAttrs['armor_enc_carried'];
        const initiative_bonus_fatigue = parseInt(fatigueTable[v['fatigue']][2]);
        const newEncVals = calcEnc(parseInt(v['str']), v);
        console.log(`Setting attrs for armor enc trigger`);
        setAttrs({
            ...armorAttrs,
            ...newEncVals,
            ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                v['movement_rate_fatigue'], newEncVals['movement_rate_enc']),
            ...calcInitiativeBonus(parseInt(v['int']), parseInt(v['dex']), v['initiative_bonus_other'],
                v['initiative_bonus_temp'], armorAttrs['armor_penalty'], initiative_bonus_fatigue, parseInt(v['athletics_total']),
                v['initiative_add_one_tenth_athletics']),
            ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                v['movement_rate_fatigue'], newEncVals['movement_rate_enc'])
        });
    });
});

/* Armor Equipped */
['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'].forEach(num => {
    on(`change:location${num}_armor_equipped`, function() {
        getAttrs([`location${num}_other_ap`, `location${num}_armor_ap`, 'all_armor_temp'].concat(armorEncGetAttrs, encGetAttrs,
            ['int', 'dex', 'initiative_bonus_other', 'initiative_bonus_temp', 'armor_penalty', 'athletics_total',
            'initiative_add_one_tenth_athletics', 'fatigue'],
            ['str', 'movement_rate_species', 'movement_rate_other', 'movement_rate_temp']), function(v) {
            const armorAttrs = calcArmorEncAndPenalty(v);
            const initiative_bonus_fatigue = parseInt(fatigueTable[v['fatigue']][2]);
            v['effective_armor_enc'] = armorAttrs['effective_armor_enc'];
            v['armor_enc_carried'] = armorAttrs['armor_enc_carried'];
            const newEncVals = calcEnc(parseInt(v['str']), v);
            console.log(`Setting attrs for armor equipped trigger`);
            setAttrs({
                [`location${num}_ap`]: calcLocationAP(v[`location${num}_other_ap`], v[`location${num}_armor_ap`], parseInt(v['all_armor_temp']), v[`location${num}_armor_equipped`]),
                ...armorAttrs,
                ...newEncVals,
                ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                    v['movement_rate_fatigue'], newEncVals['movement_rate_enc']),
                ...calcInitiativeBonus(parseInt(v['int']), parseInt(v['dex']), v['initiative_bonus_other'],
                    v['initiative_bonus_temp'], armorAttrs['armor_penalty'], initiative_bonus_fatigue, parseInt(v['athletics_total']),
                    v['initiative_add_one_tenth_athletics'])
            });
        });
    });
});



/* Weapon ENC
on("change:repeating_weapon:enc change:repeating_weapon:ammo_enc change:repeating_weapon:clip_enc change:repeating_weapon:ammo change:repeating_weapon:clips change:repeating_weapon:location", function() {
    getSectionIDs("repeating_weapon", function(weaponIds) {
        let weaponGetAttrs = [];
        weaponIds.forEach(id => {
            weaponGetAttrs.push(`repeating_weapon_${id}_enc`, `repeating_weapon_${id}_ammo_enc`, `repeating_weapon_${id}_clip_enc`, `repeating_weapon_${id}_ammo`, `repeating_weapon_${id}_clips`, `repeating_weapon_${id}_location`)
        });

        getAttrs(weaponGetAttrs.concat(encGetAttrs, ['str', 'movement_rate_species', 'movement_rate_other', 'movement_rate_temp',
            'movement_rate_fatigue']), function(v) {
            const weaponAttrs = calcWeaponEnc(weaponIds, v);
            v['weapons_enc'] = weaponAttrs['weapons_enc'];
            v['weapons_enc_carried'] = weaponAttrs['weapons_enc_carried'];
            const newEncVals = calcEnc(parseInt(v['str']), v);
            setAttrs({
                ...weaponAttrs,
                ...newEncVals,
                ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                    v['movement_rate_fatigue'], newEncVals['movement_rate_enc'])
            });
        });
    });
}); */

/* Melee ENC */
on("change:repeating_meleeweapon:enc change:repeating_meleeweapon:quantity change:repeating_meleeweapon:location", function() {
    getSectionIDs("repeating_meleeweapon", function(meleeIds) {
        let meleeGetAttrs = [];
        meleeIds.forEach(id => {
            meleeGetAttrs.push(`repeating_meleeweapon_${id}_enc`, `repeating_meleeweapon_${id}_quantity`, `repeating_meleeweapon_${id}_location`)
        });

        getAttrs(['str'].concat(meleeGetAttrs, encGetAttrs, ['movement_rate_species', 'movement_rate_other',
            'movement_rate_temp', 'movement_rate_fatigue']), function(v) {
            const meleeAttrs = calcGenericRepeatingEnc(meleeIds, 'meleeweapon', v);
            v['meleeweapon_enc'] = meleeAttrs['meleeweapon_enc'];
            v['meleeweapon_enc_carried'] = meleeAttrs['meleeweapon_enc_carried'];
            const newEncVals = calcEnc(parseInt(v['str']), v);
            console.log(`Setting attrs for melee enc trigger`);
            setAttrs({
                ...meleeAttrs,
                ...newEncVals,
                ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                    v['movement_rate_fatigue'], newEncVals['movement_rate_enc'])
            });
        });
    });
});

/* Ranged ENC */
on("change:repeating_rangedweapon:enc change:repeating_rangedweapon:quantity change:repeating_rangedweapon:location", function() {
    getSectionIDs("repeating_rangedweapon", function(rangedIds) {
        let rangedGetAttrs = [];
        rangedIds.forEach(id => {
            rangedGetAttrs.push(`repeating_rangedweapon_${id}_enc`, `repeating_rangedweapon_${id}_quantity`, `repeating_rangedweapon_${id}_location`)
        });

        getAttrs(['str'].concat(rangedGetAttrs, encGetAttrs, ['movement_rate_species', 'movement_rate_other',
            'movement_rate_temp', 'movement_rate_fatigue']), function(v) {
            const rangedAttrs = calcGenericRepeatingEnc(rangedIds, 'rangedweapon', v);
            v['rangedweapon_enc'] = rangedAttrs['rangedweapon_enc'];
            v['rangedweapon_enc_carried'] = rangedAttrs['rangedweapon_enc_carried'];
            const newEncVals = calcEnc(parseInt(v['str']), v);
            console.log(`Setting attrs for ranged enc trigger`);
            setAttrs({
                ...rangedAttrs,
                ...newEncVals,
                ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                    v['movement_rate_fatigue'], newEncVals['movement_rate_enc'])
            });
        });
    });
});



/* Gear ENC */
on("change:repeating_equipment:enc change:repeating_equipment:quantity change:repeating_equipment:location", function() {
    getSectionIDs("repeating_equipment", function(gearIds) {
        let gearGetAttrs = [];
        gearIds.forEach(id => {
            gearGetAttrs.push(`repeating_equipment_${id}_enc`, `repeating_equipment_${id}_quantity`, `repeating_equipment_${id}_location`)
        });

        getAttrs(['str'].concat(gearGetAttrs, encGetAttrs, ['movement_rate_species', 'movement_rate_other',
            'movement_rate_temp', 'movement_rate_fatigue']), function(v) {
            const gearAttrs = calcGenericRepeatingEnc(gearIds, 'equipment', v);
            v['equipment_enc'] = gearAttrs['equipment_enc'];
            v['equipment_enc_carried'] = gearAttrs['equipment_enc_carried'];
            const newEncVals = calcEnc(parseInt(v['str']), v);

            console.log(`Setting attrs for gear enc trigger`);
            setAttrs({
                ...gearAttrs,
                ...newEncVals,
                ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                    v['movement_rate_fatigue'], newEncVals['movement_rate_enc'])
            });
        });
    });
});

/* Currency ENC */
on("change:repeating_currency:enc change:repeating_currency:quantity change:repeating_currency:location", function() {
    getSectionIDs("repeating_currency", function(currencyIds) {
        let currencyGetAttrs = [];
        currencyIds.forEach(id => {
            currencyGetAttrs.push(`repeating_currency_${id}_enc`, `repeating_currency_${id}_quantity`, `repeating_currency_${id}_location`)
        });

        getAttrs(['str'].concat(currencyGetAttrs, encGetAttrs, ['movement_rate_species', 'movement_rate_other',
            'movement_rate_temp', 'movement_rate_fatigue']), function(v) {
            const currencyAttrs = calcGenericRepeatingEnc(currencyIds, 'currency', v);
            v['currency_enc'] = currencyAttrs['currency_enc'];
            v['currency_enc_carried'] = currencyAttrs['currency_enc_carried'];
            const newEncVals = calcEnc(parseInt(v['str']), v);

            console.log(`Setting attrs for currency enc trigger`);
            setAttrs({
                ...currencyAttrs,
                ...newEncVals,
                ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                    v['movement_rate_fatigue'], newEncVals['movement_rate_enc'])
            });
        });
    });
});

/* ENC */
on("change:avg_species_siz change:pack_equipped change:encumbrance_temp", function() {
    getAttrs(['str'].concat(encGetAttrs, ['movement_rate_species', 'movement_rate_other', 'movement_rate_temp',
        'movement_rate_fatigue']), function(v) {
        const newEncVals = calcEnc(parseInt(v['str']), v);
        console.log(`Setting attrs for enc trigger`);
        setAttrs({
            ...newEncVals,
            ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
            v['movement_rate_fatigue'], newEncVals['movement_rate_enc'])
        });
    });
});

/* Fatigue */
on("change:fatigue", function() {
    getAttrs(['dex', 'int', 'action_points_other', 'action_points_temp', 'action_points_calc', 'action_points',
        'action_points_max', 'fatigue', 'healing_rate', 'initiative_bonus_other', 'initiative_bonus_temp',
        'armor_penalty', 'athletics_total', 'initiative_add_one_tenth_athletics', 'movement_rate_species',
        'movement_rate_other', 'movement_rate_temp', 'movement_rate_enc'], function(v) {
        const dex = parseInt(v['dex']);
        const int = parseInt(v['int'])
        const newFatigueVals = calcFatigue(v['fatigue'], parseInt(v['healing_rate']));
        console.log(`Setting attrs for fatigue trigger`);
        setAttrs({
            ...newFatigueVals,
            ...calcActionPoints(dex, int, v['action_points_other'], v['action_points_temp'],
                v['action_points_calc'], v['fatigue'], v['action_points'], v['action_points_max']),
            ...calcInitiativeBonus(int, dex, v['initiative_bonus_other'], v['initiative_bonus_temp'],
                parseInt(v['armor_penalty']), parseInt(newFatigueVals['initiative_bonus_fatigue']), parseInt(v['athletics_total']),
                v['initiative_add_one_tenth_athletics']),
            ...calcMoveRate(v['movement_rate_species'], v['movement_rate_other'], v['movement_rate_temp'],
                newFatigueVals['movement_rate_fatigue'], v['movement_rate_enc'])
        });
    });
});

/* Magic */
/* Abilities filter
const abilitytypes = ["all","alchemy","animism","arcane_magic","artifice","divine_magic","fae_powers","folk_magic","magic","mysticism","psionics","psychic_powers","sorcery","super_powers","theism","other"];
abilitytypes.forEach(button => {
    on(`clicked:abilities_type_filter_${button}`, function() {
        console.log(`Setting attrs for ability type filter trigger`);
        setAttrs({
            abilities_type_filter: button
        });
    });
});

const abilityranks = ["all","0","1","2","3","4","5"];
abilityranks.forEach(button => {
    on(`clicked:abilities_rank_filter_${button}`, function() {
        console.log(`Setting attrs for ability rank filter trigger`);
        setAttrs({
            abilities_rank_filter: button
        });
    });
});

on("change:abilities_type_filter change:abilities_rank_filter change:compact change:edit", function(event) {
    getSectionIDs("repeating_ability", function(abilityIds) {
        let abilityGetAttrs = [];
        abilityIds.forEach(id => {
            abilityGetAttrs.push(`repeating_ability_${id}_favored`, `repeating_ability_${id}_rank`, `repeating_ability_${id}_type`)
        });
        getAttrs(['abilities_type_filter', 'abilities_rank_filter', 'compact', 'edit'].concat(abilityGetAttrs), function(v) {
            let setFilterAttrs = {};
            // Filter for favored only when in compact mode unless in edit mode
            if (v['compact'] === '1' && v['edit'] === '0') {
                abilityIds.forEach(id => {
                    if (
                        (v['abilities_type_filter'] === v[`repeating_ability_${id}_type`] || v['abilities_type_filter'] === 'all') &&
                        (v['abilities_rank_filter'] === v[`repeating_ability_${id}_rank`] || v['abilities_rank_filter'] === 'all') &&
                        (v[`repeating_ability_${id}_favored`] === '1')
                    ) {
                        setFilterAttrs[`repeating_ability_${id}_show`] = "1";
                    } else {
                        setFilterAttrs[`repeating_ability_${id}_show`] = "0";
                    }
                });
            } else {
                abilityIds.forEach(id => {
                    if (
                        (v['abilities_type_filter'] === v[`repeating_ability_${id}_type`] || v['abilities_type_filter'] === 'all') &&
                        (v['abilities_rank_filter'] === v[`repeating_ability_${id}_rank`] || v['abilities_rank_filter'] === 'all')
                    ) {
                        setFilterAttrs[`repeating_ability_${id}_show`] = "1";
                    } else {
                        setFilterAttrs[`repeating_ability_${id}_show`] = "0";
                    }
                });
            }

            console.log(`Setting attrs for ability filter trigger`);
            setAttrs(setFilterAttrs);
        });
    });
});
 */

/* Automatically setting prompts for certain types
on("change:repeating_ability:type", function(event) {
    const id = event.sourceAttribute.split('_')[2];
    console.log(`Setting attrs for ability ${id} type trigger`);
    getAttrs(['mysticism_prompts_enabled', 'sorcery_prompts_enabled', 'arcane_magic_prompts_enabled', 'divine_magic_prompts_enabled'], function(v) {
        if (event.newValue === "mysticism" && v['mysticism_prompts_enabled'] === '1') {
            setAttrs({[`repeating_ability_${id}_prompts`]: "@{prompt_intensity}"});
        } else if (event.newValue === "sorcery" && v['sorcery_prompts_enabled'] === '1') {
            setAttrs({[`repeating_ability_${id}_prompts`]: "@{casting_components}"});
        } else if (event.newValue === "arcane_magic" && v['arcane_magic_prompts_enabled'] === '1') {
            setAttrs({[`repeating_ability_${id}_prompts`]: "@{prompt_intensity}"});
        } else if (event.newValue === "divine_magic" && v['divine_magic_prompts_enabled'] === '1') {
            setAttrs({[`repeating_ability_${id}_prompts`]: "@{prompt_intensity}"});
        } else {
            setAttrs({[`repeating_ability_${id}_prompts`]: ""});
        }
    });
});
*/




/* Power Traits Summary */
on("change:repeating_power:traits", function(event) {
    const id = event.sourceAttribute.split('_')[2];
    console.log(`Setting attrs for power ${id} traits trigger, newValue=` + event.newValue);
    if (event.newValue === undefined) {
        setAttrs({[`repeating_power_${id}_traits_summary`]: "-"});
    } else {
        setAttrs({[`repeating_power_${id}_traits_summary`]: event.newValue.replace(/[\r\n\x0B\x0C\u0085\u2028\u2029]+/g, ",\xa0")});
    }
});

/* Power Tradition ID Trigger */
on("change:repeating_power:tradition_id", function(event) {
    const powerId = event.sourceAttribute.split('_')[2];
    /* Default referenced value to sanitized defaults */
    let newAttrs = {
        [`repeating_power_${powerId}_tradition_name`]: "",
        [`repeating_power_${powerId}_tradition_traits`]: "",
        [`repeating_power_${powerId}_rolled_skill_name`]: "",
        [`repeating_power_${powerId}_rolled_skill_total`]: 0,
        [`repeating_power_${powerId}_rolled_skill_macro`]: "",
        [`repeating_power_${powerId}_other_skill_name`]: "",
        [`repeating_power_${powerId}_other_skill_total`]: 0
    };

    /* If ID is valid set reference values */
    if (event.newValue && event.newValue.startsWith('repeating_tradition_')) {
        newAttrs = {
            [`repeating_power_${powerId}_tradition_name`]: `@{${event.newValue}_name}`,
            [`repeating_power_${powerId}_tradition_traits`]: `@{${event.newValue}_advanced_traits}`,
            [`repeating_power_${powerId}_rolled_skill_name`]: `@{${event.newValue}_rolled_skill_name}`,
            [`repeating_power_${powerId}_rolled_skill_total`]: `@{${event.newValue}_rolled_skill_total}`,
            [`repeating_power_${powerId}_rolled_skill_macro`]: `@{${event.newValue}_rolled_skill_macro}`,
            [`repeating_power_${powerId}_other_skill_name`]: `@{${event.newValue}_other_skill_name}`,
            [`repeating_power_${powerId}_other_skill_total`]: `@{${event.newValue}_other_skill_total}`
        }
    }

    console.log(`Setting attrs for new tradition ID`);
    setAttrs(newAttrs);
});

/* Weapon Buttons */
on("change:repeating_meleeweapon:favored change:repeating_rangedweapon:favored", function() {
    getSectionIDs("repeating_meleeweapon", function(meleeIds) {
        getSectionIDs("repeating_rangedweapon", function(rangedIds) {
            let meleeGetAttrs = [];
            meleeIds.forEach(id => {
                meleeGetAttrs.push(`repeating_meleeweapon_${id}_name`, `repeating_meleeweapon_${id}_favored`)
            });

            let rangedGetAttrs = [];
            rangedIds.forEach(id => {
                rangedGetAttrs.push(`repeating_rangedweapon_${id}_name`, `repeating_rangedweapon_${id}_favored`)
            });

            getAttrs(meleeGetAttrs.concat(rangedGetAttrs), function(v) {
                let weaponButtons = ""
                meleeIds.forEach(id => {
                    if (v[`repeating_meleeweapon_${id}_favored`] === '1') {
                        const name = v[`repeating_meleeweapon_${id}_name`];
                        weaponButtons = weaponButtons + ` [${name}](~@{character_name}|repeating_meleeweapon_${id}_damage)`;
                    }
                });
                rangedIds.forEach(id => {
                    if (v[`repeating_rangedweapon_${id}_favored`] === '1') {
                        const name = v[`repeating_rangedweapon_${id}_name`];
                        weaponButtons = weaponButtons + ` [${name}](~@{character_name}|repeating_rangedweapon_${id}_damage)`;
                    }
                });
                console.log(`Setting attrs for favored weapon trigger`);
                setAttrs({weapon_buttons: weaponButtons});
            });
        });
    });
});

/* Novice Skill */
on("change:novice_char1 change:novice_char2", function(event) {
    getAttrs(allCharGetAttrs.concat(['novice_char1', 'novice_char2']), function(v) {
        let char1Val;
        let char2Val;

        const charObj = buildCharObj(v);
        switch(v['novice_char1']) {
            case '@{str}':
                char1Val = charObj['str'];
                break;
            case '@{dex}':
                char1Val = charObj['dex'];
                break;
            case '@{siz}':
                char1Val = charObj['siz'];
                break;
            case '@{con}':
                char1Val = charObj['con'];
                break;
            case '@{pow}':
                char1Val = charObj['pow'];
                break;
            case '@{int}':
                char1Val = charObj['int'];
                break;
            case '@{cha}':
                char1Val = charObj['cha'];
                break;
            case '(21-@{int})':
                char1Val = 21 - charObj['int'];
                break;
            default:
                char1Val = 0;
        }

        switch(v['novice_char2']) {
            case '@{str}':
                char2Val = charObj['str'];
                break;
            case '@{dex}':
                char2Val = charObj['dex'];
                break;
            case '@{siz}':
                char2Val = charObj['siz'];
                break;
            case '@{con}':
                char2Val = charObj['con'];
                break;
            case '@{pow}':
                char2Val = charObj['pow'];
                break;
            case '@{int}':
                char2Val = charObj['int'];
                break;
            case '@{cha}':
                char2Val = charObj['cha'];
                break;
            default:
                char2Val = 0;
        }

        console.log(`Setting attrs for novice skill base trigger`);
        setAttrs({novice_total: char1Val + char2Val});
    });
});

/* Repeating IDs */
on("change:repeating_combatstyle change:repeating_professionalskill change:repeating_passion change:repeating_meleeweapon " +
    "change:repeating_rangedweapon change:repeating_equipment change:repeating_currency change:repeating_condition " +
    "change:repeating_superpowerlimit change:repeating_tradition change:repeating_power change:repeating_feature", function(event) {
    const type = event.sourceAttribute.split('_')[1];
    const id = event.sourceAttribute.split('_')[2];

    /* seems we can get change that aren't for a particular item this checks to ensure we have an id to parse */
    if (id.startsWith("-")) {
        setAttrs({[`repeating_${type}_${id}_id`]: `repeating_${type}_${id}`});
    }
});

/* Import Triggers */
on("clicked:import_as_minor", function() {
    getAttrs(['import_json_data', 'import_character', 'simplified_combat_enabled', 'luck_points_rank'], function(v) {
        importCharacter(v, "minor", v['luck_points_rank']);
    });
});

on("clicked:import_as_major", function() {
    getAttrs(['import_json_data', 'import_character', 'simplified_combat_enabled', 'luck_points_rank'], function(v) {
        importCharacter(v, "major", v['luck_points_rank']);
    });
});








</script>