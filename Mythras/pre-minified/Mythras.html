<!-- Header -->
<div class="sheet-sticky-header">
    <div class="sheet-space-between">
        <div>
            <!-- Roll Options -->
            <label class="sheet-left sheet-rmargin" data-i18n="rolls">Rolls</label>

            <input type='hidden' class='sheet-checkbtn' name='attr_whisper_enabled' value="1"/>
            <button type="action" class="sheet-checkbtn" name="act_whisper" data-i18n="whisper">Whisper</button>

            <input type='hidden' class='sheet-checkbtn' name='attr_show_name_enabled' value="1"/>
            <button type="action" class="sheet-checkbtn" name="act_show_name" data-i18n="show-name">Show Name</button>
        </div>
        <div>
            <!-- Mode -->
            <input type='hidden' class='sheet-checkbtn' name='attr_edit_enabled' value="1"/>
            <button type="action" class="sheet-checkbtn" name="act_edit"><span class="sheet-pictos">p</span> <span data-i18n="edit-mode">Edit Mode</span></button>

            <!-- Configuration Toggle -->
            <input type='hidden' class='sheet-checkico' name='attr_config_enabled' value="0"/>
            <button type="action" class="sheet-checkico" name="act_config"><span class="sheet-pictos">y</span></button>

            <!-- Help Toggle -->
            <input type='hidden' class='sheet-checkico' name='attr_help_enabled' value="0"/>
            <button type="action" class="sheet-checkico" name="act_help"><span class="sheet-pictos">?</span></button>
        </div>
    </div>

    <!-- Help Section -->
    <input type='hidden' class='sheet-toggle' name='attr_help_enabled'/>
    <div class="sheet-toggle sheet-infomsg">
        <div class="sheet-space-between-centered">
            <div>
                <input type="text" class="sheet-hidden" name="attr_version" value="3.0" readonly>
                <label class="sheet-left" data-i18n="sheet-version">Sheet Version</label>&nbsp;<span name="attr_version"></span>
            </div>
            <div>
                <span data-i18n="recalc-notice">If your sheet values are incorrect, try clicking here.</span> <span> -> </span>
                <button type="action" name="act_recalc" class="sheet-action-btn sheet-text-center" data-i18n="recalculate-sheet">Recalculate Sheet</button>
            </div>
        </div>
        <hr>
        <p data-i18n="help-description">This is the help section covering the options bar and it's settings. It can be hidden or revealed at any time by clicking the question mark symbol in the upper-right.  Other help sections can be toggled with similar symbols found through-out the sheet.</p>
        <label class="sheet-left" data-i18n="edit-mode">Edit Mode</label><br>
        <p data-i18n="help-edit-info">Use edit mode when building and improving your sheet.  Anything labeled Base Mod or Other is provided permanent or semi-permanent modifications.  For example, the effects of ageing on a characteristic, an additional Action Point from a gift or skill improvements from experience and training.  When disabled the sheet is optimized for game play.  In this mode Temp modifiers are provided for temporary adjustments.  Magic buffs and penalties for example.</p>
        <label class="sheet-left" data-i18n="whisper">Whisper</label><br>
        <p data-i18n="help-whisper-info">Send roll results to the GM only.</p>
        <label class="sheet-left" data-i18n="show-name">Show Name</label><br>
        <p data-i18n="help-show-name-info">Show the name in roll results.</p>
        <label class="sheet-left"><span class="sheet-pictos">y</span> <span data-i18n="configuration">Configuration</span></label><br>
        <p data-i18n="help-configuration-info">Show options to change sheet type, enable or disable optional rules, and modify how the sheet works.</p>
        <label class="sheet-left" data-i18n="links">Links</label><br>
        <div class="sheet-space-between">
            <button type="roll" class="sheet-link" name="roll_reportbug" value="Report a bug with the sheet here: https://github.com/DigitalPagan/Mythras-Roll20-Sheet/issues/new" data-i18n="report-a-bug">Report a Bug</button>
            <button type="roll" class="sheet-link" name="roll_roll20forum" value="Visit the Mythras Roll20 forum here: https://www.tapatalk.com/groups/designmechanism/mythras-roll20-f19/" data-i18n="mythras-roll20-forum">Mythras Roll20 Forum</button>
            <button type="roll" class="sheet-link" name="roll_contactsheetauthor" value="Visit the author's profile and send a private message: https://app.roll20.net/users/103705" data-i18n="contact-sheet-author">Contact Sheet Author</button>
        </div>
    </div>

    <!-- Config Section -->
    <input type='hidden' class='sheet-toggle' name='attr_config_enabled'/>
    <div class="sheet-toggle">
        <!-- Sheet Settings -->
        <!-- Sheet Type Selection -->
<label class="sheet-left" data-i18n="sheet-type">Sheet Type</label>&nbsp;
<select data-i18n-list="sheet-type-order" title="@{type}" class="sheet-usrinput" name="attr_type">
    <option  value="battle-unit" data-i18n-list-item="battle-unit" data-i18n="battle-unit">Battle Unit</option>
    <option value="character" data-i18n-list-item="character" data-i18n="character" selected>Character</option>
    <option  value="ship" data-i18n-list-item="ship" data-i18n="ship">Ship</option>
    <option  value="vehicle" data-i18n-list-item="vehicle"><span data-i18n="vehicle">Vehicle</span>/<span data-i18n="spaceship">Spaceship</span></option>
    <option  value="star_system" data-i18n-list-item="star-system" data-i18n="star-system">Star System</option>
</select>

<!-- Campaign Settings Warning -->
<div class="sheet-warnmsg">
    <span data-i18n="settings-warning">The below settings are generally set by your GM and should not be adjusted on a sheet by sheet basis.  They are provided here for visibility, experimentation and other rare use cases.  Make sure to check with your GM before making any alterations.</span>
</div>

<!-- Campaign Settings -->
<div class='sheet-space-between'>
    <div class="sheet-third-col sheet-rmargin">
        <!-- Systems -->
        <div class="sheet-section">
            <h2 data-i18n="mechanical-systems">Mechanical Systems</h2>

            <!-- Dependencies -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_dependencies_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_dependencies"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="dependencies">Dependencies</label>
            </div>

            <!-- Extended Conflict Resolution -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_extended_conflict_resolution_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_extended_conflict_resolution"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="extended-conflict-resolution">Extended Conflict Resolution</label>
            </div>

            <!-- Rank -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_luck_points_rank_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_luck_points_rank"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="rank">Rank</label>
            </div>

            <!-- Simplified Combat -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_simplified_combat_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_simplified_combat"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="simplified-combat">Simplified Combat</label>
            </div>

            <!-- Social Conflict -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_social_conflict_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_social_conflict"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="social-conflict">social_conflict</label>
            </div>
        </div>

        <!-- Skills -->
        <div class="sheet-section sheet-rpad">
            <h2 data-i18n="skills">Skills</h2>

            <!-- Herculean Skill Modifier -->
            <div class="flex">
                <label class="sheet-left" data-i18n="herculean-modifier">Herculean Modifier</label>
                <select class="sheet-full-width sheet-usrinput" name="attr_herculean_mod">
                    <option value=".1">1/10</option>
                    <option value=".2">1/5</option>
                </select>
            </div>

            <div><label class="sheet-left" data-i18n="standard-skills">Standard Skills</label></div>
        </div>
    </div>


    <div class="sheet-third-col sheet-rmargin">
        <!-- Weapon Settings -->
        <div class="sheet-section">
            <h2 data-i18n="weapons">Weapons</h2>

            <label class="sheet-left" data-i18n="close-combat">Close Combat</label>

            <!-- Reach -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_reach_enabled' value="0"/>
                &emsp;<button type="action" class="sheet-checkbox" name="act_reach"><span class="sheet-pictos">3</span></button>
                <label class="sheet-checkbox" data-i18n="reach">Reach</label>
            </div>

            <label class="sheet-left" data-i18n="ranged">Ranged</label>

            <!-- Fire Rate -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_fire_rate_enabled' value="0"/>
                &emsp;<button type="action" class="sheet-checkbox" name="act_fire_rate"><span class="sheet-pictos">3</span></button>
                <label class="sheet-checkbox" data-i18n="fire-rate">Fire Rate</label>
            </div>
        </div>

        <div class="sheet-section sheet-rpad">
            <!-- Attributes -->
            <h2 data-i18n="attributes">Attributes</h2>

            <!-- Action Point Calculation -->
            <div class="flex">
                <label class="sheet-left" data-i18n="action-points">Action Points</label>
                <select class="sheet-full-width sheet-usrinput" name="attr_action_points_calc">
                    <option value="calculate" data-i18n="calculated" selected>Calculated</option>
                    <option value="set_2" data-i18n="set-at-2">Set at 2</option>
                    <option value="set_3" data-i18n="set-at-3">Set at 3</option>
                </select>
            </div>

            <!-- Magic Points -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_magic_points_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_magic_points"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="magic-points">Magic Points</label>
            </div>

            <!-- Power Points -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_power_points_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_power_points"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="power-points">Power Points</label>
            </div>

            <!-- Prana Points -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_prana_points_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_prana_points"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="prana-points">Prana Points</label>
            </div>

            <!-- Tenacity -->
            <div class="flex">
                <input type='hidden' class='sheet-checkbox' name='attr_tenacity_enabled' value="0"/>
                <button type="action" class="sheet-checkbox" name="act_tenacity"><span class="sheet-pictos">3</span></button>
                <label class="sheet-right" data-i18n="tenacity">Tenacity</label>
            </div>
        </div>
    </div>

    <div class="sheet-third-col">
        <!-- Abilities -->
        <div class="sheet-section sheet-rpad">
            <h2 data-i18n="abilities">Abilities</h2>
        </div>
    </div>
</div>
    </div>

    <hr>
</div>

<!-- Sheet Types -->
<input type="hidden" class="sheet-typetoggle" name="attr_type" value="character" />
<div class="sheet-battle-unit">Battle Unit</div>
<div class="sheet-character">
    <!-- Character Header -->
    <div class="sheet-flex">
        <!-- Info Section -->
        <div class="sheet-section sheet-info">
            <!-- Info 1st Row -->
            <div class="sheet-flex">
                <div class="sheet-info-box sheet-info-name">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{character_name}" name="attr_character_name">
                    <label class="sheet-under" data-i18n="name">Name</label>
                </div>
                <div class="sheet-info-box sheet-info-form">
                    <select class="sheet-usrinput sheet-full-width sheet-text-center" data-i18n-list="form-order" title="@{spirit}" name="attr_spirit">
                        <option value="0" data-i18n-list-item="corporeal" data-i18n="corporeal" selected>Corporeal</option>
                        <option value="1" data-i18n-list-item="spirit" data-i18n="spirit">Spirit</option>
                    </select>
                    <label class="sheet-under" data-i18n="form">Form</label>
                </div>
                <div class="sheet-info-box sheet-info-species">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{species}" name="attr_species">
                    <label class="sheet-under" data-i18n="species">Species</label>
                </div>
                <div class="sheet-info-box sheet-info-culture">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{culture}" name="attr_culture">
                    <label class="sheet-under"><span data-i18n="culture">Culture</span></label>
                </div>
                <div class="sheet-info-box sheet-info-career">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{career}" name="attr_career">
                    <label class="sheet-under" data-i18n="career">Career</label>
                </div>
            </div>
            <!-- Info 2nd Row -->
            <div class="sheet-flex">
                <div class="sheet-info-box sheet-info-homeland">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{homeland}" name="attr_homeland">
                    <label class="sheet-under" data-i18n="homeland">Homeland</label>
                </div>
                <div class="sheet-info-box sheet-info-social-class">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{social_class}" name="attr_social_class">
                    <label class="sheet-under" data-i18n="social-class">Name</label>
                </div>
                <div class="sheet-info-box sheet-info-age">
                    <input type="number" class="sheet-usrinput sheet-full-width" title="@{age}" name="attr_age" value="0">
                    <label class="sheet-under" data-i18n="age">Age</label>
                </div>
                <div class="sheet-info-box sheet-info-gender">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{gender}" name="attr_gender">
                    <label class="sheet-under" data-i18n="gender">Gender</label>
                </div>
                <div class="sheet-info-box sheet-info-frame">
                    <input type="text" class="sheet-usrinput sheet-full-width" title="@{frame}" name="attr_frame">
                    <label class="sheet-under" data-i18n="frame">Gender</label>
                </div>
                <div class="sheet-info-box sheet-info-height">
                    <input type="number" style="padding-right: 25px" class="sheet-usrinput sheet-full-width" title="@{height}" name="attr_height" value="178">
                    <span class="sheet-input-unit" data-i18n="centimetres-short">cm</span>
                    <label class="sheet-under" data-i18n="height-bugfix-id">Height</label>
                </div>
                <div class="sheet-info-box sheet-info-weight">
                    <input type="number" style="padding-right: 20px" class="sheet-usrinput sheet-full-width" title="@{weight}" name="attr_weight" value="88">
                    <span class="sheet-input-unit" data-i18n="kilograms-short">kg</span>
                    <label class="sheet-under" data-i18n="weight">Weight</label>
                </div>
                <input type="checkbox" class="sheet-rank-toggle sheet-hidden" name="attr_luck_points_rank_enabled" value="1">
                <div class="sheet-info-box sheet-info-rank">
                    <input type="number" class="sheet-usrinput sheet-full-width" title="@{rank}" name="attr_rank" value="0">
                    <label class="sheet-under" data-i18n="rank">Rank</label>
                </div>
            </div>
        </div>

        <!-- Header 2nd Column -->
        <div class="sheet-logo">
            <!-- Logo -->
            <div>
                <img src="https://i.imgur.com/EzQDmms.png" alt="Mythras">
                
                
            </div>
            <!-- Special Section -->
            <div class="sheet-space-between">
                <label class="sheet-left" data-i18n="experience-rolls">Exp Rolls</label>
                <input type="number" class="sheet-usrinput sheet-grow" title="@{experience_rolls}" name="attr_experience_rolls" value="0">
            </div>
        </div>
    </div>

    <!-- Character Sheet Tabs -->
    <input type='hidden' class='sheet-tab' name='attr_character_tab' value='all'/>
    <div>
        <button type="action" name="act_character" >Character</button>
        <button type="action" name="act_journal" >Journal</button>
        <button type="action" name="act_configuration" >Configuration</button>
    </div>
</div>
<div class="sheet-ship">Ship</div>


<!-- M-Space Star System -->
<div class="sheet-star-system sheet-flex">
    <div class="sheet-section sheet-rmargin">
        <h2 data-i18n="stats">Stats</h2>
        <div class="flex">
            <label class="sheet-left" data-i18n="name">Name</label>
            <input type="text" class="sheet-full-width sheet-usrinput" title="@{character_name}" name="attr_character_name">
        </div>
        <div>
            <div class="system-label"><span data-i18n="sub-sector" class="bold">Sub Sector</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_subsector"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="hex" class="bold">Hex</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_hex"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="star-type" class="bold">Star Type</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_star"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="planets" class="bold">Planets</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_planets"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="habitable" class="bold">Habitable</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_habitable"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="starports" class="bold">Starports</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_starports"></div>
        </div>
        <div>
            <div class="system-label"><span data-i18n="astroid-belt" class="bold">Astroid Belt</span>:</div>
            <div class="system-field"><input type="text" class="full-width" name="attr_system_astroid_belt"></div>
        </div>
        <div><span data-i18n="notes" class="bold">Notes</span>:</div>
        <div><textarea name="attr_system_notes"></textarea></div>
    </div>
    <div>
        <div class="sheet-section sheet-bmargin">
            <h2><span data-i18n="species" class="bold">Species</span></h2>
            <fieldset class="repeating_systemspecies">
                <div class="sheet-bottom-border"></div>
                <div class="sheet-spacer"></div>
                <div><span data-i18n="name" class="bold">Name</span>: <input type="text" name="attr_name"></div>
                <div><span data-i18n="description" class="bold">Description</span>:</div>
                <div><textarea style="height: 5em" name="attr_description"></textarea></div>
            </fieldset>
        </div>
        <div class="sheet-section sheet-bmargin">
            <h2><span data-i18n="worlds" class="bold">Worlds</span></h2>
            <fieldset class="repeating_systemworld">
                <div class="sheet-bottom-border"></div>
                <div class="sheet-spacer"></div>
                <div><span data-i18n="name" class="bold">Name</span>: <input type="text" name="attr_name"></div>
                <div><span data-i18n="description" class="bold">Description</span>:</div>
                <div><textarea style="height: 5em" name="attr_description"></textarea></div>
            </fieldset>
        </div>
    </div>
</div>

<!-- Roll Templates -->
<!-- Default Roll Template -->
<!-- @{roll_display}&{template:default} {{name=@{name}}} @{name_display} {{roll=[[1d8]]}} -->
<rolltemplate class="sheet-rolltemplate-default">
    <table>
        <caption>
            {{#character}}
            <div class="sheet-character">{{character}}</div>
            {{/character}}
            <div class="sheet-name">{{name}}</div>
        </caption>
        {{#allprops() character name}}
        <tr><td class="sheet-label">{{key}}:</td><td class="sheet-value">{{value}}</td></tr>
        {{/allprops() character name}}
    </table>
</rolltemplate><script type="text/worker">
/* Common Scripts */
const configCheckboxList = ["config", "help", "edit", "whisper", "show_name", "dependencies", "extended_conflict_resolution",
    "fire_rate", "luck_points_rank", "magic_points", "power_points", "prana_points", "reach", "simplified_combat",
    "social_conflict", "tenacity"];
configCheckboxList.forEach(function(button) {
    on(`clicked:${button}`, function() {
        const flag = `${button}_enabled`;
        // Check the current value of the hidden flag.
        getAttrs([flag], function(v) {
            // Update the value of the hidden flag to "1" for checked or "0" for unchecked.
            setAttrs({
                [flag]: v[flag] !== "1" ? "1" : "0"
            });
        });
    });
});

/* Sheet Type Specific Worker Scripts */







</script>